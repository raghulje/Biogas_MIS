{"version":3,"file":"page-Y3Glfgan.js","sources":["../../src/pages/login/page.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useNavigate, Navigate } from 'react-router-dom';\nimport { useAuth } from '../../context/AuthContext';\nimport srelIcon from '../../assets/srel.png';\n\nexport default function LoginPage() {\n  const navigate = useNavigate();\n  const { login, isAuthenticated, loading: authLoading } = useAuth();\n  const [formData, setFormData] = useState({\n    email: '',\n    password: ''\n  });\n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [error, setError] = useState('');\n  const [showPassword, setShowPassword] = useState(false);\n\n  useEffect(() => {\n    // Redirect if already authenticated\n    if (isAuthenticated) {\n      navigate('/dashboard', { replace: true });\n      return;\n    }\n\n    window.scrollTo(0, 0);\n  }, [isAuthenticated, navigate]);\n\n  if (!authLoading && isAuthenticated) {\n    return <Navigate to=\"/dashboard\" replace />;\n  }\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsSubmitting(true);\n    setError('');\n\n    try {\n      await login(formData.email, formData.password);\n      navigate('/dashboard');\n    } catch (err: any) {\n      if (!err.response) {\n        setError('Cannot connect to server. Check that the backend is running and VITE_API_URL matches the server port.');\n        return;\n      }\n      const msg = err.response?.data?.message || err.response?.data?.error;\n      setError(msg || 'Invalid email or password. Please try again.');\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n    setError('');\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-gray-50 to-slate-100 flex items-center justify-center p-4\">\n      {/* Subtle background pattern */}\n      <div className=\"absolute inset-0 opacity-[0.02]\">\n        <div className=\"absolute inset-0\" style={{\n          backgroundImage: `url(\"data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='1'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E\")`,\n        }}></div>\n      </div>\n\n      <div className=\"max-w-md w-full relative z-10\">\n        {/* Login Card */}\n        <div className=\"bg-white rounded-2xl shadow-xl border border-gray-100 p-10\">\n          {/* Logo and Header */}\n          <div className=\"text-center mb-10\">\n            <div className=\"flex justify-center mb-6\">\n              <div className=\"relative\">\n                <img\n                  src={srelIcon}\n                  alt=\"SREL Logo\"\n                  className=\"h-16 w-auto object-contain\"\n                />\n              </div>\n            </div>\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Welcome Back</h1>\n            <p className=\"text-sm text-gray-600\">Industrial Biogas Plant MIS</p>\n          </div>\n\n          {/* Login Form */}\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            {/* Email Field */}\n            <div>\n              <label htmlFor=\"email\" className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                Email\n              </label>\n              <div className=\"relative\">\n                <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\n                  <i className=\"ri-mail-line text-gray-400 text-lg\"></i>\n                </div>\n                <input\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"email\"\n                  value={formData.email}\n                  onChange={handleChange}\n                  className=\"block w-full pl-12 pr-4 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent focus:bg-white transition-all text-sm shadow-sm\"\n                  placeholder=\"Enter your email\"\n                  required\n                  autoComplete=\"email\"\n                />\n              </div>\n            </div>\n\n            {/* Password Field */}\n            <div>\n              <label htmlFor=\"password\" className=\"block text-sm font-semibold text-gray-700 mb-2\">\n                Password\n              </label>\n              <div className=\"relative\">\n                <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none\">\n                  <i className=\"ri-lock-line text-gray-400 text-lg\"></i>\n                </div>\n                <input\n                  id=\"password\"\n                  name=\"password\"\n                  type={showPassword ? \"text\" : \"password\"}\n                  value={formData.password}\n                  onChange={handleChange}\n                  className=\"block w-full pl-12 pr-12 py-3 border border-gray-300 rounded-lg text-gray-900 placeholder-gray-400 bg-gray-50 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent focus:bg-white transition-all text-sm shadow-sm\"\n                  placeholder=\"Enter your password\"\n                  required\n                  autoComplete=\"current-password\"\n                />\n                <button\n                  type=\"button\"\n                  onClick={() => setShowPassword(!showPassword)}\n                  className=\"absolute inset-y-0 right-0 pr-4 flex items-center text-gray-400 hover:text-gray-900 transition-colors duration-200 focus:outline-none cursor-pointer z-10\"\n                  aria-label={showPassword ? \"Hide password\" : \"Show password\"}\n                  tabIndex={-1}\n                >\n                  <i className={`text-lg ${showPassword ? 'ri-eye-line' : 'ri-eye-off-line'}`}></i>\n                </button>\n              </div>\n            </div>\n\n            {/* Error Message */}\n            {error && (\n              <div className=\"bg-red-50 border-l-4 border-red-500 rounded-lg p-4 shadow-sm\">\n                <div className=\"flex items-start gap-3\">\n                  <i className=\"ri-error-warning-line text-red-600 text-lg mt-0.5\"></i>\n                  <p className=\"text-sm text-red-700 font-medium\">{error}</p>\n                </div>\n              </div>\n            )}\n\n            {/* Submit Button */}\n            <button\n              type=\"submit\"\n              disabled={isSubmitting}\n              className=\"w-full bg-gray-900 text-white py-3.5 rounded-lg font-semibold hover:bg-gray-800 focus:outline-none focus:ring-2 focus:ring-gray-900 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 text-sm shadow-lg hover:shadow-xl transform hover:-translate-y-0.5\"\n            >\n              {isSubmitting ? (\n                <>\n                  <i className=\"ri-loader-4-line animate-spin text-lg\"></i>\n                  <span>Signing in...</span>\n                </>\n              ) : (\n                <>\n                  <span>Sign In</span>\n                  <i className=\"ri-arrow-right-line text-lg\"></i>\n                </>\n              )}\n            </button>\n          </form>\n\n          {/* Footer */}\n          <div className=\"mt-8 pt-6 border-t border-gray-200\">\n            <div className=\"text-center\">\n              <p className=\"text-xs text-gray-500\">\n                Â© {new Date().getFullYear()} Refex Group. All rights reserved.\n              </p>\n              <p className=\"text-xs text-gray-400 mt-1\">Secure Admin Access</p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"names":["LoginPage","navigate","useNavigate","login","isAuthenticated","authLoading","useAuth","formData","setFormData","useState","isSubmitting","setIsSubmitting","error","setError","showPassword","setShowPassword","useEffect","jsx","Navigate","handleSubmit","e","err","msg","handleChange","jsxs","srelIcon","Fragment"],"mappings":"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"}