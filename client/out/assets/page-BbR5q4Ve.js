import{r as n,j as e,B as r,C as R}from"./index-D5WwrTj-.js";import{L as f,T as a}from"./Layout-BXTkXNOz.js";import{misService as B}from"./misService-LLTObjZP.js";import{B as c}from"./Button-Dm6J5fh5.js";import{D as w}from"./Download-CtvYS60w.js";import{C as m,a as j,G as t}from"./Grid-CDTwfBGP.js";import{F as I,L as N,A as F,D as v}from"./AdapterDateFns-BQbOmZZj.js";import{B as E}from"./ButtonGroup-DUICE6Nz.js";import{C as P}from"./Chip-Bs8bSymi.js";import"./srel-BMzgRxSF.js";import"./DialogContent-C2pFBHRZ.js";function J(){const[o,y]=n.useState("month"),[l,C]=n.useState(null),[d,S]=n.useState(null),[W,g]=n.useState(!0),[x,p]=n.useState(null),[u,b]=n.useState(null);n.useEffect(()=>{o!=="custom"&&h()},[o]);const h=async()=>{g(!0),b(null);try{const s={period:o};o==="custom"&&l&&d&&(s.startDate=l.toISOString().slice(0,10),s.endDate=d.toISOString().slice(0,10));const D=await B.getDashboardData(s);p(D)}catch(s){console.error("Failed to fetch dashboard data",s),b("Failed to load dashboard. Please try again."),p(null)}finally{g(!1)}},k=[{value:"day",label:"Daily"},{value:"week",label:"Weekly"},{value:"month",label:"Monthly"},{value:"year",label:"Yearly"},{value:"custom",label:"Custom"}];if(W&&!x)return e.jsx(f,{children:e.jsx(r,{sx:{display:"flex",justifyContent:"center",p:5},children:e.jsx(R,{})})});if(u||!x?.summary)return e.jsx(f,{children:e.jsxs(r,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",p:5,gap:2},children:[e.jsx(a,{color:"textSecondary",children:u||"No dashboard data available."}),e.jsx(c,{variant:"contained",onClick:()=>h(),sx:{textTransform:"none"},children:"Retry"})]})});const{summary:i}=x;return e.jsx(f,{children:e.jsxs(r,{children:[e.jsxs(r,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2},className:"aos-fade-down",children:[e.jsx(a,{variant:"h4",sx:{fontWeight:700,color:"#2879b6"},children:"Dashboard"}),e.jsx(c,{variant:"contained",startIcon:e.jsx(w,{}),className:"btn-gradient-success",sx:{textTransform:"none",borderRadius:"12px",color:"#ffffff",fontWeight:600,px:3,py:1.2,boxShadow:"0 4px 15px rgba(125, 194, 68, 0.3)"},children:"Export Report"})]}),e.jsx(m,{className:"glass-card aos-fade-up aos-delay-100 hover-lift",sx:{mb:3},children:e.jsxs(j,{children:[e.jsxs(r,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[e.jsx(I,{sx:{color:"#2879b6"}}),e.jsx(a,{variant:"h6",sx:{fontWeight:600,color:"#333842"},children:"Filter Records"})]}),e.jsx(r,{sx:{mb:2},children:e.jsx(E,{variant:"outlined",sx:{flexWrap:"wrap"},children:k.map(s=>e.jsx(c,{onClick:()=>y(s.value),variant:o===s.value?"contained":"outlined",sx:{textTransform:"none",minWidth:{xs:"80px",sm:"100px"},backgroundColor:o===s.value?"#2879b6":"transparent",borderColor:"#2879b6",color:o===s.value?"#ffffff":"#2879b6",borderRadius:"12px",fontWeight:600,"&:hover":{backgroundColor:o===s.value?"#235EAC":"rgba(40, 121, 182, 0.08)",borderColor:"#2879b6",transform:"translateY(-2px)"},transition:"all 0.3s ease"},children:s.label},s.value))})}),o==="custom"&&e.jsx(N,{dateAdapter:F,children:e.jsxs(t,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(t,{item:!0,xs:12,sm:4,children:e.jsx(v,{label:"Start Date",value:l,onChange:s=>C(s??null),slotProps:{textField:{fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}}}})}),e.jsx(t,{item:!0,xs:12,sm:4,children:e.jsx(v,{label:"End Date",value:d,onChange:s=>S(s??null),slotProps:{textField:{fullWidth:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}}}})}),e.jsx(t,{item:!0,xs:12,sm:4,children:e.jsx(c,{variant:"contained",onClick:()=>h(),disabled:!l||!d||l>d,sx:{textTransform:"none",borderRadius:"12px"},children:"Apply"})})]})})]})}),e.jsx(m,{className:"glass-card-strong aos-fade-up aos-delay-200 hover-lift",children:e.jsxs(j,{children:[e.jsxs(r,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(a,{variant:"h6",sx:{fontWeight:600,color:"#333842"},children:["MIS Summary - ",o.toUpperCase()]}),e.jsx(P,{label:"Aggregate",size:"small",sx:{fontWeight:600,background:"linear-gradient(135deg, #7dc244 0%, #139B49 100%)",color:"#ffffff",borderRadius:"8px",px:1}})]}),e.jsxs(r,{className:"aos-fade-right aos-delay-300",sx:{mb:1.5,boxShadow:"none",border:"1px solid rgba(40, 121, 182, 0.2)",borderRadius:"12px !important",overflow:"hidden",transition:"all 0.3s ease",backgroundColor:"#fff","&:hover":{boxShadow:"0 4px 20px rgba(40, 121, 182, 0.15)",transform:"translateY(-2px)"}},children:[e.jsx(r,{className:"gradient-header",sx:{background:"linear-gradient(135deg, #2879b6 0%, #1D9AD4 100%)",color:"#ffffff",borderRadius:"12px 12px 0 0",minHeight:"56px",display:"flex",alignItems:"center",px:2},children:e.jsx(a,{sx:{fontWeight:600,fontSize:"1rem"},children:"Overall Production Summary"})}),e.jsx(r,{sx:{p:3,backgroundColor:"rgba(255, 255, 255, 0.5)"},children:e.jsxs(t,{container:!0,spacing:2,children:[e.jsx(t,{item:!0,xs:12,sm:4,children:e.jsxs(r,{className:"hover-lift",sx:{p:2.5,background:"linear-gradient(135deg, rgba(40, 121, 182, 0.08) 0%, rgba(40, 121, 182, 0.03) 100%)",borderRadius:"12px",borderLeft:"4px solid #2879b6",transition:"all 0.3s ease"},children:[e.jsx(a,{variant:"caption",sx:{color:"#58595B",fontWeight:500},children:"Total Raw Biogas"}),e.jsxs(a,{variant:"h5",sx:{fontWeight:700,color:"#2879b6",mt:.5},children:[i.totalRawBiogas??0," mÂ³"]})]})}),e.jsx(t,{item:!0,xs:12,sm:4,children:e.jsxs(r,{className:"hover-lift",sx:{p:2.5,background:"linear-gradient(135deg, rgba(125, 194, 68, 0.08) 0%, rgba(125, 194, 68, 0.03) 100%)",borderRadius:"12px",borderLeft:"4px solid #7dc244",transition:"all 0.3s ease"},children:[e.jsx(a,{variant:"caption",sx:{color:"#58595B",fontWeight:500},children:"CBG Produced"}),e.jsxs(a,{variant:"h5",sx:{fontWeight:700,color:"#7dc244",mt:.5},children:[i.totalCBGProduced??0," kg"]})]})}),e.jsx(t,{item:!0,xs:12,sm:4,children:e.jsxs(r,{className:"hover-lift",sx:{p:2.5,background:"linear-gradient(135deg, rgba(238, 106, 49, 0.08) 0%, rgba(238, 106, 49, 0.03) 100%)",borderRadius:"12px",borderLeft:"4px solid #ee6a31",transition:"all 0.3s ease"},children:[e.jsx(a,{variant:"caption",sx:{color:"#58595B",fontWeight:500},children:"CBG Sold"}),e.jsxs(a,{variant:"h5",sx:{fontWeight:700,color:"#ee6a31",mt:.5},children:[i.totalCBGSold??0," kg"]})]})})]})})]}),e.jsxs(r,{className:"aos-fade-right aos-delay-400",sx:{mb:1.5,boxShadow:"none",border:"1px solid rgba(125, 194, 68, 0.2)",borderRadius:"12px !important",overflow:"hidden",transition:"all 0.3s ease",backgroundColor:"#fff","&:hover":{boxShadow:"0 4px 20px rgba(125, 194, 68, 0.15)",transform:"translateY(-2px)"}},children:[e.jsx(r,{sx:{background:"linear-gradient(135deg, #7dc244 0%, #139B49 100%)",color:"#ffffff",borderRadius:"12px 12px 0 0",minHeight:"56px",display:"flex",alignItems:"center",px:2},children:e.jsx(a,{sx:{fontWeight:600,fontSize:"1rem"},children:"Fertilizer & Plant Availability"})}),e.jsx(r,{sx:{p:3,backgroundColor:"rgba(255, 255, 255, 0.5)"},children:e.jsxs(t,{container:!0,spacing:2,children:[e.jsx(t,{item:!0,xs:12,sm:4,children:e.jsxs(r,{className:"hover-lift",sx:{p:2.5,background:"linear-gradient(135deg, rgba(40, 121, 182, 0.08) 0%, rgba(40, 121, 182, 0.03) 100%)",borderRadius:"12px",borderLeft:"4px solid #2879b6",transition:"all 0.3s ease"},children:[e.jsx(a,{variant:"caption",sx:{color:"#58595B",fontWeight:500},children:"FOM Produced"}),e.jsxs(a,{variant:"h5",sx:{fontWeight:700,color:"#2879b6",mt:.5},children:[i.totalFOMProduced," kg"]})]})}),e.jsx(t,{item:!0,xs:12,sm:4,children:e.jsxs(r,{className:"hover-lift",sx:{p:2.5,background:"linear-gradient(135deg, rgba(125, 194, 68, 0.08) 0%, rgba(125, 194, 68, 0.03) 100%)",borderRadius:"12px",borderLeft:"4px solid #7dc244",transition:"all 0.3s ease"},children:[e.jsx(a,{variant:"caption",sx:{color:"#58595B",fontWeight:500},children:"Avg Availability"}),e.jsxs(a,{variant:"h5",sx:{fontWeight:700,color:"#7dc244",mt:.5},children:[i.avgPlantAvailability,"%"]})]})}),e.jsx(t,{item:!0,xs:12,sm:4,children:e.jsxs(r,{className:"hover-lift",sx:{p:2.5,background:"linear-gradient(135deg, rgba(238, 106, 49, 0.08) 0%, rgba(238, 106, 49, 0.03) 100%)",borderRadius:"12px",borderLeft:"4px solid #ee6a31",transition:"all 0.3s ease"},children:[e.jsx(a,{variant:"caption",sx:{color:"#58595B",fontWeight:500},children:"FOM Sold"}),e.jsxs(a,{variant:"h5",sx:{fontWeight:700,color:"#ee6a31",mt:.5},children:[i.totalFOMSold," kg"]})]})})]})})]}),e.jsxs(r,{className:"aos-fade-right aos-delay-500",sx:{boxShadow:"none",border:"1px solid rgba(238, 106, 49, 0.2)",borderRadius:"12px !important",overflow:"hidden",transition:"all 0.3s ease",backgroundColor:"#fff","&:hover":{boxShadow:"0 4px 20px rgba(238, 106, 49, 0.15)",transform:"translateY(-2px)"}},children:[e.jsx(r,{sx:{background:"linear-gradient(135deg, #ee6a31 0%, #F59E21 100%)",color:"#ffffff",borderRadius:"12px 12px 0 0",minHeight:"56px",display:"flex",alignItems:"center",px:2},children:e.jsx(a,{sx:{fontWeight:600,fontSize:"1rem"},children:"Utilities & HSE Summary"})}),e.jsx(r,{sx:{p:3,backgroundColor:"rgba(255, 255, 255, 0.5)"},children:e.jsxs(t,{container:!0,spacing:2,children:[e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsxs(r,{className:"hover-lift",sx:{p:2.5,background:"linear-gradient(135deg, rgba(40, 121, 182, 0.08) 0%, rgba(40, 121, 182, 0.03) 100%)",borderRadius:"12px",borderLeft:"4px solid #2879b6",transition:"all 0.3s ease"},children:[e.jsx(a,{variant:"caption",sx:{color:"#58595B",fontWeight:500},children:"Electricity Consumption"}),e.jsxs(a,{variant:"h5",sx:{fontWeight:700,color:"#2879b6",mt:.5},children:[i.totalElectricityConsumption," kWh"]})]})}),e.jsx(t,{item:!0,xs:12,sm:6,children:e.jsxs(r,{className:"hover-lift",sx:{p:2.5,background:"linear-gradient(135deg, rgba(125, 194, 68, 0.08) 0%, rgba(125, 194, 68, 0.03) 100%)",borderRadius:"12px",borderLeft:"4px solid #7dc244",transition:"all 0.3s ease"},children:[e.jsx(a,{variant:"caption",sx:{color:"#58595B",fontWeight:500},children:"HSE Incidents"}),e.jsx(a,{variant:"h5",sx:{fontWeight:700,color:"#7dc244",mt:.5},children:i.totalHSEIncidents})]})})]})})]})]})})]})})}export{J as default};
//# sourceMappingURL=page-BbR5q4Ve.js.map
