import{x as vr,h as pe,y as jr,i as m,z as ks,A as Sr,D as gs,E as Cr,r as a,F as wr,j as e,n as ae,G as ys,H as $t,I as Tr,J as Rr,K as Ir,p as Ae,k as Ne,L as vs,l as Ke,o as _e,s as se,M as Bs,m as Ge,v as Pr,O as Jt,P as js,c as kr,w as Ms,B as M,C as Ee}from"./index-D5WwrTj-.js";import{p as Br,u as Es,B as Qt,c as Ye,q as Mr,T as S,I as ve,r as Er,s as _r,M as Q,t as Wr,S as Fr,v as _s,w as Ws,x as Bt,n as Lr,y as Ot,z as Ar,L as Nr,P as vt,a as $,D as jt}from"./Layout-BXTkXNOz.js";import{C as ye,a as qe,G as w}from"./Grid-CDTwfBGP.js";import{B as J}from"./Button-Dm6J5fh5.js";import{A as Ss,E as Ut,D as pt,F as zr,a as qt}from"./FileDownload-CvIEObuY.js";import{d as I,T as St,a as Ct,b as wt,c as ke,e as Tt}from"./TableRow-D-rGV0Jk.js";import{R as Cs}from"./Refresh-DVh_hkbX.js";import{A as Xe}from"./Alert-CqN-3oq6.js";import{C as ge}from"./Chip-Bs8bSymi.js";import{u as Dr,D as Ht,a as Vt,b as Xt}from"./DialogContent-C2pFBHRZ.js";import{S as Mt}from"./Save-BhuREFE_.js";import"./srel-BMzgRxSF.js";const $r=["ownerState"],Or=["variants"],Ur=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function qr(t){return Object.keys(t).length===0}function Hr(t){return typeof t=="string"&&t.charCodeAt(0)>96}function Kt(t){return t!=="ownerState"&&t!=="theme"&&t!=="sx"&&t!=="as"}function ws(t,r){return r&&t&&typeof t=="object"&&t.styles&&!t.styles.startsWith("@layer")&&(t.styles=`@layer ${r}{${String(t.styles)}}`),t}const Vr=ks(),Xr=t=>t&&t.charAt(0).toLowerCase()+t.slice(1);function Rt({defaultTheme:t,theme:r,themeId:o}){return qr(r)?t:r[o]||r}function Kr(t){return t?(r,o)=>o[t]:null}function kt(t,r,o){let{ownerState:l}=r,c=pe(r,$r);const i=typeof t=="function"?t(m({ownerState:l},c)):t;if(Array.isArray(i))return i.flatMap(y=>kt(y,m({ownerState:l},c),o));if(i&&typeof i=="object"&&Array.isArray(i.variants)){const{variants:y=[]}=i;let p=pe(i,Or);return y.forEach(h=>{let v=!0;if(typeof h.props=="function"?v=h.props(m({ownerState:l},c,l)):Object.keys(h.props).forEach(g=>{l?.[g]!==h.props[g]&&c[g]!==h.props[g]&&(v=!1)}),v){Array.isArray(p)||(p=[p]);const g=typeof h.style=="function"?h.style(m({ownerState:l},c,l)):h.style;p.push(o?ws(gs(g),o):g)}}),p}return o?ws(gs(i),o):i}function Gr(t={}){const{themeId:r,defaultTheme:o=Vr,rootShouldForwardProp:l=Kt,slotShouldForwardProp:c=Kt}=t,i=y=>Cr(m({},y,{theme:Rt(m({},y,{defaultTheme:o,themeId:r}))}));return i.__mui_systemSx=!0,(y,T={})=>{vr(y,j=>j.filter(O=>!(O!=null&&O.__mui_systemSx)));const{name:p,slot:h,skipVariantsResolver:v,skipSx:g,overridesResolver:b=Kr(Xr(h))}=T,d=pe(T,Ur),F=p&&p.startsWith("Mui")||h?"components":"custom",L=v!==void 0?v:h&&h!=="Root"&&h!=="root"||!1,P=g||!1;let u,R=Kt;h==="Root"||h==="root"?R=l:h?R=c:Hr(y)&&(R=void 0);const W=jr(y,m({shouldForwardProp:R,label:u},d)),q=j=>typeof j=="function"&&j.__emotion_real!==j||Sr(j)?O=>{const k=Rt({theme:O.theme,defaultTheme:o,themeId:r});return kt(j,m({},O,{theme:k}),k.modularCssLayers?F:void 0)}:j,A=(j,...O)=>{let k=q(j);const H=O?O.map(q):[];p&&b&&H.push(z=>{const E=Rt(m({},z,{defaultTheme:o,themeId:r}));if(!E.components||!E.components[p]||!E.components[p].styleOverrides)return null;const U=E.components[p].styleOverrides,x={};return Object.entries(U).forEach(([oe,Z])=>{x[oe]=kt(Z,m({},z,{theme:E}),E.modularCssLayers?"theme":void 0)}),b(z,x)}),p&&!L&&H.push(z=>{var E;const U=Rt(m({},z,{defaultTheme:o,themeId:r})),x=U==null||(E=U.components)==null||(E=E[p])==null?void 0:E.variants;return kt({variants:x},m({},z,{theme:U}),U.modularCssLayers?"theme":void 0)}),P||H.push(i);const K=H.length-O.length;if(Array.isArray(j)&&K>0){const z=new Array(K).fill("");k=[...j,...z],k.raw=[...j.raw,...z]}const V=W(k,...H);return y.muiName&&(V.muiName=y.muiName),V};return W.withConfig&&(A.withConfig=W.withConfig),A}}const Yr=Gr();let st;function Fs(){if(st)return st;const t=document.createElement("div"),r=document.createElement("div");return r.style.width="10px",r.style.height="1px",t.appendChild(r),t.dir="rtl",t.style.fontSize="14px",t.style.width="4px",t.style.height="1px",t.style.position="absolute",t.style.top="-1000px",t.style.overflow="scroll",document.body.appendChild(t),st="reverse",t.scrollLeft>0?st="default":(t.scrollLeft=1,t.scrollLeft===0&&(st="negative")),document.body.removeChild(t),st}function Jr(t,r){const o=t.scrollLeft;if(r!=="rtl")return o;switch(Fs()){case"negative":return t.scrollWidth-t.clientWidth+o;case"reverse":return t.scrollWidth-t.clientWidth-o;default:return o}}const Qr=["component","direction","spacing","divider","children","className","useFlexGap"],Zr=ks(),eo=Yr("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,r)=>r.root});function to(t){return Dr({props:t,name:"MuiStack",defaultTheme:Zr})}function so(t,r){const o=a.Children.toArray(t).filter(Boolean);return o.reduce((l,c,i)=>(l.push(c),i<o.length-1&&l.push(a.cloneElement(r,{key:`separator-${i}`})),l),[])}const ro=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],oo=({ownerState:t,theme:r})=>{let o=m({display:"flex",flexDirection:"column"},ys({theme:r},$t({values:t.direction,breakpoints:r.breakpoints.values}),l=>({flexDirection:l})));if(t.spacing){const l=Tr(r),c=Object.keys(r.breakpoints.values).reduce((p,h)=>((typeof t.spacing=="object"&&t.spacing[h]!=null||typeof t.direction=="object"&&t.direction[h]!=null)&&(p[h]=!0),p),{}),i=$t({values:t.direction,base:c}),y=$t({values:t.spacing,base:c});typeof i=="object"&&Object.keys(i).forEach((p,h,v)=>{if(!i[p]){const b=h>0?i[v[h-1]]:"column";i[p]=b}}),o=Rr(o,ys({theme:r},y,(p,h)=>t.useFlexGap?{gap:vs(l,p)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${ro(h?i[h]:t.direction)}`]:vs(l,p)}}))}return o=Ir(r.breakpoints,o),o};function no(t={}){const{createStyledComponent:r=eo,useThemeProps:o=to,componentName:l="MuiStack"}=t,c=()=>Ae({root:["root"]},p=>Ne(l,p),{}),i=r(oo);return a.forwardRef(function(p,h){const v=o(p),g=wr(v),{component:b="div",direction:d="column",spacing:F=0,divider:L,children:P,className:u,useFlexGap:R=!1}=g,W=pe(g,Qr),q={direction:d,spacing:F,useFlexGap:R},A=c();return e.jsx(i,m({as:b,ownerState:q,ref:h,className:ae(A.root,u)},W,{children:L?so(P,L):P}))})}function ao(t){return Ne("PrivateSwitchBase",t)}Ke("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const lo=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],io=t=>{const{classes:r,checked:o,disabled:l,edge:c}=t,i={root:["root",o&&"checked",l&&"disabled",c&&`edge${_e(c)}`],input:["input"]};return Ae(i,ao,r)},co=se(Qt,{name:"MuiSwitchBase"})(({ownerState:t})=>m({padding:9,borderRadius:"50%"},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12})),uo=se("input",{name:"MuiSwitchBase",shouldForwardProp:Bs})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),po=a.forwardRef(function(r,o){const{autoFocus:l,checked:c,checkedIcon:i,className:y,defaultChecked:T,disabled:p,disableFocusRipple:h=!1,edge:v=!1,icon:g,id:b,inputProps:d,inputRef:F,name:L,onBlur:P,onChange:u,onFocus:R,readOnly:W,required:q=!1,tabIndex:A,type:j,value:O}=r,k=pe(r,lo),[H,K]=Br({controlled:c,default:!!T,name:"SwitchBase",state:"checked"}),V=Es(),z=N=>{R&&R(N),V&&V.onFocus&&V.onFocus(N)},E=N=>{P&&P(N),V&&V.onBlur&&V.onBlur(N)},U=N=>{if(N.nativeEvent.defaultPrevented)return;const ne=N.target.checked;K(ne),u&&u(N,ne)};let x=p;V&&typeof x>"u"&&(x=V.disabled);const oe=j==="checkbox"||j==="radio",Z=m({},r,{checked:H,disabled:x,disableFocusRipple:h,edge:v}),de=io(Z);return e.jsxs(co,m({component:"span",className:ae(de.root,y),centerRipple:!0,focusRipple:!h,disabled:x,tabIndex:null,role:void 0,onFocus:z,onBlur:E,ownerState:Z,ref:o},k,{children:[e.jsx(uo,m({autoFocus:l,checked:c,defaultChecked:T,className:de.input,disabled:x,id:oe?b:void 0,name:L,onChange:U,readOnly:W,ref:F,required:q,ownerState:Z,tabIndex:A,type:j},j==="checkbox"&&O===void 0?{}:{value:O},d)),H?i:g]}))}),xo=Ye(e.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),ho=Ye(e.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),mo=Ye(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function fo(t){return Ne("MuiCheckbox",t)}const Gt=Ke("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),bo=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],go=t=>{const{classes:r,indeterminate:o,color:l,size:c}=t,i={root:["root",o&&"indeterminate",`color${_e(l)}`,`size${_e(c)}`]},y=Ae(i,fo,r);return m({},r,y)},yo=se(po,{shouldForwardProp:t=>Bs(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,r)=>{const{ownerState:o}=t;return[r.root,o.indeterminate&&r.indeterminate,r[`size${_e(o.size)}`],o.color!=="default"&&r[`color${_e(o.color)}`]]}})(({theme:t,ownerState:r})=>m({color:(t.vars||t).palette.text.secondary},!r.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${r.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette[r.color].mainChannel} / ${t.vars.palette.action.hoverOpacity})`:Pr.alpha(r.color==="default"?t.palette.action.active:t.palette[r.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},r.color!=="default"&&{[`&.${Gt.checked}, &.${Gt.indeterminate}`]:{color:(t.vars||t).palette[r.color].main},[`&.${Gt.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),vo=e.jsx(ho,{}),jo=e.jsx(xo,{}),So=e.jsx(mo,{}),Me=a.forwardRef(function(r,o){var l,c;const i=Ge({props:r,name:"MuiCheckbox"}),{checkedIcon:y=vo,color:T="primary",icon:p=jo,indeterminate:h=!1,indeterminateIcon:v=So,inputProps:g,size:b="medium",className:d}=i,F=pe(i,bo),L=h?v:p,P=h?v:y,u=m({},i,{color:T,indeterminate:h,size:b}),R=go(u);return e.jsx(yo,m({type:"checkbox",inputProps:m({"data-indeterminate":h},g),icon:a.cloneElement(L,{fontSize:(l=L.props.fontSize)!=null?l:b}),checkedIcon:a.cloneElement(P,{fontSize:(c=P.props.fontSize)!=null?c:b}),ownerState:u,ref:o,className:ae(R.root,d)},F,{classes:R}))}),Co=no({createStyledComponent:se("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,r)=>r.root}),useThemeProps:t=>Ge({props:t,name:"MuiStack"})});function wo(t){return Ne("MuiFormControlLabel",t)}const ct=Ke("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),To=["checked","className","componentsProps","control","disabled","disableTypography","inputRef","label","labelPlacement","name","onChange","required","slotProps","value"],Ro=t=>{const{classes:r,disabled:o,labelPlacement:l,error:c,required:i}=t,y={root:["root",o&&"disabled",`labelPlacement${_e(l)}`,c&&"error",i&&"required"],label:["label",o&&"disabled"],asterisk:["asterisk",c&&"error"]};return Ae(y,wo,r)},Io=se("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(t,r)=>{const{ownerState:o}=t;return[{[`& .${ct.label}`]:r.label},r.root,r[`labelPlacement${_e(o.labelPlacement)}`]]}})(({theme:t,ownerState:r})=>m({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${ct.disabled}`]:{cursor:"default"}},r.labelPlacement==="start"&&{flexDirection:"row-reverse",marginLeft:16,marginRight:-11},r.labelPlacement==="top"&&{flexDirection:"column-reverse",marginLeft:16},r.labelPlacement==="bottom"&&{flexDirection:"column",marginLeft:16},{[`& .${ct.label}`]:{[`&.${ct.disabled}`]:{color:(t.vars||t).palette.text.disabled}}})),Po=se("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(t,r)=>r.asterisk})(({theme:t})=>({[`&.${ct.error}`]:{color:(t.vars||t).palette.error.main}})),dt=a.forwardRef(function(r,o){var l,c;const i=Ge({props:r,name:"MuiFormControlLabel"}),{className:y,componentsProps:T={},control:p,disabled:h,disableTypography:v,label:g,labelPlacement:b="end",required:d,slotProps:F={}}=i,L=pe(i,To),P=Es(),u=(l=h??p.props.disabled)!=null?l:P?.disabled,R=d??p.props.required,W={disabled:u,required:R};["checked","name","onChange","value","inputRef"].forEach(H=>{typeof p.props[H]>"u"&&typeof i[H]<"u"&&(W[H]=i[H])});const q=Mr({props:i,muiFormControl:P,states:["error"]}),A=m({},i,{disabled:u,labelPlacement:b,required:R,error:q.error}),j=Ro(A),O=(c=F.typography)!=null?c:T.typography;let k=g;return k!=null&&k.type!==S&&!v&&(k=e.jsx(S,m({component:"span"},O,{className:ae(j.label,O?.className),children:k}))),e.jsxs(Io,m({className:ae(j.root,y),ownerState:A,ref:o},L,{children:[a.cloneElement(p,W),R?e.jsxs(Co,{display:"block",children:[k,e.jsxs(Po,{ownerState:A,"aria-hidden":!0,className:j.asterisk,children:[" ","*"]})]}):k]}))}),ko=Ye(e.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Bo=Ye(e.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage");function Mo(t){return Ne("MuiTab",t)}const Le=Ke("MuiTab",["root","labelIcon","textColorInherit","textColorPrimary","textColorSecondary","selected","disabled","fullWidth","wrapped","iconWrapper"]),Eo=["className","disabled","disableFocusRipple","fullWidth","icon","iconPosition","indicator","label","onChange","onClick","onFocus","selected","selectionFollowsFocus","textColor","value","wrapped"],_o=t=>{const{classes:r,textColor:o,fullWidth:l,wrapped:c,icon:i,label:y,selected:T,disabled:p}=t,h={root:["root",i&&y&&"labelIcon",`textColor${_e(o)}`,l&&"fullWidth",c&&"wrapped",T&&"selected",p&&"disabled"],iconWrapper:["iconWrapper"]};return Ae(h,Mo,r)},Wo=se(Qt,{name:"MuiTab",slot:"Root",overridesResolver:(t,r)=>{const{ownerState:o}=t;return[r.root,o.label&&o.icon&&r.labelIcon,r[`textColor${_e(o.textColor)}`],o.fullWidth&&r.fullWidth,o.wrapped&&r.wrapped,{[`& .${Le.iconWrapper}`]:r.iconWrapper}]}})(({theme:t,ownerState:r})=>m({},t.typography.button,{maxWidth:360,minWidth:90,position:"relative",minHeight:48,flexShrink:0,padding:"12px 16px",overflow:"hidden",whiteSpace:"normal",textAlign:"center"},r.label&&{flexDirection:r.iconPosition==="top"||r.iconPosition==="bottom"?"column":"row"},{lineHeight:1.25},r.icon&&r.label&&{minHeight:72,paddingTop:9,paddingBottom:9,[`& > .${Le.iconWrapper}`]:m({},r.iconPosition==="top"&&{marginBottom:6},r.iconPosition==="bottom"&&{marginTop:6},r.iconPosition==="start"&&{marginRight:t.spacing(1)},r.iconPosition==="end"&&{marginLeft:t.spacing(1)})},r.textColor==="inherit"&&{color:"inherit",opacity:.6,[`&.${Le.selected}`]:{opacity:1},[`&.${Le.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},r.textColor==="primary"&&{color:(t.vars||t).palette.text.secondary,[`&.${Le.selected}`]:{color:(t.vars||t).palette.primary.main},[`&.${Le.disabled}`]:{color:(t.vars||t).palette.text.disabled}},r.textColor==="secondary"&&{color:(t.vars||t).palette.text.secondary,[`&.${Le.selected}`]:{color:(t.vars||t).palette.secondary.main},[`&.${Le.disabled}`]:{color:(t.vars||t).palette.text.disabled}},r.fullWidth&&{flexShrink:1,flexGrow:1,flexBasis:0,maxWidth:"none"},r.wrapped&&{fontSize:t.typography.pxToRem(12)})),He=a.forwardRef(function(r,o){const l=Ge({props:r,name:"MuiTab"}),{className:c,disabled:i=!1,disableFocusRipple:y=!1,fullWidth:T,icon:p,iconPosition:h="top",indicator:v,label:g,onChange:b,onClick:d,onFocus:F,selected:L,selectionFollowsFocus:P,textColor:u="inherit",value:R,wrapped:W=!1}=l,q=pe(l,Eo),A=m({},l,{disabled:i,disableFocusRipple:y,selected:L,icon:!!p,iconPosition:h,label:!!g,fullWidth:T,textColor:u,wrapped:W}),j=_o(A),O=p&&g&&a.isValidElement(p)?a.cloneElement(p,{className:ae(j.iconWrapper,p.props.className)}):p,k=K=>{!L&&b&&b(K,R),d&&d(K)},H=K=>{P&&!L&&b&&b(K,R),F&&F(K)};return e.jsxs(Wo,m({focusRipple:!y,className:ae(j.root,c),ref:o,role:"tab","aria-selected":L,disabled:i,onClick:k,onFocus:H,ownerState:A,tabIndex:L?0:-1},q,{children:[h==="top"||h==="start"?e.jsxs(a.Fragment,{children:[O,g]}):e.jsxs(a.Fragment,{children:[g,O]}),v]}))}),Ls=Ye(e.jsx("path",{d:"M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"}),"KeyboardArrowLeft"),As=Ye(e.jsx("path",{d:"M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"}),"KeyboardArrowRight"),Fo=["backIconButtonProps","count","disabled","getItemAriaLabel","nextIconButtonProps","onPageChange","page","rowsPerPage","showFirstButton","showLastButton","slots","slotProps"],Lo=a.forwardRef(function(r,o){var l,c,i,y,T,p,h,v;const{backIconButtonProps:g,count:b,disabled:d=!1,getItemAriaLabel:F,nextIconButtonProps:L,onPageChange:P,page:u,rowsPerPage:R,showFirstButton:W,showLastButton:q,slots:A={},slotProps:j={}}=r,O=pe(r,Fo),k=Jt(),H=ie=>{P(ie,0)},K=ie=>{P(ie,u-1)},V=ie=>{P(ie,u+1)},z=ie=>{P(ie,Math.max(0,Math.ceil(b/R)-1))},E=(l=A.firstButton)!=null?l:ve,U=(c=A.lastButton)!=null?c:ve,x=(i=A.nextButton)!=null?i:ve,oe=(y=A.previousButton)!=null?y:ve,Z=(T=A.firstButtonIcon)!=null?T:ko,de=(p=A.lastButtonIcon)!=null?p:Bo,N=(h=A.nextButtonIcon)!=null?h:As,ne=(v=A.previousButtonIcon)!=null?v:Ls,ue=k?U:E,ze=k?x:oe,De=k?oe:x,Ce=k?E:U,$e=k?j.lastButton:j.firstButton,le=k?j.nextButton:j.previousButton,we=k?j.previousButton:j.nextButton,Te=k?j.firstButton:j.lastButton;return e.jsxs("div",m({ref:o},O,{children:[W&&e.jsx(ue,m({onClick:H,disabled:d||u===0,"aria-label":F("first",u),title:F("first",u)},$e,{children:k?e.jsx(de,m({},j.lastButtonIcon)):e.jsx(Z,m({},j.firstButtonIcon))})),e.jsx(ze,m({onClick:K,disabled:d||u===0,color:"inherit","aria-label":F("previous",u),title:F("previous",u)},le??g,{children:k?e.jsx(N,m({},j.nextButtonIcon)):e.jsx(ne,m({},j.previousButtonIcon))})),e.jsx(De,m({onClick:V,disabled:d||(b!==-1?u>=Math.ceil(b/R)-1:!1),color:"inherit","aria-label":F("next",u),title:F("next",u)},we??L,{children:k?e.jsx(ne,m({},j.previousButtonIcon)):e.jsx(N,m({},j.nextButtonIcon))})),q&&e.jsx(Ce,m({onClick:z,disabled:d||u>=Math.ceil(b/R)-1,"aria-label":F("last",u),title:F("last",u)},Te,{children:k?e.jsx(Z,m({},j.firstButtonIcon)):e.jsx(de,m({},j.lastButtonIcon))}))]}))});function Ao(t){return Ne("MuiTablePagination",t)}const ut=Ke("MuiTablePagination",["root","toolbar","spacer","selectLabel","selectRoot","select","selectIcon","input","menuItem","displayedRows","actions"]);var Ts;const No=["ActionsComponent","backIconButtonProps","className","colSpan","component","count","disabled","getItemAriaLabel","labelDisplayedRows","labelRowsPerPage","nextIconButtonProps","onPageChange","onRowsPerPageChange","page","rowsPerPage","rowsPerPageOptions","SelectProps","showFirstButton","showLastButton","slotProps","slots"],zo=se(I,{name:"MuiTablePagination",slot:"Root",overridesResolver:(t,r)=>r.root})(({theme:t})=>({overflow:"auto",color:(t.vars||t).palette.text.primary,fontSize:t.typography.pxToRem(14),"&:last-child":{padding:0}})),Do=se(Wr,{name:"MuiTablePagination",slot:"Toolbar",overridesResolver:(t,r)=>m({[`& .${ut.actions}`]:r.actions},r.toolbar)})(({theme:t})=>({minHeight:52,paddingRight:2,[`${t.breakpoints.up("xs")} and (orientation: landscape)`]:{minHeight:52},[t.breakpoints.up("sm")]:{minHeight:52,paddingRight:2},[`& .${ut.actions}`]:{flexShrink:0,marginLeft:20}})),$o=se("div",{name:"MuiTablePagination",slot:"Spacer",overridesResolver:(t,r)=>r.spacer})({flex:"1 1 100%"}),Oo=se("p",{name:"MuiTablePagination",slot:"SelectLabel",overridesResolver:(t,r)=>r.selectLabel})(({theme:t})=>m({},t.typography.body2,{flexShrink:0})),Uo=se(Fr,{name:"MuiTablePagination",slot:"Select",overridesResolver:(t,r)=>m({[`& .${ut.selectIcon}`]:r.selectIcon,[`& .${ut.select}`]:r.select},r.input,r.selectRoot)})({color:"inherit",fontSize:"inherit",flexShrink:0,marginRight:32,marginLeft:8,[`& .${ut.select}`]:{paddingLeft:8,paddingRight:24,textAlign:"right",textAlignLast:"right"}}),qo=se(Q,{name:"MuiTablePagination",slot:"MenuItem",overridesResolver:(t,r)=>r.menuItem})({}),Ho=se("p",{name:"MuiTablePagination",slot:"DisplayedRows",overridesResolver:(t,r)=>r.displayedRows})(({theme:t})=>m({},t.typography.body2,{flexShrink:0}));function Vo({from:t,to:r,count:o}){return`${t}–${r} of ${o!==-1?o:`more than ${r}`}`}function Xo(t){return`Go to ${t} page`}const Ko=t=>{const{classes:r}=t;return Ae({root:["root"],toolbar:["toolbar"],spacer:["spacer"],selectLabel:["selectLabel"],select:["select"],input:["input"],selectIcon:["selectIcon"],menuItem:["menuItem"],displayedRows:["displayedRows"],actions:["actions"]},Ao,r)},Go=a.forwardRef(function(r,o){var l;const c=Ge({props:r,name:"MuiTablePagination"}),{ActionsComponent:i=Lo,backIconButtonProps:y,className:T,colSpan:p,component:h=I,count:v,disabled:g=!1,getItemAriaLabel:b=Xo,labelDisplayedRows:d=Vo,labelRowsPerPage:F="Rows per page:",nextIconButtonProps:L,onPageChange:P,onRowsPerPageChange:u,page:R,rowsPerPage:W,rowsPerPageOptions:q=[10,25,50,100],SelectProps:A={},showFirstButton:j=!1,showLastButton:O=!1,slotProps:k={},slots:H={}}=c,K=pe(c,No),V=c,z=Ko(V),E=(l=k?.select)!=null?l:A,U=E.native?"option":qo;let x;(h===I||h==="td")&&(x=p||1e3);const oe=js(E.id),Z=js(E.labelId),de=()=>v===-1?(R+1)*W:W===-1?v:Math.min(v,(R+1)*W);return e.jsx(zo,m({colSpan:x,ref:o,as:h,ownerState:V,className:ae(z.root,T)},K,{children:e.jsxs(Do,{className:z.toolbar,children:[e.jsx($o,{className:z.spacer}),q.length>1&&e.jsx(Oo,{className:z.selectLabel,id:Z,children:F}),q.length>1&&e.jsx(Uo,m({variant:"standard"},!E.variant&&{input:Ts||(Ts=e.jsx(Er,{}))},{value:W,onChange:u,id:oe,labelId:Z},E,{classes:m({},E.classes,{root:ae(z.input,z.selectRoot,(E.classes||{}).root),select:ae(z.select,(E.classes||{}).select),icon:ae(z.selectIcon,(E.classes||{}).icon)}),disabled:g,children:q.map(N=>a.createElement(U,m({},!_r(U)&&{ownerState:V},{className:z.menuItem,key:N.label?N.label:N,value:N.value?N.value:N}),N.label?N.label:N))})),e.jsx(Ho,{className:z.displayedRows,children:d({from:v===0?0:R*W+1,to:de(),count:v===-1?-1:v,page:R})}),e.jsx(i,{className:z.actions,backIconButtonProps:y,count:v,nextIconButtonProps:L,onPageChange:P,page:R,rowsPerPage:W,showFirstButton:j,showLastButton:O,slotProps:k.actions,slots:H.actions,getItemAriaLabel:b,disabled:g})]})}))});function Yo(t){return(1+Math.sin(Math.PI*t-Math.PI/2))/2}function Jo(t,r,o,l={},c=()=>{}){const{ease:i=Yo,duration:y=300}=l;let T=null;const p=r[t];let h=!1;const v=()=>{h=!0},g=b=>{if(h){c(new Error("Animation cancelled"));return}T===null&&(T=b);const d=Math.min(1,(b-T)/y);if(r[t]=i(d)*(o-p)+p,d>=1){requestAnimationFrame(()=>{c(null)});return}requestAnimationFrame(g)};return p===o?(c(new Error("Element already at target position")),v):(requestAnimationFrame(g),v)}const Qo=["onChange"],Zo={width:99,height:99,position:"absolute",top:-9999,overflow:"scroll"};function en(t){const{onChange:r}=t,o=pe(t,Qo),l=a.useRef(),c=a.useRef(null),i=()=>{l.current=c.current.offsetHeight-c.current.clientHeight};return kr(()=>{const y=_s(()=>{const p=l.current;i(),p!==l.current&&r(l.current)}),T=Ws(c.current);return T.addEventListener("resize",y),()=>{y.clear(),T.removeEventListener("resize",y)}},[r]),a.useEffect(()=>{i(),r(l.current)},[r]),e.jsx("div",m({style:Zo},o,{ref:c}))}function tn(t){return Ne("MuiTabScrollButton",t)}const sn=Ke("MuiTabScrollButton",["root","vertical","horizontal","disabled"]),rn=["className","slots","slotProps","direction","orientation","disabled"],on=t=>{const{classes:r,orientation:o,disabled:l}=t;return Ae({root:["root",o,l&&"disabled"]},tn,r)},nn=se(Qt,{name:"MuiTabScrollButton",slot:"Root",overridesResolver:(t,r)=>{const{ownerState:o}=t;return[r.root,o.orientation&&r[o.orientation]]}})(({ownerState:t})=>m({width:40,flexShrink:0,opacity:.8,[`&.${sn.disabled}`]:{opacity:0}},t.orientation==="vertical"&&{width:"100%",height:40,"& svg":{transform:`rotate(${t.isRtl?-90:90}deg)`}})),an=a.forwardRef(function(r,o){var l,c;const i=Ge({props:r,name:"MuiTabScrollButton"}),{className:y,slots:T={},slotProps:p={},direction:h}=i,v=pe(i,rn),g=Jt(),b=m({isRtl:g},i),d=on(b),F=(l=T.StartScrollButtonIcon)!=null?l:Ls,L=(c=T.EndScrollButtonIcon)!=null?c:As,P=Bt({elementType:F,externalSlotProps:p.startScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:b}),u=Bt({elementType:L,externalSlotProps:p.endScrollButtonIcon,additionalProps:{fontSize:"small"},ownerState:b});return e.jsx(nn,m({component:"div",className:ae(d.root,y),ref:o,role:null,ownerState:b,tabIndex:null},v,{children:h==="left"?e.jsx(F,m({},P)):e.jsx(L,m({},u))}))});function ln(t){return Ne("MuiTabs",t)}const Yt=Ke("MuiTabs",["root","vertical","flexContainer","flexContainerVertical","centered","scroller","fixed","scrollableX","scrollableY","hideScrollbar","scrollButtons","scrollButtonsHideMobile","indicator"]),cn=["aria-label","aria-labelledby","action","centered","children","className","component","allowScrollButtonsMobile","indicatorColor","onChange","orientation","ScrollButtonComponent","scrollButtons","selectionFollowsFocus","slots","slotProps","TabIndicatorProps","TabScrollButtonProps","textColor","value","variant","visibleScrollbar"],Rs=(t,r)=>t===r?t.firstChild:r&&r.nextElementSibling?r.nextElementSibling:t.firstChild,Is=(t,r)=>t===r?t.lastChild:r&&r.previousElementSibling?r.previousElementSibling:t.lastChild,It=(t,r,o)=>{let l=!1,c=o(t,r);for(;c;){if(c===t.firstChild){if(l)return;l=!0}const i=c.disabled||c.getAttribute("aria-disabled")==="true";if(!c.hasAttribute("tabindex")||i)c=o(t,c);else{c.focus();return}}},dn=t=>{const{vertical:r,fixed:o,hideScrollbar:l,scrollableX:c,scrollableY:i,centered:y,scrollButtonsHideMobile:T,classes:p}=t;return Ae({root:["root",r&&"vertical"],scroller:["scroller",o&&"fixed",l&&"hideScrollbar",c&&"scrollableX",i&&"scrollableY"],flexContainer:["flexContainer",r&&"flexContainerVertical",y&&"centered"],indicator:["indicator"],scrollButtons:["scrollButtons",T&&"scrollButtonsHideMobile"],scrollableX:[c&&"scrollableX"],hideScrollbar:[l&&"hideScrollbar"]},ln,p)},un=se("div",{name:"MuiTabs",slot:"Root",overridesResolver:(t,r)=>{const{ownerState:o}=t;return[{[`& .${Yt.scrollButtons}`]:r.scrollButtons},{[`& .${Yt.scrollButtons}`]:o.scrollButtonsHideMobile&&r.scrollButtonsHideMobile},r.root,o.vertical&&r.vertical]}})(({ownerState:t,theme:r})=>m({overflow:"hidden",minHeight:48,WebkitOverflowScrolling:"touch",display:"flex"},t.vertical&&{flexDirection:"column"},t.scrollButtonsHideMobile&&{[`& .${Yt.scrollButtons}`]:{[r.breakpoints.down("sm")]:{display:"none"}}})),pn=se("div",{name:"MuiTabs",slot:"Scroller",overridesResolver:(t,r)=>{const{ownerState:o}=t;return[r.scroller,o.fixed&&r.fixed,o.hideScrollbar&&r.hideScrollbar,o.scrollableX&&r.scrollableX,o.scrollableY&&r.scrollableY]}})(({ownerState:t})=>m({position:"relative",display:"inline-block",flex:"1 1 auto",whiteSpace:"nowrap"},t.fixed&&{overflowX:"hidden",width:"100%"},t.hideScrollbar&&{scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}},t.scrollableX&&{overflowX:"auto",overflowY:"hidden"},t.scrollableY&&{overflowY:"auto",overflowX:"hidden"})),xn=se("div",{name:"MuiTabs",slot:"FlexContainer",overridesResolver:(t,r)=>{const{ownerState:o}=t;return[r.flexContainer,o.vertical&&r.flexContainerVertical,o.centered&&r.centered]}})(({ownerState:t})=>m({display:"flex"},t.vertical&&{flexDirection:"column"},t.centered&&{justifyContent:"center"})),hn=se("span",{name:"MuiTabs",slot:"Indicator",overridesResolver:(t,r)=>r.indicator})(({ownerState:t,theme:r})=>m({position:"absolute",height:2,bottom:0,width:"100%",transition:r.transitions.create()},t.indicatorColor==="primary"&&{backgroundColor:(r.vars||r).palette.primary.main},t.indicatorColor==="secondary"&&{backgroundColor:(r.vars||r).palette.secondary.main},t.vertical&&{height:"100%",width:2,right:0})),mn=se(en)({overflowX:"auto",overflowY:"hidden",scrollbarWidth:"none","&::-webkit-scrollbar":{display:"none"}}),Ps={},fn=a.forwardRef(function(r,o){const l=Ge({props:r,name:"MuiTabs"}),c=Lr(),i=Jt(),{"aria-label":y,"aria-labelledby":T,action:p,centered:h=!1,children:v,className:g,component:b="div",allowScrollButtonsMobile:d=!1,indicatorColor:F="primary",onChange:L,orientation:P="horizontal",ScrollButtonComponent:u=an,scrollButtons:R="auto",selectionFollowsFocus:W,slots:q={},slotProps:A={},TabIndicatorProps:j={},TabScrollButtonProps:O={},textColor:k="primary",value:H,variant:K="standard",visibleScrollbar:V=!1}=l,z=pe(l,cn),E=K==="scrollable",U=P==="vertical",x=U?"scrollTop":"scrollLeft",oe=U?"top":"left",Z=U?"bottom":"right",de=U?"clientHeight":"clientWidth",N=U?"height":"width",ne=m({},l,{component:b,allowScrollButtonsMobile:d,indicatorColor:F,orientation:P,vertical:U,scrollButtons:R,textColor:k,variant:K,visibleScrollbar:V,fixed:!E,hideScrollbar:E&&!V,scrollableX:E&&!U,scrollableY:E&&U,centered:h&&!E,scrollButtonsHideMobile:!d}),ue=dn(ne),ze=Bt({elementType:q.StartScrollButtonIcon,externalSlotProps:A.startScrollButtonIcon,ownerState:ne}),De=Bt({elementType:q.EndScrollButtonIcon,externalSlotProps:A.endScrollButtonIcon,ownerState:ne}),[Ce,$e]=a.useState(!1),[le,we]=a.useState(Ps),[Te,ie]=a.useState(!1),[Je,rt]=a.useState(!1),[xt,ht]=a.useState(!1),[mt,ft]=a.useState({overflow:"hidden",scrollbarWidth:0}),Qe=new Map,xe=a.useRef(null),Re=a.useRef(null),ot=()=>{const f=xe.current;let C;if(f){const _=f.getBoundingClientRect();C={clientWidth:f.clientWidth,scrollLeft:f.scrollLeft,scrollTop:f.scrollTop,scrollLeftNormalized:Jr(f,i?"rtl":"ltr"),scrollWidth:f.scrollWidth,top:_.top,bottom:_.bottom,left:_.left,right:_.right}}let D;if(f&&H!==!1){const _=Re.current.children;if(_.length>0){const G=_[Qe.get(H)];D=G?G.getBoundingClientRect():null}}return{tabsMeta:C,tabMeta:D}},je=Ot(()=>{const{tabsMeta:f,tabMeta:C}=ot();let D=0,_;if(U)_="top",C&&f&&(D=C.top-f.top+f.scrollTop);else if(_=i?"right":"left",C&&f){const re=i?f.scrollLeftNormalized+f.clientWidth-f.scrollWidth:f.scrollLeft;D=(i?-1:1)*(C[_]-f[_]+re)}const G={[_]:D,[N]:C?C[N]:0};if(isNaN(le[_])||isNaN(le[N]))we(G);else{const re=Math.abs(le[_]-G[_]),ce=Math.abs(le[N]-G[N]);(re>=1||ce>=1)&&we(G)}}),Oe=(f,{animation:C=!0}={})=>{C?Jo(x,xe.current,f,{duration:c.transitions.duration.standard}):xe.current[x]=f},Ze=f=>{let C=xe.current[x];U?C+=f:(C+=f*(i?-1:1),C*=i&&Fs()==="reverse"?-1:1),Oe(C)},We=()=>{const f=xe.current[de];let C=0;const D=Array.from(Re.current.children);for(let _=0;_<D.length;_+=1){const G=D[_];if(C+G[de]>f){_===0&&(C=f);break}C+=G[de]}return C},et=()=>{Ze(-1*We())},Et=()=>{Ze(We())},es=a.useCallback(f=>{ft({overflow:null,scrollbarWidth:f})},[]),_t=()=>{const f={};f.scrollbarSizeListener=E?e.jsx(mn,{onChange:es,className:ae(ue.scrollableX,ue.hideScrollbar)}):null;const D=E&&(R==="auto"&&(Te||Je)||R===!0);return f.scrollButtonStart=D?e.jsx(u,m({slots:{StartScrollButtonIcon:q.StartScrollButtonIcon},slotProps:{startScrollButtonIcon:ze},orientation:P,direction:i?"right":"left",onClick:et,disabled:!Te},O,{className:ae(ue.scrollButtons,O.className)})):null,f.scrollButtonEnd=D?e.jsx(u,m({slots:{EndScrollButtonIcon:q.EndScrollButtonIcon},slotProps:{endScrollButtonIcon:De},orientation:P,direction:i?"left":"right",onClick:Et,disabled:!Je},O,{className:ae(ue.scrollButtons,O.className)})):null,f},he=Ot(f=>{const{tabsMeta:C,tabMeta:D}=ot();if(!(!D||!C)){if(D[oe]<C[oe]){const _=C[x]+(D[oe]-C[oe]);Oe(_,{animation:f})}else if(D[Z]>C[Z]){const _=C[x]+(D[Z]-C[Z]);Oe(_,{animation:f})}}}),Ie=Ot(()=>{E&&R!==!1&&ht(!xt)});a.useEffect(()=>{const f=_s(()=>{xe.current&&je()});let C;const D=re=>{re.forEach(ce=>{ce.removedNodes.forEach(Pe=>{var me;(me=C)==null||me.unobserve(Pe)}),ce.addedNodes.forEach(Pe=>{var me;(me=C)==null||me.observe(Pe)})}),f(),Ie()},_=Ws(xe.current);_.addEventListener("resize",f);let G;return typeof ResizeObserver<"u"&&(C=new ResizeObserver(f),Array.from(Re.current.children).forEach(re=>{C.observe(re)})),typeof MutationObserver<"u"&&(G=new MutationObserver(D),G.observe(Re.current,{childList:!0})),()=>{var re,ce;f.clear(),_.removeEventListener("resize",f),(re=G)==null||re.disconnect(),(ce=C)==null||ce.disconnect()}},[je,Ie]),a.useEffect(()=>{const f=Array.from(Re.current.children),C=f.length;if(typeof IntersectionObserver<"u"&&C>0&&E&&R!==!1){const D=f[0],_=f[C-1],G={root:xe.current,threshold:.99},re=fe=>{ie(!fe[0].isIntersecting)},ce=new IntersectionObserver(re,G);ce.observe(D);const Pe=fe=>{rt(!fe[0].isIntersecting)},me=new IntersectionObserver(Pe,G);return me.observe(_),()=>{ce.disconnect(),me.disconnect()}}},[E,R,xt,v?.length]),a.useEffect(()=>{$e(!0)},[]),a.useEffect(()=>{je()}),a.useEffect(()=>{he(Ps!==le)},[he,le]),a.useImperativeHandle(p,()=>({updateIndicator:je,updateScrollButtons:Ie}),[je,Ie]);const tt=e.jsx(hn,m({},j,{className:ae(ue.indicator,j.className),ownerState:ne,style:m({},le,j.style)}));let Fe=0;const nt=a.Children.map(v,f=>{if(!a.isValidElement(f))return null;const C=f.props.value===void 0?Fe:f.props.value;Qe.set(C,Fe);const D=C===H;return Fe+=1,a.cloneElement(f,m({fullWidth:K==="fullWidth",indicator:D&&!Ce&&tt,selected:D,selectionFollowsFocus:W,onChange:L,textColor:k,value:C},Fe===1&&H===!1&&!f.props.tabIndex?{tabIndex:0}:{}))}),at=f=>{const C=Re.current,D=Ar(C).activeElement;if(D.getAttribute("role")!=="tab")return;let G=P==="horizontal"?"ArrowLeft":"ArrowUp",re=P==="horizontal"?"ArrowRight":"ArrowDown";switch(P==="horizontal"&&i&&(G="ArrowRight",re="ArrowLeft"),f.key){case G:f.preventDefault(),It(C,D,Is);break;case re:f.preventDefault(),It(C,D,Rs);break;case"Home":f.preventDefault(),It(C,null,Rs);break;case"End":f.preventDefault(),It(C,null,Is);break}},Ue=_t();return e.jsxs(un,m({className:ae(ue.root,g),ownerState:ne,ref:o,as:b},z,{children:[Ue.scrollButtonStart,Ue.scrollbarSizeListener,e.jsxs(pn,{className:ue.scroller,ownerState:ne,style:{overflow:mt.overflow,[U?`margin${i?"Left":"Right"}`:"marginBottom"]:V?void 0:-mt.scrollbarWidth},ref:xe,children:[e.jsx(xn,{"aria-label":y,"aria-labelledby":T,"aria-orientation":P==="vertical"?"vertical":null,className:ue.flexContainer,ownerState:ne,onKeyDown:at,ref:Re,role:"tablist",children:nt}),Ce&&tt]}),Ue.scrollButtonEnd]}))}),Ns="http://localhost:5001/api".replace(/\/?$/,""),Y=Ms.create({baseURL:Ns+"/admin"}),Zt=Ms.create({baseURL:Ns});Zt.interceptors.request.use(t=>{const r=localStorage.getItem("token");return r&&(t.headers.Authorization=`Bearer ${r}`),t});Zt.interceptors.response.use(t=>t,t=>(t.response?.status===401&&(localStorage.removeItem("token"),window.location.pathname.includes("/login")||(window.location.href="/login")),Promise.reject(t)));Y.interceptors.request.use(t=>{const r=localStorage.getItem("token");return r&&(t.headers.Authorization=`Bearer ${r}`),t});Y.interceptors.response.use(t=>t,t=>(t.response?.status===401&&(localStorage.removeItem("token"),window.location.pathname.includes("/login")||(window.location.href="/login")),Promise.reject(t)));const ee={getFormConfig:async()=>(await Zt.get("/mis/form-config")).data,getUsers:async()=>(await Y.get("/users")).data,createUser:async t=>(await Y.post("/users",t)).data,updateUser:async(t,r)=>(await Y.put(`/users/${t}`,r)).data,deleteUser:async t=>(await Y.delete(`/users/${t}`)).data,getRoles:async()=>(await Y.get("/roles")).data,assignPermissions:async t=>(await Y.post("/roles/assign-permissions",t)).data,getAuditLogs:async t=>(await Y.get("/audit-logs",{params:t})).data,getSessions:async t=>(await Y.get("/sessions",{params:t})).data,getTemplates:async()=>(await Y.get("/email-templates")).data,createTemplate:async t=>(await Y.post("/email-templates",t)).data,updateTemplate:async(t,r)=>(await Y.put(`/email-templates/${t}`,r)).data,deleteTemplate:async t=>(await Y.delete(`/email-templates/${t}`)).data,getSchedulers:async()=>(await Y.get("/schedulers")).data,createScheduler:async t=>(await Y.post("/schedulers",t)).data,getSMTPConfig:async()=>(await Y.get("/smtp-config")).data,createSMTPConfig:async t=>(await Y.post("/smtp-config",t)).data,updateSMTPConfig:async(t,r)=>(await Y.put(`/smtp-config/${t}`,r)).data,testSMTPConfig:async t=>(await Y.post("/smtp-config/test",t)).data,getMISEmailConfig:async()=>(await Y.get("/mis-email-config")).data,saveMISEmailConfig:async t=>(await Y.put("/mis-email-config",t)).data,getFinalMISReportConfig:async()=>(await Y.get("/final-mis-report-config")).data,saveFinalMISReportConfig:async t=>(await Y.put("/final-mis-report-config",t)).data,sendTestFinalMISReport:async(t,r)=>(await Y.post("/final-mis-report-config/send-test",{startDate:t,endDate:r})).data};function Ve(t){const{children:r,value:o,index:l,...c}=t;return e.jsx("div",{hidden:o!==l,...c,children:o===l&&e.jsx(M,{sx:{pt:3},children:r})})}function bn({formConfig:t,message:r,setMessage:o}){const[l,c]=a.useState([]),[i,y]=a.useState([]),[T,p]=a.useState(""),[h,v]=a.useState(""),[g,b]=a.useState(!1);a.useEffect(()=>{const u=t?.mis_email_config;u&&(c(Array.isArray(u.submit_notify_emails)?u.submit_notify_emails:[]),y(Array.isArray(u.entry_not_created_emails)?u.entry_not_created_emails:[]))},[t?.mis_email_config]);const d=()=>{ee.getMISEmailConfig().then(u=>{u&&(c(Array.isArray(u.submit_notify_emails)?u.submit_notify_emails:[]),y(Array.isArray(u.entry_not_created_emails)?u.entry_not_created_emails:[]))}).catch(()=>{})};a.useEffect(()=>{d()},[]);const F=async()=>{b(!0),o(null);try{await ee.saveMISEmailConfig({submit_notify_emails:l,entry_not_created_emails:i}),o({type:"success",text:"MIS Entry email settings saved."})}catch(u){o({type:"error",text:u?.response?.data?.message||"Failed to save."})}finally{b(!1)}},L=(u,R)=>{const W=R.trim().toLowerCase();W&&(u==="submit"?(l.includes(W)||c([...l,W]),p("")):(i.includes(W)||y([...i,W]),v("")))},P=(u,R)=>{u==="submit"?c(l.filter(W=>W!==R)):y(i.filter(W=>W!==R))};return e.jsxs(M,{children:[e.jsx(S,{variant:"h6",sx:{fontWeight:600,color:"#333842",mb:2},children:"MIS Entry – Email Recipients"}),e.jsx(S,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Configure who receives emails when an MIS entry is submitted, and who is notified when no entry is created for the day (checked at the scheduled time in Scheduler Configuration)."}),r&&e.jsx(Xe,{severity:r.type,onClose:()=>o(null),sx:{mb:2},children:r.text}),e.jsxs(w,{container:!0,spacing:3,children:[e.jsx(w,{item:!0,xs:12,md:6,children:e.jsxs(ye,{variant:"outlined",sx:{p:2,borderRadius:2},children:[e.jsx(S,{variant:"subtitle1",fontWeight:600,sx:{mb:1,color:"#2879b6"},children:"When an MIS entry is submitted – send to:"}),e.jsxs(M,{sx:{display:"flex",gap:1,mb:1},children:[e.jsx($,{size:"small",fullWidth:!0,placeholder:"email@example.com",value:T,onChange:u=>p(u.target.value),onKeyDown:u=>u.key==="Enter"&&L("submit",T),sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}}),e.jsx(J,{variant:"contained",onClick:()=>L("submit",T),sx:{borderRadius:"12px",whiteSpace:"nowrap"},children:"Add"})]}),e.jsxs(M,{component:"ul",sx:{m:0,pl:2.5},children:[l.map(u=>e.jsxs("li",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[e.jsx(S,{variant:"body2",children:u}),e.jsx(ve,{size:"small",onClick:()=>P("submit",u),sx:{color:"#ee6a31",p:.25},children:e.jsx(pt,{fontSize:"small"})})]},u)),l.length===0&&e.jsx(S,{variant:"body2",color:"text.secondary",children:"No emails. Add above or leave empty to use Manager/Admin users."})]})]})}),e.jsx(w,{item:!0,xs:12,md:6,children:e.jsxs(ye,{variant:"outlined",sx:{p:2,borderRadius:2},children:[e.jsx(S,{variant:"subtitle1",fontWeight:600,sx:{mb:1,color:"#2879b6"},children:"If no entry created for the day (at scheduled time) – send to:"}),e.jsxs(M,{sx:{display:"flex",gap:1,mb:1},children:[e.jsx($,{size:"small",fullWidth:!0,placeholder:"email@example.com",value:h,onChange:u=>v(u.target.value),onKeyDown:u=>u.key==="Enter"&&L("noEntry",h),sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}}),e.jsx(J,{variant:"contained",onClick:()=>L("noEntry",h),sx:{borderRadius:"12px",whiteSpace:"nowrap"},children:"Add"})]}),e.jsxs(M,{component:"ul",sx:{m:0,pl:2.5},children:[i.map(u=>e.jsxs("li",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[e.jsx(S,{variant:"body2",children:u}),e.jsx(ve,{size:"small",onClick:()=>P("noEntry",u),sx:{color:"#ee6a31",p:.25},children:e.jsx(pt,{fontSize:"small"})})]},u)),i.length===0&&e.jsx(S,{variant:"body2",color:"text.secondary",children:"No emails. Add above or leave empty to use Operator users."})]})]})})]}),e.jsx(J,{variant:"contained",startIcon:g?e.jsx(Ee,{size:20,sx:{color:"#fff"}}):e.jsx(Mt,{}),onClick:F,disabled:g,className:"btn-gradient-success",sx:{mt:3,borderRadius:"12px",textTransform:"none",color:"#fff"},children:"Save MIS Entry Email Settings"})]})}function gn({message:t,setMessage:r}){const[o,l]=a.useState([]),[c,i]=a.useState(""),[y,T]=a.useState("Final MIS Report"),[p,h]=a.useState(""),[v,g]=a.useState("monthly"),[b,d]=a.useState("09:00"),[F,L]=a.useState(""),[P,u]=a.useState(!0),[R,W]=a.useState(!1),[q,A]=a.useState(!1),[j,O]=a.useState(()=>{const x=new Date;return x.setMonth(x.getMonth()-1),x.toISOString().slice(0,10)}),[k,H]=a.useState(()=>new Date().toISOString().slice(0,10)),K=a.useCallback(()=>{ee.getFinalMISReportConfig().then(x=>{x&&(l(Array.isArray(x.to_emails)?x.to_emails:[]),T(x.subject||"Final MIS Report"),h(x.body||""),g(x.schedule_type||"monthly"),d(x.schedule_time||"09:00"),L(x.cron_expression||""),u(x.is_active!==!1))}).catch(()=>{})},[]);a.useEffect(()=>{K()},[K]);const V=()=>{const x=c.trim().toLowerCase();x&&(o.includes(x)||l([...o,x]),i(""))},z=x=>l(o.filter(oe=>oe!==x)),E=async()=>{W(!0),r(null);try{await ee.saveFinalMISReportConfig({to_emails:o,subject:y,body:p,schedule_type:v,schedule_time:b,cron_expression:v==="custom"?F:void 0,is_active:P}),r({type:"success",text:"Final MIS Report email settings saved."})}catch(x){r({type:"error",text:x?.response?.data?.message||"Failed to save."})}finally{W(!1)}},U=async()=>{if(o.length===0){r({type:"error",text:"Add at least one recipient before sending a test."});return}A(!0),r(null);try{await ee.sendTestFinalMISReport(j,k),r({type:"success",text:`Test report sent for ${j} to ${k}.`})}catch(x){r({type:"error",text:x?.response?.data?.message||"Failed to send test."})}finally{A(!1)}};return e.jsxs(M,{children:[e.jsx(S,{variant:"h6",sx:{fontWeight:600,color:"#333842",mb:2},children:"Final MIS Report – Email & Schedule"}),e.jsx(S,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Send the Final MIS Report (same format and colors as the report page) to business heads by email. Configure recipients, subject, optional body, and when to send (daily, weekly, monthly, quarterly, or custom cron)."}),t&&e.jsx(Xe,{severity:t.type,onClose:()=>r(null),sx:{mb:2},children:t.text}),e.jsxs(w,{container:!0,spacing:3,children:[e.jsx(w,{item:!0,xs:12,md:6,children:e.jsxs(ye,{variant:"outlined",sx:{p:2,borderRadius:2},children:[e.jsx(S,{variant:"subtitle1",fontWeight:600,sx:{mb:1,color:"#2879b6"},children:"Recipients (report will be sent to these emails)"}),e.jsxs(M,{sx:{display:"flex",gap:1,mb:1},children:[e.jsx($,{size:"small",fullWidth:!0,placeholder:"email@example.com",value:c,onChange:x=>i(x.target.value),onKeyDown:x=>x.key==="Enter"&&(x.preventDefault(),V()),sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}}),e.jsx(J,{variant:"contained",onClick:V,sx:{borderRadius:"12px",whiteSpace:"nowrap"},children:"Add"})]}),e.jsxs(M,{component:"ul",sx:{m:0,pl:2.5},children:[o.map(x=>e.jsxs("li",{style:{display:"flex",alignItems:"center",gap:8,marginBottom:4},children:[e.jsx(S,{variant:"body2",children:x}),e.jsx(ve,{size:"small",onClick:()=>z(x),sx:{color:"#ee6a31",p:.25},children:e.jsx(pt,{fontSize:"small"})})]},x)),o.length===0&&e.jsx(S,{variant:"body2",color:"text.secondary",children:"No recipients. Add emails above."})]})]})}),e.jsx(w,{item:!0,xs:12,md:6,children:e.jsxs(ye,{variant:"outlined",sx:{p:2,borderRadius:2},children:[e.jsx(S,{variant:"subtitle1",fontWeight:600,sx:{mb:1,color:"#2879b6"},children:"Email content"}),e.jsx($,{size:"small",fullWidth:!0,label:"Subject",value:y,onChange:x=>T(x.target.value),sx:{mb:1.5,"& .MuiOutlinedInput-root":{borderRadius:"12px"}}}),e.jsx($,{size:"small",fullWidth:!0,multiline:!0,rows:3,label:"Body (optional HTML intro before the report table)",value:p,onChange:x=>h(x.target.value),placeholder:"e.g. Dear Team, Please find the consolidated report below.",sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}})]})}),e.jsx(w,{item:!0,xs:12,children:e.jsxs(ye,{variant:"outlined",sx:{p:2,borderRadius:2},children:[e.jsx(S,{variant:"subtitle1",fontWeight:600,sx:{mb:1,color:"#2879b6"},children:"Schedule – when to send the report"}),e.jsxs(w,{container:!0,spacing:2,alignItems:"center",children:[e.jsx(w,{item:!0,xs:12,sm:4,children:e.jsxs($,{select:!0,size:"small",fullWidth:!0,label:"Frequency",value:v,onChange:x=>g(x.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}},children:[e.jsx(Q,{value:"daily",children:"Daily (previous day)"}),e.jsx(Q,{value:"weekly",children:"Weekly (previous week, Monday run)"}),e.jsx(Q,{value:"monthly",children:"Monthly (previous month, 1st run)"}),e.jsx(Q,{value:"quarterly",children:"Quarterly (previous quarter)"}),e.jsx(Q,{value:"custom",children:"Custom (cron expression)"})]})}),v!=="custom"&&e.jsx(w,{item:!0,xs:12,sm:3,children:e.jsx($,{size:"small",fullWidth:!0,label:"Time (24h)",value:b,onChange:x=>d(x.target.value),placeholder:"09:00",sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}})}),v==="custom"&&e.jsx(w,{item:!0,xs:12,sm:4,children:e.jsx($,{size:"small",fullWidth:!0,label:"Cron expression",value:F,onChange:x=>L(x.target.value),placeholder:"0 9 * * 1",helperText:"e.g. 0 9 * * 1 = Monday 9:00",sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}})}),e.jsx(w,{item:!0,xs:12,sm:2,children:e.jsx(dt,{control:e.jsx(Me,{checked:P,onChange:x=>u(x.target.checked)}),label:"Active"})})]}),e.jsx(S,{variant:"caption",display:"block",color:"text.secondary",sx:{mt:1},children:"Report is sent at the configured time. The server checks every hour; for daily at 09:00, the report runs at 09:00 for the previous day."})]})}),e.jsx(w,{item:!0,xs:12,children:e.jsxs(ye,{variant:"outlined",sx:{p:2,borderRadius:2},children:[e.jsx(S,{variant:"subtitle1",fontWeight:600,sx:{mb:1,color:"#2879b6"},children:"Send test report now"}),e.jsxs(M,{sx:{display:"flex",flexWrap:"wrap",gap:2,alignItems:"center"},children:[e.jsx($,{type:"date",size:"small",label:"Start date",value:j,onChange:x=>O(x.target.value),InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}}),e.jsx($,{type:"date",size:"small",label:"End date",value:k,onChange:x=>H(x.target.value),InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}}),e.jsx(J,{variant:"outlined",onClick:U,disabled:q||o.length===0,startIcon:q?e.jsx(Ee,{size:18}):null,sx:{borderRadius:"12px",textTransform:"none"},children:q?"Sending…":"Send test report"})]})]})})]}),e.jsx(J,{variant:"contained",startIcon:R?e.jsx(Ee,{size:20,sx:{color:"#fff"}}):e.jsx(Mt,{}),onClick:E,disabled:R,className:"btn-gradient-success",sx:{mt:3,borderRadius:"12px",textTransform:"none",color:"#fff"},children:"Save Final MIS Report Email Settings"})]})}const Be=[{page:"Dashboard",read:!0,create:!1,update:!1,delete:!1},{page:"MIS Entry",read:!0,create:!0,update:!0,delete:!1},{page:"Consolidated MIS View",read:!0,create:!1,update:!1,delete:!1},{page:"User Management",read:!1,create:!1,update:!1,delete:!1},{page:"Roles & Permissions",read:!1,create:!1,update:!1,delete:!1},{page:"Admin Panel",read:!1,create:!1,update:!1,delete:!1},{page:"Audit Logs",read:!0,create:!1,update:!1,delete:!1},{page:"Import Data",read:!0,create:!0,update:!1,delete:!1}],Pt=[{page:"Dashboard",read:!0,create:!0,update:!0,delete:!0},{page:"MIS Entry",read:!0,create:!0,update:!0,delete:!0},{page:"Consolidated MIS View",read:!0,create:!0,update:!0,delete:!0},{page:"User Management",read:!0,create:!0,update:!0,delete:!0},{page:"Roles & Permissions",read:!0,create:!0,update:!0,delete:!0},{page:"Admin Panel",read:!0,create:!0,update:!0,delete:!0},{page:"Audit Logs",read:!0,create:!0,update:!0,delete:!0},{page:"Import Data",read:!0,create:!0,update:!0,delete:!0}];function Mn(){const[t,r]=a.useState(0),[o,l]=a.useState(!1),[c,i]=a.useState(null),[y,T]=a.useState(Be),[p,h]=a.useState("Operator"),[v,g]=a.useState(!1),[b,d]=a.useState(null),[F,L]=a.useState(""),[P,u]=a.useState(""),[R,W]=a.useState(""),[q,A]=a.useState(0),[j,O]=a.useState(10),[k,H]=a.useState(""),[K,V]=a.useState("all"),[z,E]=a.useState(""),[U,x]=a.useState(""),[oe,Z]=a.useState(!1),[de,N]=a.useState(!1),[ne,ue]=a.useState(null),[ze,De]=a.useState(""),[Ce,$e]=a.useState("entry_not_created"),[le,we]=a.useState(""),[Te,ie]=a.useState(""),[Je,rt]=a.useState(!1),[xt,ht]=a.useState([]),[mt,ft]=a.useState([]),[Qe,xe]=a.useState([]),[Re,ot]=a.useState({}),[je,Oe]=a.useState([]),[Ze,We]=a.useState([]),[et,Et]=a.useState(null),[es,_t]=a.useState(Be),[he,Ie]=a.useState(null),[tt,Fe]=a.useState(""),[nt,at]=a.useState("587"),[Ue,f]=a.useState(!1),[C,D]=a.useState(""),[_,G]=a.useState(""),[re,ce]=a.useState(""),[Pe,me]=a.useState(""),[fe,ts]=a.useState(null),[Wt,zs]=a.useState(""),[Ft,ss]=a.useState(!1),Lt=s=>{if(!s||!Array.isArray(s))return Be;const n=JSON.parse(JSON.stringify(Be)),X={mis_entry:["MIS Entry","Consolidated MIS View","Import Data"],user:["User Management"],role:["Roles & Permissions"],config:["Dashboard","Admin Panel"],audit:["Audit Logs"]};return s.forEach(B=>{const te=B.resource?X[B.resource]:null;te?.length&&te.forEach(be=>{const it=n.findIndex(yr=>yr.page===be);it>-1&&(B.action==="read"&&(n[it].read=!0),B.action==="create"&&(n[it].create=!0),B.action==="update"&&(n[it].update=!0),B.action==="delete"&&(n[it].delete=!0))})}),n};a.useEffect(()=>{(async()=>{try{const n=await ee.getFormConfig();Ie(n),t===3&&We(Array.isArray(n?.scheduler_config)?n.scheduler_config:[]),n?.roles?.length&&et==null&&Et(n.roles[0].id)}catch(n){console.error("Failed to load form config",n),Ie(null)}})()},[]),a.useEffect(()=>{if(!he?.roles||et==null)return;const s=he.roles.find(n=>Number(n.id)===Number(et));s&&_t(s.permissions&&Array.isArray(s.permissions)?Lt(s.permissions):Be)},[et,he]);const At=s=>{if(!s){ts(null),Fe(""),at("587"),f(!1),D(""),G(""),ce(""),me("");return}ts(s.id??null),Fe(s.host??""),at(s.port!=null?String(s.port):"587"),f(!!s.secure),D(s.auth_user??s.authUser??""),G(""),ce(s.from_email??s.fromEmail??""),me(s.from_name??s.fromName??"")};a.useEffect(()=>{if(t!==3)return;const s=he?.smtp_config;if(s&&(s.id||s.host||s.auth_user||s.from_email)){At(s);return}let n=!1;return ee.getSMTPConfig().then(X=>{n||!X||(At(X),Ie(B=>B&&{...B,smtp_config:X}))}).catch(()=>{}),()=>{n=!0}},[t,he?.smtp_config]),a.useEffect(()=>{lt()},[t,he]);const Ds=async()=>{const s=tt?.trim(),n=Number(nt),X=C?.trim(),B=re?.trim();if(!s||!X||!B){d({type:"error",text:"Host, Username, and From Email are required."});return}if(isNaN(n)||n<1||n>65535){d({type:"error",text:"Port must be between 1 and 65535."});return}if(!fe&&!_?.trim()){d({type:"error",text:"Password is required when creating a new SMTP config."});return}try{g(!0),d(null);const te={host:s,port:n,secure:Ue,auth_user:X,from_email:B,from_name:Pe?.trim()||void 0};_?.trim()&&(te.auth_pass=_.trim()),fe?(await ee.updateSMTPConfig(fe,te),d({type:"success",text:"SMTP settings updated successfully."})):(await ee.createSMTPConfig(te),d({type:"success",text:"SMTP settings saved successfully."}));const be=await ee.getFormConfig();Ie(be),be?.smtp_config&&At(be.smtp_config),G("")}catch(te){d({type:"error",text:te.response?.data?.message||"Failed to save SMTP settings."})}finally{g(!1)}},$s=async()=>{const s=Wt?.trim();if(!s){d({type:"error",text:"Enter a test recipient email address."});return}const n=tt?.trim(),X=C?.trim(),B=re?.trim(),te=n&&X&&B;if(!te&&!fe){d({type:"error",text:"Save SMTP config first, or fill in Host, Username, and From Email to test."});return}if(te&&!_?.trim()&&!fe){d({type:"error",text:"Password is required to test new config (or save first then test with saved config)."});return}try{ss(!0),d(null);let be={to:s};fe&&!_?.trim()?be={to:s}:te&&(_?.trim()||fe)&&(be={to:s,host:n,port:Number(nt)||587,secure:Ue,auth_user:X,from_email:B,from_name:Pe?.trim()||void 0},_?.trim()&&(be.auth_pass=_.trim())),await ee.testSMTPConfig(be),d({type:"success",text:"Test email sent successfully. Check the recipient inbox."})}catch(be){d({type:"error",text:be.response?.data?.message||"Failed to send test email."})}finally{ss(!1)}},lt=async()=>{Z(!0);try{if(t===0){const s=await ee.getUsers();ht((s||[]).filter(n=>n.is_active!==!1).map(n=>({...n,role:n.role?.name||n.role||"Operator",permissions:n.permissions&&Array.isArray(n.permissions)&&n.permissions.length>0?Lt(n.permissions):n.role?.permissions&&Array.isArray(n.role.permissions)?Lt(n.role.permissions):Be})))}else if(t===1){const[s,n]=await Promise.all([ee.getAuditLogs(),ee.getSessions({limit:100}).catch(()=>({sessions:[],lastLogins:{}}))]);ft((Array.isArray(s)?s:[]).map(B=>({id:B.id,userId:B.user_id,user:B.actor?.name||"System",lastLogin:"",timestamp:B.createdAt??B.created_at??"",action:B.action||"",actionType:(B.action||"").toLowerCase().includes("create")?"create":(B.action||"").toLowerCase().includes("delete")?"delete":"update",previousValue:B.old_values!=null?JSON.stringify(B.old_values):"",newValue:B.new_values!=null?JSON.stringify(B.new_values):""}))),xe(Array.isArray(n?.sessions)?n.sessions:[]);const X={};if(n?.lastLogins&&typeof n.lastLogins=="object")for(const[B,te]of Object.entries(n.lastLogins))te&&(X[Number(B)]=String(te));ot(X)}else if(t===2){const s=await ee.getTemplates();Oe(Array.isArray(s)?s:[])}else t===3&&We(Array.isArray(he?.scheduler_config)?he.scheduler_config:[])}catch{d({type:"error",text:"Failed to load data"}),t===0&&ht([]),t===1&&(ft([]),xe([]),ot({})),t===2&&Oe([]),t===3&&We([])}finally{Z(!1)}},Os=s=>{h(s),T(s==="Admin"?Pt:s==="Manager"?Pt.map(n=>({...n,delete:!1})):Be)},bt=(s,n)=>{n!=="page"&&T(X=>X.map((B,te)=>te===s?{...B,[n]:!B[n]}:B))},Us=()=>{d(null),i(null),L(""),u(""),W(""),h("Operator"),T(Be),l(!0)},qs=s=>{d(null),i(s),L(s.name),u(s.email),W("");const n=typeof s.role=="string"?s.role:s.role?.name||"Operator";h(n);const X=Array.isArray(s.permissions)&&s.permissions.length>0?s.permissions:n==="Admin"?Pt:n==="Manager"?Pt.map(B=>({...B,delete:!1})):Be;T(X),l(!0)},Hs=async()=>{if(console.log("handleSaveUser called",{userName:F,userEmail:P,selectedRole:p,editingUser:c}),!F||!P||!c&&!R){d({type:"error",text:"Please fill in all required fields"});return}try{g(!0);const s={name:F,email:P,password:R||void 0,role:p,role_id:p==="Admin"?1:p==="Manager"?2:3,permissions:y};c?(await ee.updateUser(c.id,s),d({type:"success",text:"User updated successfully"})):(await ee.createUser(s),d({type:"success",text:"User created successfully"})),l(!1),lt()}catch(s){console.error("Save user error:",s),d({type:"error",text:s.response?.data?.message||"Failed to save user"})}finally{g(!1)}},Vs=async s=>{if(window.confirm("Deactivate this user? They will no longer be able to log in."))try{await ee.deleteUser(s),d({type:"success",text:"User deactivated"}),lt()}catch(n){d({type:"error",text:n.response?.data?.message||"Failed to deactivate user"})}},Xs=(s,n)=>{A(n)},Ks=s=>{O(parseInt(s.target.value,10)),A(0)},Gs=async()=>{Z(!0),await new Promise(s=>setTimeout(s,1e3)),Z(!1),d({type:"success",text:"Activity logs refreshed!"}),setTimeout(()=>d(null),3e3)},Ys=()=>{d({type:"success",text:"Activity logs exported successfully!"}),setTimeout(()=>d(null),3e3)},Js=()=>{A(0),d({type:"success",text:"Filters applied!"}),setTimeout(()=>d(null),3e3)},Qs=()=>{H(""),V("all"),E(""),x(""),A(0)},rs=s=>{switch(s){case"create":return"#7dc244";case"update":return"#2879b6";case"delete":return"#ee6a31";case"login":return"#F59E21";case"view":return"#58595B";default:return"#333842"}},Zs=s=>s.charAt(0).toUpperCase()+s.slice(1),gt=s=>{if(!s)return"—";try{return new Date(s).toLocaleString(void 0,{dateStyle:"medium",timeStyle:"short"})}catch{return s}},os=mt.filter(s=>!(k&&!s.user.toLowerCase().includes(k.toLowerCase())||K!=="all"&&s.actionType!==K||z&&new Date(s.timestamp)<new Date(z)||U&&new Date(s.timestamp)>new Date(U))),ns=os.slice(q*j,q*j+j),er=s=>{switch(s){case"entry_not_created":return"Entry Not Created";case"entry_not_submitted":return"Entry Not Submitted";case"submission_to_manager":return"Submission to Manager";case"review_request":return"Review Request";default:return s}},Nt=s=>{switch(s){case"entry_not_created":return"#ee6a31";case"entry_not_submitted":return"#F59E21";case"submission_to_manager":return"#2879b6";case"review_request":return"#7dc244";default:return"#333842"}},as=s=>{const n=["{{user_name}}","{{date}}"];switch(s){case"entry_not_created":return n;case"entry_not_submitted":return[...n,"{{entry_id}}"];case"submission_to_manager":return[...n,"{{entry_id}}","{{timestamp}}"];case"review_request":return[...n,"{{entry_id}}","{{review_comment}}"];default:return n}},tr=()=>{ue(null),De(""),$e("entry_not_created"),we(""),ie(""),rt(!1),N(!0)},sr=s=>{ue(s),De(s.name),$e(s.type),we(s.subject),ie(s.body),rt(!1),N(!0)},rr=async()=>{try{g(!0);const s=as(Ce),n={name:ze,type:Ce,subject:le,body:Te,placeholders:s,isActive:!0};ne?(await ee.updateTemplate(ne.id,n),d({type:"success",text:"Template updated successfully!"})):(await ee.createTemplate(n),d({type:"success",text:"Template created successfully!"})),N(!1),lt()}catch(s){console.error("Failed to save template",s),d({type:"error",text:"Failed to save template."})}finally{g(!1),setTimeout(()=>d(null),3e3)}},or=async s=>{try{g(!0),await ee.deleteTemplate(s),d({type:"success",text:"Template deleted successfully!"}),lt()}catch(n){console.error("Failed to delete template",n),d({type:"error",text:"Failed to delete template."})}finally{g(!1),setTimeout(()=>d(null),3e3)}},nr=async s=>{try{g(!0),await new Promise(n=>setTimeout(n,500)),Oe(je.map(n=>n.id===s?{...n,isActive:!n.isActive}:n)),d({type:"success",text:"Template status updated!"})}catch(n){console.error("Failed to update template status",n),d({type:"error",text:"Failed to update template status."})}finally{g(!1),setTimeout(()=>d(null),3e3)}},ar=s=>{ie(n=>n+" "+s)},lr=()=>{let s=le,n=Te;return Object.entries({"{{user_name}}":"John Doe","{{date}}":"2024-01-15","{{entry_id}}":"1234","{{timestamp}}":"2024-01-15 14:30:00","{{review_comment}}":"Please update the biogas production values for Digester D-02."}).forEach(([B,te])=>{s=s.replace(new RegExp(B,"g"),te),n=n.replace(new RegExp(B,"g"),te)}),e.jsxs(M,{sx:{mt:2,p:2,backgroundColor:"rgba(40, 121, 182, 0.05)",borderRadius:"12px"},children:[e.jsx(S,{variant:"subtitle2",sx:{fontWeight:600,color:"#2879b6",mb:1},children:"Preview"}),e.jsxs(S,{variant:"body2",sx:{fontWeight:600,mb:1},children:["Subject: ",s]}),e.jsx(jt,{sx:{my:1}}),e.jsx(S,{variant:"body2",sx:{whiteSpace:"pre-wrap"},children:n})]})},[Se,ir]=a.useState(!0),[ls,is]=a.useState(!1),[cr,yt]=a.useState(!1),[cs,dr]=a.useState(null),[ds,ur]=a.useState("entry_not_created"),[us,ps]=a.useState("09:00"),[zt,xs]=a.useState(["Operator"]),[hs,ms]=a.useState("once"),[fs,bs]=a.useState(1),Dt=s=>{switch(s){case"entry_not_created":return"Entry Not Created";case"entry_not_submitted":return"Entry Not Submitted";case"submission_to_manager":return"Submission to Manager";case"review_request":return"Review Request";default:return s}},pr=s=>{switch(s){case"entry_not_created":return"#ee6a31";case"entry_not_submitted":return"#F59E21";case"submission_to_manager":return"#2879b6";case"review_request":return"#7dc244";default:return"#333842"}},xr=async()=>{try{g(!0),await new Promise(s=>setTimeout(s,500)),ir(!Se),d({type:"success",text:Se?"Scheduler deactivated!":"Scheduler activated!"})}catch(s){console.error("Failed to toggle scheduler",s),d({type:"error",text:"Failed to toggle scheduler."})}finally{g(!1),setTimeout(()=>d(null),3e3)}},hr=async s=>{try{is(!0),await new Promise(n=>setTimeout(n,1500)),d({type:"success",text:`Test notification sent for ${Dt(s.notificationType)}!`})}catch(n){console.error("Failed to send test notification",n),d({type:"error",text:"Failed to send test notification."})}finally{is(!1),setTimeout(()=>d(null),3e3)}},mr=async s=>{try{g(!0),await new Promise(n=>setTimeout(n,500)),We(Ze.map(n=>n.id===s?{...n,isEnabled:!n.isEnabled}:n)),d({type:"success",text:"Notification status updated!"})}catch(n){console.error("Failed to update notification status",n),d({type:"error",text:"Failed to update notification status."})}finally{g(!1),setTimeout(()=>d(null),3e3)}},fr=s=>{dr(s),ur(s.notificationType),ps(s.checkTime),xs(s.recipientRoles),ms(s.reminderFrequency),bs(s.templateId),yt(!0)},br=async()=>{try{g(!0),await new Promise(s=>setTimeout(s,1e3)),cs&&(We(Ze.map(s=>s.id===cs.id?{...s,checkTime:us,recipientRoles:zt,reminderFrequency:hs,templateId:fs}:s)),d({type:"success",text:"Scheduler configuration updated!"})),yt(!1)}catch(s){console.error("Failed to save scheduler config",s),d({type:"error",text:"Failed to save scheduler configuration."})}finally{g(!1),setTimeout(()=>d(null),3e3)}},gr=s=>{xs(n=>n.includes(s)?n.filter(X=>X!==s):[...n,s])};return e.jsxs(Nr,{children:[e.jsxs(M,{className:"aos-fade-up",children:[e.jsx(S,{variant:"h4",sx:{fontWeight:700,color:"#2879b6",mb:3},children:"Admin Panel"}),e.jsxs(ye,{className:"glass-card-strong",sx:{borderRadius:"20px",overflow:"hidden"},children:[e.jsx(M,{sx:{borderBottom:1,borderColor:"divider",background:"linear-gradient(135deg, rgba(40, 121, 182, 0.05) 0%, rgba(125, 194, 68, 0.05) 100%)"},children:e.jsxs(fn,{value:t,onChange:(s,n)=>r(n),sx:{"& .MuiTab-root":{textTransform:"none",fontWeight:600,fontSize:"1rem"},"& .Mui-selected":{color:"#2879b6"},"& .MuiTabs-indicator":{backgroundColor:"#2879b6",height:3,borderRadius:"3px 3px 0 0"}},children:[e.jsx(He,{label:"User Management"}),e.jsx(He,{label:"User Activity Logs"}),e.jsx(He,{label:"Email Templates"}),e.jsx(He,{label:"SMTP Configuration"}),e.jsx(He,{label:"Scheduler Configuration"}),e.jsx(He,{label:"MIS Entry Email"}),e.jsx(He,{label:"Final MIS Report Email"})]})}),e.jsx(Ve,{value:t,index:0,children:e.jsxs(qe,{sx:{p:3},children:[e.jsxs(M,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(S,{variant:"h6",sx:{fontWeight:600,color:"#333842"},children:"Users"}),e.jsx(J,{variant:"contained",startIcon:e.jsx(Ss,{}),onClick:Us,className:"btn-gradient-success",sx:{textTransform:"none",borderRadius:"12px",color:"#fff",whiteSpace:"nowrap"},children:"Create User"})]}),e.jsx(St,{component:vt,className:"glass-card",sx:{borderRadius:"16px",boxShadow:"none"},children:e.jsxs(Ct,{children:[e.jsx(wt,{sx:{background:"linear-gradient(135deg, rgba(40, 121, 182, 0.1) 0%, rgba(125, 194, 68, 0.1) 100%)"},children:e.jsxs(ke,{children:[e.jsx(I,{sx:{fontWeight:700,color:"#2879b6"},children:"Name"}),e.jsx(I,{sx:{fontWeight:700,color:"#2879b6"},children:"Email"}),e.jsx(I,{sx:{fontWeight:700,color:"#2879b6"},children:"Role"}),e.jsx(I,{sx:{fontWeight:700,color:"#2879b6"},align:"right",children:"Actions"})]})}),e.jsx(Tt,{children:xt.map(s=>e.jsxs(ke,{className:"hover-lift",sx:{transition:"all 0.3s ease"},children:[e.jsx(I,{sx:{fontWeight:500},children:s.name}),e.jsx(I,{children:s.email}),e.jsx(I,{children:typeof s.role=="string"?s.role:s.role?.name}),e.jsxs(I,{align:"right",children:[e.jsx(ve,{size:"small",onClick:()=>qs(s),sx:{color:"#7dc244",backgroundColor:"rgba(125, 194, 68, 0.1)",borderRadius:"10px",mr:1,"&:hover":{backgroundColor:"rgba(125, 194, 68, 0.2)"}},children:e.jsx(Ut,{fontSize:"small"})}),e.jsx(ve,{size:"small",onClick:()=>Vs(s.id),sx:{color:"#ee6a31",backgroundColor:"rgba(238, 106, 49, 0.1)",borderRadius:"10px","&:hover":{backgroundColor:"rgba(238, 106, 49, 0.2)"}},children:e.jsx(pt,{fontSize:"small"})})]})]},s.id))})]})})]})}),e.jsx(Ve,{value:t,index:1,children:e.jsxs(qe,{sx:{p:3},children:[e.jsxs(M,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(S,{variant:"h6",sx:{fontWeight:600,color:"#333842"},children:"User Activity Logs"}),e.jsxs(M,{sx:{display:"flex",gap:1},children:[e.jsx(J,{variant:"outlined",startIcon:oe?e.jsx(Ee,{size:20}):e.jsx(Cs,{}),onClick:Gs,disabled:oe,sx:{textTransform:"none",borderRadius:"12px",borderColor:"#2879b6",color:"#2879b6",whiteSpace:"nowrap","&:hover":{borderColor:"#2879b6",backgroundColor:"rgba(40, 121, 182, 0.05)"}},children:"Refresh"}),e.jsx(J,{variant:"contained",startIcon:e.jsx(zr,{}),onClick:Ys,className:"btn-gradient-success",sx:{textTransform:"none",borderRadius:"12px",color:"#fff",whiteSpace:"nowrap"},children:"Export Logs"})]})]}),b&&e.jsx(Xe,{severity:b.type,sx:{mb:2,borderRadius:"12px","&.MuiAlert-standardSuccess":{backgroundColor:"rgba(125, 194, 68, 0.1)",color:"#139B49"}},children:b.text}),e.jsxs(ye,{className:"glass-card",sx:{borderRadius:"16px",mb:3,p:2},children:[e.jsx(S,{variant:"subtitle1",sx:{fontWeight:600,color:"#333842",mb:2},children:"Filters"}),e.jsxs(w,{container:!0,spacing:2,children:[e.jsx(w,{item:!0,xs:12,sm:6,md:3,children:e.jsx($,{fullWidth:!0,label:"Search User",placeholder:"Enter user name",value:k,onChange:s=>H(s.target.value),size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}})}),e.jsx(w,{item:!0,xs:12,sm:6,md:3,children:e.jsxs($,{fullWidth:!0,select:!0,label:"Action Type",value:K,onChange:s=>V(s.target.value),size:"small",sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}},children:[e.jsx(Q,{value:"all",children:"All Actions"}),e.jsx(Q,{value:"create",children:"Create"}),e.jsx(Q,{value:"update",children:"Update"}),e.jsx(Q,{value:"delete",children:"Delete"}),e.jsx(Q,{value:"login",children:"Login"}),e.jsx(Q,{value:"view",children:"View"})]})}),e.jsx(w,{item:!0,xs:12,sm:6,md:2,children:e.jsx($,{fullWidth:!0,label:"Date From",type:"date",value:z,onChange:s=>E(s.target.value),size:"small",InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}})}),e.jsx(w,{item:!0,xs:12,sm:6,md:2,children:e.jsx($,{fullWidth:!0,label:"Date To",type:"date",value:U,onChange:s=>x(s.target.value),size:"small",InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}})}),e.jsx(w,{item:!0,xs:12,sm:12,md:2,children:e.jsxs(M,{sx:{display:"flex",gap:1},children:[e.jsx(J,{variant:"contained",onClick:Js,className:"btn-gradient-primary",sx:{textTransform:"none",borderRadius:"12px",color:"#fff",whiteSpace:"nowrap",flex:1},children:"Apply"}),e.jsx(J,{variant:"outlined",onClick:Qs,sx:{textTransform:"none",borderRadius:"12px",borderColor:"#58595B",color:"#58595B",whiteSpace:"nowrap","&:hover":{borderColor:"#58595B",backgroundColor:"rgba(88, 89, 91, 0.05)"}},children:"Reset"})]})})]})]}),Qe.length>0&&e.jsx(S,{variant:"subtitle1",sx:{fontWeight:600,color:"#333842",mt:3,mb:1.5},children:"Login sessions (active session time)"}),Qe.length>0&&e.jsx(St,{component:vt,className:"glass-card",sx:{borderRadius:"16px",boxShadow:"none",mb:3},children:e.jsxs(Ct,{size:"small",children:[e.jsx(wt,{sx:{background:"linear-gradient(135deg, rgba(40, 121, 182, 0.1) 0%, rgba(125, 194, 68, 0.1) 100%)"},children:e.jsxs(ke,{children:[e.jsx(I,{sx:{fontWeight:700,color:"#2879b6"},children:"User"}),e.jsx(I,{sx:{fontWeight:700,color:"#2879b6"},children:"Last Login"}),e.jsx(I,{sx:{fontWeight:700,color:"#2879b6"},children:"Login Time"}),e.jsx(I,{sx:{fontWeight:700,color:"#2879b6"},children:"Logout Time"}),e.jsx(I,{sx:{fontWeight:700,color:"#2879b6"},children:"Session Duration"})]})}),e.jsx(Tt,{children:Qe.slice(0,20).map((s,n)=>e.jsxs(ke,{className:"hover-lift",children:[e.jsx(I,{sx:{fontWeight:500},children:s.userName}),e.jsx(I,{sx:{fontSize:"0.875rem",color:"#58595B"},children:gt(s.lastLogin)}),e.jsx(I,{sx:{fontSize:"0.875rem",color:"#58595B"},children:gt(s.loginTime)}),e.jsx(I,{sx:{fontSize:"0.875rem",color:"#58595B"},children:gt(s.logoutTime)}),e.jsx(I,{sx:{fontSize:"0.875rem",color:"#333842"},children:s.sessionDurationMinutes>=60?`${Math.floor(s.sessionDurationMinutes/60)}h ${s.sessionDurationMinutes%60}m`:`${s.sessionDurationMinutes} min`})]},`session-${s.userId}-${n}`))})]})}),e.jsx(S,{variant:"subtitle1",sx:{fontWeight:600,color:"#333842",mb:1.5},children:"Activity log"}),e.jsxs(St,{component:vt,className:"glass-card",sx:{borderRadius:"16px",boxShadow:"none"},children:[e.jsxs(Ct,{children:[e.jsx(wt,{sx:{background:"linear-gradient(135deg, rgba(40, 121, 182, 0.1) 0%, rgba(125, 194, 68, 0.1) 100%)"},children:e.jsxs(ke,{children:[e.jsx(I,{sx:{fontWeight:700,color:"#2879b6"},children:"User"}),e.jsx(I,{sx:{fontWeight:700,color:"#2879b6"},children:"Last Login"}),e.jsx(I,{sx:{fontWeight:700,color:"#2879b6"},children:"Action"}),e.jsx(I,{sx:{fontWeight:700,color:"#2879b6"},children:"Previous Value"}),e.jsx(I,{sx:{fontWeight:700,color:"#2879b6"},children:"New Value"}),e.jsx(I,{sx:{fontWeight:700,color:"#2879b6"},children:"Timestamp"}),e.jsx(I,{sx:{fontWeight:700,color:"#2879b6"},children:"Type"})]})}),e.jsx(Tt,{children:ns.length>0?ns.map(s=>e.jsxs(ke,{className:"hover-lift",sx:{transition:"all 0.3s ease"},children:[e.jsx(I,{sx:{fontWeight:500},children:s.user}),e.jsx(I,{sx:{fontSize:"0.875rem",color:"#58595B"},children:gt(s.userId!=null?Re[s.userId]:void 0)}),e.jsx(I,{sx:{fontWeight:500},children:s.action}),e.jsx(I,{sx:{fontSize:"0.875rem",color:"#58595B",whiteSpace:"pre-wrap",wordBreak:"break-word",maxWidth:200},children:s.previousValue}),e.jsx(I,{sx:{fontSize:"0.875rem",color:"#333842",whiteSpace:"pre-wrap",wordBreak:"break-word",maxWidth:200},children:s.newValue}),e.jsx(I,{sx:{fontSize:"0.875rem",color:"#58595B"},children:s.timestamp}),e.jsx(I,{children:e.jsx(ge,{label:Zs(s.actionType),size:"small",sx:{backgroundColor:`${rs(s.actionType)}15`,color:rs(s.actionType),fontWeight:600,borderRadius:"8px"}})})]},s.id)):e.jsx(ke,{children:e.jsx(I,{colSpan:7,align:"center",sx:{py:4,color:"#58595B"},children:"No activity logs found"})})})]}),e.jsx(Go,{rowsPerPageOptions:[5,10,25,50],component:"div",count:os.length,rowsPerPage:j,page:q,onPageChange:Xs,onRowsPerPageChange:Ks,sx:{borderTop:"1px solid rgba(40, 121, 182, 0.1)","& .MuiTablePagination-toolbar":{paddingLeft:2,paddingRight:2}}})]})]})}),e.jsx(Ve,{value:t,index:2,children:e.jsxs(qe,{sx:{p:3},children:[e.jsxs(M,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsx(S,{variant:"h6",sx:{fontWeight:600,color:"#333842"},children:"Email Templates"}),e.jsx(J,{variant:"contained",startIcon:e.jsx(Ss,{}),onClick:tr,className:"btn-gradient-success",sx:{textTransform:"none",borderRadius:"12px",color:"#fff",whiteSpace:"nowrap"},children:"Create Template"})]}),b&&e.jsx(Xe,{severity:b.type,sx:{mb:2,borderRadius:"12px","&.MuiAlert-standardSuccess":{backgroundColor:"rgba(125, 194, 68, 0.1)",color:"#139B49"}},children:b.text}),e.jsx(w,{container:!0,spacing:3,children:je.map((s,n)=>e.jsx(w,{item:!0,xs:12,md:6,children:e.jsxs(ye,{className:"glass-card hover-lift",sx:{borderRadius:"16px",p:2.5,transition:"all 0.3s ease",borderLeft:`4px solid ${Nt(s.type)}`},"data-aos":"fade-up","data-aos-delay":n*100,children:[e.jsxs(M,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[e.jsxs(M,{sx:{flex:1},children:[e.jsx(S,{variant:"h6",sx:{fontWeight:600,color:"#333842",mb:.5},children:s.name}),e.jsx(ge,{label:er(s.type),size:"small",sx:{backgroundColor:`${Nt(s.type)}15`,color:Nt(s.type),fontWeight:600,borderRadius:"8px"}})]}),e.jsx(dt,{control:e.jsx(Me,{checked:s.isActive,onChange:()=>nr(s.id),sx:{color:"#7dc244","&.Mui-checked":{color:"#7dc244"}}}),label:"Active",sx:{m:0}})]}),e.jsxs(M,{sx:{mb:2},children:[e.jsx(S,{variant:"body2",sx:{fontWeight:600,color:"#58595B",mb:.5},children:"Subject:"}),e.jsx(S,{variant:"body2",sx:{color:"#333842"},children:s.subject})]}),e.jsxs(M,{sx:{mb:2},children:[e.jsx(S,{variant:"body2",sx:{fontWeight:600,color:"#58595B",mb:.5},children:"Placeholders:"}),e.jsx(M,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:s.placeholders.map(X=>e.jsx(ge,{label:X,size:"small",sx:{backgroundColor:"rgba(40, 121, 182, 0.1)",color:"#2879b6",fontSize:"0.75rem",height:"24px"}},X))})]}),e.jsx(jt,{sx:{my:2}}),e.jsxs(M,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs(S,{variant:"caption",sx:{color:"#58595B"},children:["Updated: ",s.updatedAt]}),e.jsxs(M,{sx:{display:"flex",gap:1},children:[e.jsx(ve,{size:"small",onClick:()=>sr(s),sx:{color:"#2879b6",backgroundColor:"rgba(40, 121, 182, 0.1)",borderRadius:"10px","&:hover":{backgroundColor:"rgba(40, 121, 182, 0.2)"}},children:e.jsx(Ut,{fontSize:"small"})}),e.jsx(ve,{size:"small",onClick:()=>or(s.id),sx:{color:"#ee6a31",backgroundColor:"rgba(238, 106, 49, 0.1)",borderRadius:"10px","&:hover":{backgroundColor:"rgba(238, 106, 49, 0.2)"}},children:e.jsx(pt,{fontSize:"small"})})]})]})]})},s.id))})]})}),e.jsx(Ve,{value:t,index:3,children:e.jsxs(qe,{sx:{p:3},children:[e.jsx(S,{variant:"h6",sx:{fontWeight:600,mb:1,color:"#333842"},children:"SMTP Settings"}),e.jsx(S,{variant:"body2",color:"text.secondary",sx:{mb:3},children:'Configure the mail server used for notifications and test emails. Save your settings, then use "Send Test Email" to verify.'}),b&&e.jsx(Xe,{severity:b.type,sx:{mb:2,borderRadius:"12px","&.MuiAlert-standardSuccess":{backgroundColor:"rgba(125, 194, 68, 0.1)",color:"#139B49"}},children:b.text}),e.jsxs(w,{container:!0,spacing:3,children:[e.jsx(w,{item:!0,xs:12,sm:6,children:e.jsx($,{fullWidth:!0,label:"SMTP Host",required:!0,placeholder:"smtp.gmail.com",value:tt,onChange:s=>Fe(s.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}})}),e.jsx(w,{item:!0,xs:12,sm:6,children:e.jsx($,{fullWidth:!0,label:"SMTP Port",type:"number",required:!0,placeholder:"587",value:nt,onChange:s=>at(s.target.value),inputProps:{min:1,max:65535},sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}})}),e.jsx(w,{item:!0,xs:12,sm:6,children:e.jsx($,{fullWidth:!0,label:"Username",required:!0,placeholder:"user@example.com",value:C,onChange:s=>D(s.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}})}),e.jsx(w,{item:!0,xs:12,sm:6,children:e.jsx($,{fullWidth:!0,label:"Password",type:"password",placeholder:fe?"Leave blank to keep current":"",value:_,onChange:s=>G(s.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}})}),e.jsx(w,{item:!0,xs:12,sm:6,children:e.jsx($,{fullWidth:!0,label:"From Email",required:!0,placeholder:"noreply@example.com",value:re,onChange:s=>ce(s.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}})}),e.jsx(w,{item:!0,xs:12,sm:6,children:e.jsx($,{fullWidth:!0,label:"From Name",placeholder:"Biogas MIS",value:Pe,onChange:s=>me(s.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}})}),e.jsx(w,{item:!0,xs:12,sm:6,children:e.jsx(dt,{control:e.jsx(Me,{checked:Ue,onChange:s=>f(s.target.checked),sx:{color:"#2879b6","&.Mui-checked":{color:"#2879b6"}}}),label:"Use TLS/SSL (secure)"})}),e.jsx(w,{item:!0,xs:12,sm:6}),e.jsx(w,{item:!0,xs:12,children:e.jsxs(M,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[e.jsx(J,{variant:"contained",onClick:Ds,disabled:v,startIcon:v?e.jsx(Ee,{size:20,sx:{color:"#fff"}}):null,className:"btn-gradient-primary",sx:{textTransform:"none",borderRadius:"12px",px:4,color:"#fff",whiteSpace:"nowrap"},children:v?"Saving…":"Save SMTP Settings"}),e.jsx($,{size:"small",label:"Test recipient email",placeholder:"test@example.com",value:Wt,onChange:s=>zs(s.target.value),sx:{minWidth:220,"& .MuiOutlinedInput-root":{borderRadius:"12px"}}}),e.jsx(J,{variant:"outlined",onClick:$s,disabled:Ft||!Wt?.trim(),startIcon:Ft?e.jsx(Ee,{size:20}):null,sx:{textTransform:"none",borderRadius:"12px",borderColor:"#2879b6",color:"#2879b6",whiteSpace:"nowrap"},children:Ft?"Sending…":"Send Test Email"})]})})]})]})}),e.jsx(Ve,{value:t,index:4,children:e.jsxs(qe,{sx:{p:3},children:[e.jsxs(M,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[e.jsxs(M,{children:[e.jsx(S,{variant:"h6",sx:{fontWeight:600,color:"#333842"},children:"Notification Scheduler"}),e.jsx(S,{variant:"body2",sx:{color:"#58595B",mt:.5},children:"Configure automated email notifications for MIS workflow"})]}),e.jsxs(M,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsxs(M,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsx(S,{variant:"body2",sx:{fontWeight:600,color:"#58595B"},children:"Scheduler Status:"}),e.jsx(ge,{label:Se?"Active":"Inactive",size:"small",sx:{backgroundColor:Se?"rgba(125, 194, 68, 0.15)":"rgba(238, 106, 49, 0.15)",color:Se?"#7dc244":"#ee6a31",fontWeight:600,borderRadius:"8px"}})]}),e.jsx(J,{variant:Se?"outlined":"contained",onClick:xr,disabled:v,className:Se?"":"btn-gradient-success",sx:{textTransform:"none",borderRadius:"12px",whiteSpace:"nowrap",...Se&&{borderColor:"#ee6a31",color:"#ee6a31","&:hover":{borderColor:"#ee6a31",backgroundColor:"rgba(238, 106, 49, 0.05)"}},...Se?{}:{color:"#fff"}},children:Se?"Deactivate Scheduler":"Activate Scheduler"})]})]}),b&&e.jsx(Xe,{severity:b.type,sx:{mb:2,borderRadius:"12px","&.MuiAlert-standardSuccess":{backgroundColor:"rgba(125, 194, 68, 0.1)",color:"#139B49"}},children:b.text}),e.jsxs(ye,{className:"glass-card",sx:{borderRadius:"16px",p:3,mb:3,borderLeft:"4px solid #2879b6"},children:[e.jsx(S,{variant:"subtitle1",sx:{fontWeight:600,color:"#333842",mb:2},children:"MIS Entry Workflow"}),e.jsxs(M,{sx:{display:"flex",alignItems:"center",gap:2,flexWrap:"wrap"},children:[e.jsx(ge,{label:"1. Entry Created",sx:{backgroundColor:"rgba(40, 121, 182, 0.1)",color:"#2879b6",fontWeight:600}}),e.jsx(S,{sx:{color:"#58595B"},children:"→"}),e.jsx(ge,{label:"2. Entry Submitted",sx:{backgroundColor:"rgba(125, 194, 68, 0.1)",color:"#7dc244",fontWeight:600}}),e.jsx(S,{sx:{color:"#58595B"},children:"→"}),e.jsx(ge,{label:"3. Manager Review",sx:{backgroundColor:"rgba(245, 158, 33, 0.1)",color:"#F59E21",fontWeight:600}}),e.jsx(S,{sx:{color:"#58595B"},children:"→"}),e.jsxs(M,{sx:{display:"flex",flexDirection:"column",gap:1},children:[e.jsx(ge,{label:"✓ Approve → Consolidated MIS",size:"small",sx:{backgroundColor:"rgba(19, 155, 73, 0.1)",color:"#139B49",fontWeight:600}}),e.jsx(ge,{label:"✗ Send Back with Comment",size:"small",sx:{backgroundColor:"rgba(238, 106, 49, 0.1)",color:"#ee6a31",fontWeight:600}})]})]})]}),e.jsx(w,{container:!0,spacing:3,children:Ze.map((s,n)=>{const X=je.find(B=>B.id===s.templateId);return e.jsx(w,{item:!0,xs:12,md:6,children:e.jsxs(ye,{className:"glass-card hover-lift",sx:{borderRadius:"16px",p:2.5,transition:"all 0.3s ease",borderLeft:`4px solid ${pr(s.notificationType)}`},"data-aos":"fade-up","data-aos-delay":n*100,children:[e.jsxs(M,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[e.jsxs(M,{sx:{flex:1},children:[e.jsx(S,{variant:"h6",sx:{fontWeight:600,color:"#333842",mb:.5},children:Dt(s.notificationType)}),e.jsx(ge,{label:s.isEnabled?"Enabled":"Disabled",size:"small",sx:{backgroundColor:s.isEnabled?"rgba(125, 194, 68, 0.15)":"rgba(88, 89, 91, 0.15)",color:s.isEnabled?"#7dc244":"#58595B",fontWeight:600,borderRadius:"8px"}})]}),e.jsx(dt,{control:e.jsx(Me,{checked:s.isEnabled,onChange:()=>mr(s.id),sx:{color:"#7dc244","&.Mui-checked":{color:"#7dc244"}}}),label:"",sx:{m:0}})]}),e.jsxs(w,{container:!0,spacing:2,sx:{mb:2},children:[e.jsxs(w,{item:!0,xs:6,children:[e.jsx(S,{variant:"body2",sx:{fontWeight:600,color:"#58595B",mb:.5},children:"Check Time:"}),e.jsx(S,{variant:"body2",sx:{color:"#333842"},children:s.checkTime})]}),e.jsxs(w,{item:!0,xs:6,children:[e.jsx(S,{variant:"body2",sx:{fontWeight:600,color:"#58595B",mb:.5},children:"Frequency:"}),e.jsx(S,{variant:"body2",sx:{color:"#333842",textTransform:"capitalize"},children:s.reminderFrequency})]})]}),e.jsxs(M,{sx:{mb:2},children:[e.jsx(S,{variant:"body2",sx:{fontWeight:600,color:"#58595B",mb:.5},children:"Recipients:"}),e.jsx(M,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:s.recipientRoles.map(B=>e.jsx(ge,{label:B,size:"small",sx:{backgroundColor:"rgba(40, 121, 182, 0.1)",color:"#2879b6",fontSize:"0.75rem",height:"24px"}},B))})]}),e.jsxs(M,{sx:{mb:2},children:[e.jsx(S,{variant:"body2",sx:{fontWeight:600,color:"#58595B",mb:.5},children:"Email Template:"}),e.jsx(S,{variant:"body2",sx:{color:"#333842"},children:X?.name||"Not assigned"})]}),e.jsx(jt,{sx:{my:2}}),e.jsxs(M,{sx:{display:"flex",gap:1},children:[e.jsxs(J,{variant:"outlined",size:"small",onClick:()=>fr(s),sx:{textTransform:"none",borderRadius:"10px",borderColor:"#2879b6",color:"#2879b6",flex:1,whiteSpace:"nowrap","&:hover":{borderColor:"#2879b6",backgroundColor:"rgba(40, 121, 182, 0.05)"}},children:[e.jsx(Ut,{sx:{fontSize:16,mr:.5}}),"Configure"]}),e.jsxs(J,{variant:"outlined",size:"small",onClick:()=>hr(s),disabled:ls||!s.isEnabled,sx:{textTransform:"none",borderRadius:"10px",borderColor:"#7dc244",color:"#7dc244",flex:1,whiteSpace:"nowrap","&:hover":{borderColor:"#7dc244",backgroundColor:"rgba(125, 194, 68, 0.05)"}},children:[ls?e.jsx(Ee,{size:16,sx:{mr:.5}}):e.jsx(Cs,{sx:{fontSize:16,mr:.5}}),"Test"]})]})]})},s.id)})})]})}),e.jsx(Ve,{value:t,index:5,children:e.jsx(qe,{sx:{p:3},children:e.jsx(bn,{formConfig:he,message:b,setMessage:d})})}),e.jsx(Ve,{value:t,index:6,children:e.jsx(qe,{sx:{p:3},children:e.jsx(gn,{message:b,setMessage:d})})})]})]}),e.jsxs(Ht,{open:o,onClose:()=>l(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:"20px"}},children:[e.jsx(qt,{sx:{fontWeight:600,color:"#2879b6",background:"linear-gradient(135deg, rgba(40, 121, 182, 0.05) 0%, rgba(125, 194, 68, 0.05) 100%)"},children:c?"Edit User":"Create New User"}),e.jsxs(Vt,{sx:{pt:3},children:[b&&e.jsx(Xe,{severity:b.type,sx:{mb:2,borderRadius:"12px","&.MuiAlert-standardSuccess":{backgroundColor:"rgba(125, 194, 68, 0.1)",color:"#139B49"}},children:b.text}),e.jsxs(M,{sx:{pt:2},children:[e.jsxs(w,{container:!0,spacing:2,children:[e.jsx(w,{item:!0,xs:12,sm:6,children:e.jsx($,{fullWidth:!0,label:"Name",required:!0,value:F,onChange:s=>L(s.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}})}),e.jsx(w,{item:!0,xs:12,sm:6,children:e.jsx($,{fullWidth:!0,label:"Email",type:"email",required:!0,value:P,onChange:s=>u(s.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}})}),e.jsx(w,{item:!0,xs:12,sm:6,children:e.jsx($,{fullWidth:!0,label:"Password",type:"password",required:!c,placeholder:c?"Leave blank to keep current":"",value:R,onChange:s=>W(s.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}})}),e.jsx(w,{item:!0,xs:12,sm:6,children:e.jsxs($,{fullWidth:!0,select:!0,label:"Role",value:p,onChange:s=>Os(s.target.value),required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}},children:[e.jsx(Q,{value:"Admin",children:"Admin"}),e.jsx(Q,{value:"Manager",children:"Manager"}),e.jsx(Q,{value:"Operator",children:"Operator"})]})})]}),e.jsx(jt,{sx:{my:3}}),e.jsx(S,{variant:"h6",sx:{fontWeight:600,color:"#333842",mb:.5},children:"User Permissions"}),e.jsx(S,{variant:"body2",color:"text.secondary",sx:{mb:2},children:"Assign access per page for this user. These permissions apply only to this user and are the primary way to manage access."}),e.jsx(St,{component:vt,className:"glass-card",sx:{borderRadius:"16px",boxShadow:"none"},children:e.jsxs(Ct,{size:"small",children:[e.jsx(wt,{sx:{background:"linear-gradient(135deg, rgba(40, 121, 182, 0.1) 0%, rgba(125, 194, 68, 0.1) 100%)"},children:e.jsxs(ke,{children:[e.jsx(I,{sx:{fontWeight:700,color:"#2879b6"},children:"Page"}),e.jsx(I,{align:"center",sx:{fontWeight:700,color:"#2879b6"},children:"Read"}),e.jsx(I,{align:"center",sx:{fontWeight:700,color:"#7dc244"},children:"Create"}),e.jsx(I,{align:"center",sx:{fontWeight:700,color:"#F59E21"},children:"Update"}),e.jsx(I,{align:"center",sx:{fontWeight:700,color:"#ee6a31"},children:"Delete"})]})}),e.jsx(Tt,{children:y.map((s,n)=>e.jsxs(ke,{children:[e.jsx(I,{sx:{fontWeight:500},children:s.page}),e.jsx(I,{align:"center",children:e.jsx(Me,{checked:s.read,onChange:()=>bt(n,"read"),size:"small",sx:{color:"#2879b6","&.Mui-checked":{color:"#2879b6"}}})}),e.jsx(I,{align:"center",children:e.jsx(Me,{checked:s.create,onChange:()=>bt(n,"create"),size:"small",sx:{color:"#7dc244","&.Mui-checked":{color:"#7dc244"}}})}),e.jsx(I,{align:"center",children:e.jsx(Me,{checked:s.update,onChange:()=>bt(n,"update"),size:"small",sx:{color:"#F59E21","&.Mui-checked":{color:"#F59E21"}}})}),e.jsx(I,{align:"center",children:e.jsx(Me,{checked:s.delete,onChange:()=>bt(n,"delete"),size:"small",sx:{color:"#ee6a31","&.Mui-checked":{color:"#ee6a31"}}})})]},s.page))})]})})]})]}),e.jsxs(Xt,{sx:{p:2.5},children:[e.jsx(J,{onClick:()=>l(!1),sx:{textTransform:"none",color:"#58595B",borderRadius:"12px"},children:"Cancel"}),e.jsx(J,{variant:"contained",onClick:Hs,className:"btn-gradient-success",sx:{textTransform:"none",borderRadius:"12px",color:"#fff",whiteSpace:"nowrap"},children:c?"Save Changes":"Create User"})]})]}),e.jsxs(Ht,{open:de,onClose:()=>N(!1),maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:"20px"}},children:[e.jsx(qt,{sx:{fontWeight:600,color:"#2879b6",background:"linear-gradient(135deg, rgba(40, 121, 182, 0.05) 0%, rgba(125, 194, 68, 0.05) 100%)"},children:ne?"Edit Email Template":"Create Email Template"}),e.jsx(Vt,{sx:{pt:3},children:e.jsx(M,{sx:{pt:2},children:e.jsxs(w,{container:!0,spacing:2,children:[e.jsx(w,{item:!0,xs:12,children:e.jsx($,{fullWidth:!0,label:"Template Name",required:!0,value:ze,onChange:s=>De(s.target.value),placeholder:"e.g., Entry Not Created Notification",sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}})}),e.jsx(w,{item:!0,xs:12,children:e.jsxs($,{fullWidth:!0,select:!0,label:"Template Type",value:Ce,onChange:s=>$e(s.target.value),required:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}},children:[e.jsx(Q,{value:"entry_not_created",children:"Entry Not Created"}),e.jsx(Q,{value:"entry_not_submitted",children:"Entry Not Submitted"}),e.jsx(Q,{value:"submission_to_manager",children:"Submission to Manager"}),e.jsx(Q,{value:"review_request",children:"Review Request to Entry Person"})]})}),e.jsx(w,{item:!0,xs:12,children:e.jsx($,{fullWidth:!0,label:"Email Subject",required:!0,value:le,onChange:s=>we(s.target.value),placeholder:"e.g., Reminder: MIS Entry Not Created for {{date}}",sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}})}),e.jsxs(w,{item:!0,xs:12,children:[e.jsx(S,{variant:"body2",sx:{fontWeight:600,color:"#58595B",mb:1},children:"Available Placeholders:"}),e.jsx(M,{sx:{display:"flex",flexWrap:"wrap",gap:1,mb:2},children:as(Ce).map(s=>e.jsx(ge,{label:s,size:"small",onClick:()=>ar(s),sx:{backgroundColor:"rgba(40, 121, 182, 0.1)",color:"#2879b6",cursor:"pointer","&:hover":{backgroundColor:"rgba(40, 121, 182, 0.2)"}}},s))}),e.jsx($,{fullWidth:!0,label:"Email Body",required:!0,multiline:!0,rows:8,value:Te,onChange:s=>ie(s.target.value),placeholder:"Enter your email template content here. Click placeholders above to insert them.",sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}})]}),e.jsxs(w,{item:!0,xs:12,children:[e.jsx(J,{variant:"outlined",onClick:()=>rt(!Je),sx:{textTransform:"none",borderRadius:"12px",borderColor:"#2879b6",color:"#2879b6",whiteSpace:"nowrap","&:hover":{borderColor:"#2879b6",backgroundColor:"rgba(40, 121, 182, 0.05)"}},children:Je?"Hide Preview":"Show Preview"}),Je&&lr()]})]})})}),e.jsxs(Xt,{sx:{p:2.5},children:[e.jsx(J,{onClick:()=>N(!1),sx:{textTransform:"none",color:"#58595B",borderRadius:"12px"},children:"Cancel"}),e.jsx(J,{variant:"contained",onClick:rr,disabled:v||!ze||!le||!Te,startIcon:v?e.jsx(Ee,{size:20,sx:{color:"#fff"}}):e.jsx(Mt,{}),className:"btn-gradient-success",sx:{textTransform:"none",borderRadius:"12px",color:"#fff",whiteSpace:"nowrap"},children:ne?"Save Changes":"Create Template"})]})]}),e.jsxs(Ht,{open:cr,onClose:()=>yt(!1),maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:"20px"}},children:[e.jsx(qt,{sx:{fontWeight:600,color:"#2879b6",background:"linear-gradient(135deg, rgba(40, 121, 182, 0.05) 0%, rgba(125, 194, 68, 0.05) 100%)"},children:"Configure Notification Scheduler"}),e.jsx(Vt,{sx:{pt:3},children:e.jsx(M,{sx:{pt:2},children:e.jsxs(w,{container:!0,spacing:2,children:[e.jsx(w,{item:!0,xs:12,children:e.jsx($,{fullWidth:!0,label:"Notification Type",value:Dt(ds),disabled:!0,sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}})}),e.jsx(w,{item:!0,xs:12,children:e.jsx($,{fullWidth:!0,label:"Check Time",type:"time",value:us,onChange:s=>ps(s.target.value),InputLabelProps:{shrink:!0},sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}}})}),e.jsx(w,{item:!0,xs:12,children:e.jsxs($,{fullWidth:!0,select:!0,label:"Reminder Frequency",value:hs,onChange:s=>ms(s.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}},children:[e.jsx(Q,{value:"once",children:"Once"}),e.jsx(Q,{value:"daily",children:"Daily"}),e.jsx(Q,{value:"hourly",children:"Hourly"})]})}),e.jsx(w,{item:!0,xs:12,children:e.jsx($,{fullWidth:!0,select:!0,label:"Email Template",value:fs,onChange:s=>bs(Number(s.target.value)),sx:{"& .MuiOutlinedInput-root":{borderRadius:"12px"}},children:je.filter(s=>s.type===ds).map(s=>e.jsx(Q,{value:s.id,children:s.name},s.id))})}),e.jsxs(w,{item:!0,xs:12,children:[e.jsx(S,{variant:"body2",sx:{fontWeight:600,color:"#58595B",mb:1},children:"Recipient Roles:"}),e.jsx(M,{sx:{display:"flex",flexDirection:"column",gap:1},children:["Admin","Manager","Operator"].map(s=>e.jsx(dt,{control:e.jsx(Me,{checked:zt.includes(s),onChange:()=>gr(s),sx:{color:"#2879b6","&.Mui-checked":{color:"#2879b6"}}}),label:s},s))})]})]})})}),e.jsxs(Xt,{sx:{p:2.5},children:[e.jsx(J,{onClick:()=>yt(!1),sx:{textTransform:"none",color:"#58595B",borderRadius:"12px"},children:"Cancel"}),e.jsx(J,{variant:"contained",onClick:br,disabled:v||zt.length===0,startIcon:v?e.jsx(Ee,{size:20,sx:{color:"#fff"}}):e.jsx(Mt,{}),className:"btn-gradient-success",sx:{textTransform:"none",borderRadius:"12px",color:"#fff",whiteSpace:"nowrap"},children:"Save Configuration"})]})]})]})}export{Mn as default};
//# sourceMappingURL=page-1jXRXRhj.js.map
