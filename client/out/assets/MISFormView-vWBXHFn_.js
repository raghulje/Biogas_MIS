import{j as t,R as W,B as v,r as Ae,C as Le}from"./index-D5WwrTj-.js";import{c as Mt,T as E,a as c,I as Vt,M as bt}from"./Layout-BXTkXNOz.js";import{G as d,C as Qt,a as Kt}from"./Grid-CDTwfBGP.js";import{B as he}from"./Button-Dm6J5fh5.js";import{A as Yt,D as Jt}from"./FileDownload-CvIEObuY.js";import{misService as oe}from"./misService-LLTObjZP.js";import{C as Xt}from"./Chip-Bs8bSymi.js";import{S as Zt}from"./Save-BhuREFE_.js";import{A as er}from"./Alert-CqN-3oq6.js";import"./srel-BMzgRxSF.js";import"./DialogContent-C2pFBHRZ.js";const tr=Mt(t.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack"),ht=Mt(t.jsx("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");var Me=e=>e.type==="checkbox",me=e=>e instanceof Date,J=e=>e==null;const kt=e=>typeof e=="object";var z=e=>!J(e)&&!Array.isArray(e)&&kt(e)&&!me(e),rr=e=>z(e)&&e.target?Me(e.target)?e.target.checked:e.target.value:e,sr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,ir=(e,s)=>e.has(sr(s)),lr=e=>{const s=e.constructor&&e.constructor.prototype;return z(s)&&s.hasOwnProperty("isPrototypeOf")},Xe=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function N(e){if(e instanceof Date)return new Date(e);const s=typeof FileList<"u"&&e instanceof FileList;if(Xe&&(e instanceof Blob||s))return e;const r=Array.isArray(e);if(!r&&!(z(e)&&lr(e)))return e;const i=r?[]:Object.create(Object.getPrototypeOf(e));for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&(i[o]=N(e[o]));return i}var Ie=e=>/^\w*$/.test(e),B=e=>e===void 0,Ce=e=>Array.isArray(e)?e.filter(Boolean):[],Ze=e=>Ce(e.replace(/["|']|\]/g,"").split(/\.|\[/)),p=(e,s,r)=>{if(!s||!z(e))return r;const i=(Ie(s)?[s]:Ze(s)).reduce((o,n)=>J(o)?o:o[n],e);return B(i)||i===e?B(e[s])?r:e[s]:i},ae=e=>typeof e=="boolean",le=e=>typeof e=="function",P=(e,s,r)=>{let i=-1;const o=Ie(s)?[s]:Ze(s),n=o.length,f=n-1;for(;++i<n;){const x=o[i];let A=r;if(i!==f){const M=e[x];A=z(M)||Array.isArray(M)?M:isNaN(+o[i+1])?{}:[]}if(x==="__proto__"||x==="constructor"||x==="prototype")return;e[x]=A,e=e[x]}};const pt={BLUR:"blur",FOCUS_OUT:"focusout"},se={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},ue={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},et=W.createContext(null);et.displayName="HookFormControlContext";const ar=()=>W.useContext(et);var nr=(e,s,r,i=!0)=>{const o={defaultValues:s._defaultValues};for(const n in e)Object.defineProperty(o,n,{get:()=>{const f=n;return s._proxyFormState[f]!==se.all&&(s._proxyFormState[f]=!i||se.all),e[f]}});return o};const Wt=typeof window<"u"?W.useLayoutEffect:W.useEffect;var te=e=>typeof e=="string",ur=(e,s,r,i,o)=>te(e)?(i&&s.watch.add(e),p(r,e,o)):Array.isArray(e)?e.map(n=>(i&&s.watch.add(n),p(r,n))):(i&&(s.watchAll=!0),r),Qe=e=>J(e)||!kt(e);function fe(e,s,r=new WeakSet){if(Qe(e)||Qe(s))return Object.is(e,s);if(me(e)&&me(s))return Object.is(e.getTime(),s.getTime());const i=Object.keys(e),o=Object.keys(s);if(i.length!==o.length)return!1;if(r.has(e)||r.has(s))return!0;r.add(e),r.add(s);for(const n of i){const f=e[n];if(!o.includes(n))return!1;if(n!=="ref"){const x=s[n];if(me(f)&&me(x)||z(f)&&z(x)||Array.isArray(f)&&Array.isArray(x)?!fe(f,x,r):!Object.is(f,x))return!1}}return!0}const tt=W.createContext(null);tt.displayName="HookFormContext";const je=()=>W.useContext(tt),dr=e=>{const{children:s,watch:r,getValues:i,getFieldState:o,setError:n,clearErrors:f,setValue:x,trigger:A,formState:M,resetField:V,reset:S,handleSubmit:I,unregister:w,control:$,register:H,setFocus:G,subscribe:O}=e;return W.createElement(tt.Provider,{value:W.useMemo(()=>({watch:r,getValues:i,getFieldState:o,setError:n,clearErrors:f,setValue:x,trigger:A,formState:M,resetField:V,reset:S,handleSubmit:I,unregister:w,control:$,register:H,setFocus:G,subscribe:O}),[f,$,M,o,i,I,H,S,V,n,G,x,O,A,w,r])},W.createElement(et.Provider,{value:$},s))};var or=(e,s,r,i,o)=>s?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[i]:o||!0}}:{},X=e=>Array.isArray(e)?e:[e],gt=()=>{let e=[];return{get observers(){return e},next:o=>{for(const n of e)n.next&&n.next(o)},subscribe:o=>(e.push(o),{unsubscribe:()=>{e=e.filter(n=>n!==o)}}),unsubscribe:()=>{e=[]}}};function It(e,s){const r={};for(const i in e)if(e.hasOwnProperty(i)){const o=e[i],n=s[i];if(o&&z(o)&&n){const f=It(o,n);z(f)&&(r[i]=f)}else e[i]&&(r[i]=n)}return r}var K=e=>z(e)&&!Object.keys(e).length,rt=e=>e.type==="file",ke=e=>{if(!Xe)return!1;const s=e?e.ownerDocument:0;return e instanceof(s&&s.defaultView?s.defaultView.HTMLElement:HTMLElement)},Ct=e=>e.type==="select-multiple",st=e=>e.type==="radio",cr=e=>st(e)||Me(e),Ne=e=>ke(e)&&e.isConnected;function fr(e,s){const r=s.slice(0,-1).length;let i=0;for(;i<r;)e=B(e)?i++:e[s[i++]];return e}function xr(e){for(const s in e)if(e.hasOwnProperty(s)&&!B(e[s]))return!1;return!0}function U(e,s){const r=Array.isArray(s)?s:Ie(s)?[s]:Ze(s),i=r.length===1?e:fr(e,r),o=r.length-1,n=r[o];return i&&delete i[n],o!==0&&(z(i)&&K(i)||Array.isArray(i)&&xr(i))&&U(e,r.slice(0,-1)),e}var mr=e=>{for(const s in e)if(le(e[s]))return!0;return!1};function Dt(e){return Array.isArray(e)||z(e)&&!mr(e)}function Ke(e,s={}){for(const r in e){const i=e[r];Dt(i)?(s[r]=Array.isArray(i)?[]:{},Ke(i,s[r])):B(i)||(s[r]=!0)}return s}function pe(e,s,r){r||(r=Ke(s));for(const i in e){const o=e[i];if(Dt(o))B(s)||Qe(r[i])?r[i]=Ke(o,Array.isArray(o)?[]:{}):pe(o,J(s)?{}:s[i],r[i]);else{const n=s[i];r[i]=!fe(o,n)}}return r}const yt={value:!1,isValid:!1},jt={value:!0,isValid:!0};var Tt=e=>{if(Array.isArray(e)){if(e.length>1){const s=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:s,isValid:!!s.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!B(e[0].attributes.value)?B(e[0].value)||e[0].value===""?jt:{value:e[0].value,isValid:!0}:jt:yt}return yt},Et=(e,{valueAsNumber:s,valueAsDate:r,setValueAs:i})=>B(e)?e:s?e===""?NaN:e&&+e:r&&te(e)?new Date(e):i?i(e):e;const vt={isValid:!1,value:null};var Bt=e=>Array.isArray(e)?e.reduce((s,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:s,vt):vt;function St(e){const s=e.ref;return rt(s)?s.files:st(s)?Bt(e.refs).value:Ct(s)?[...s.selectedOptions].map(({value:r})=>r):Me(s)?Tt(e.refs).value:Et(B(s.value)?e.ref.value:s.value,e)}var br=(e,s,r,i)=>{const o={};for(const n of e){const f=p(s,n);f&&P(o,n,f._f)}return{criteriaMode:r,names:[...e],fields:o,shouldUseNativeValidation:i}},We=e=>e instanceof RegExp,we=e=>B(e)?e:We(e)?e.source:z(e)?We(e.value)?e.value.source:e.value:e,ge=e=>({isOnSubmit:!e||e===se.onSubmit,isOnBlur:e===se.onBlur,isOnChange:e===se.onChange,isOnAll:e===se.all,isOnTouch:e===se.onTouched});const Ft="AsyncFunction";var hr=e=>!!e&&!!e.validate&&!!(le(e.validate)&&e.validate.constructor.name===Ft||z(e.validate)&&Object.values(e.validate).find(s=>s.constructor.name===Ft)),pr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),Ye=(e,s,r)=>!r&&(s.watchAll||s.watch.has(e)||[...s.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const ye=(e,s,r,i)=>{for(const o of r||Object.keys(e)){const n=p(e,o);if(n){const{_f:f,...x}=n;if(f){if(f.refs&&f.refs[0]&&s(f.refs[0],o)&&!i)return!0;if(f.ref&&s(f.ref,f.name)&&!i)return!0;if(ye(x,s))break}else if(z(x)&&ye(x,s))break}}};function wt(e,s,r){const i=p(e,r);if(i||Ie(r))return{error:i,name:r};const o=r.split(".");for(;o.length;){const n=o.join("."),f=p(s,n),x=p(e,n);if(f&&!Array.isArray(f)&&r!==n)return{name:r};if(x&&x.type)return{name:n,error:x};if(x&&x.root&&x.root.type)return{name:`${n}.root`,error:x.root};o.pop()}return{name:r}}var gr=(e,s,r,i)=>{r(e);const{name:o,...n}=e;return K(n)||Object.keys(n).length>=Object.keys(s).length||Object.keys(n).find(f=>s[f]===(!i||se.all))},yr=(e,s,r)=>!e||!s||e===s||X(e).some(i=>i&&(r?i===s:i.startsWith(s)||s.startsWith(i))),jr=(e,s,r,i,o)=>o.isOnAll?!1:!r&&o.isOnTouch?!(s||e):(r?i.isOnBlur:o.isOnBlur)?!e:(r?i.isOnChange:o.isOnChange)?e:!0,vr=(e,s)=>!Ce(p(e,s)).length&&U(e,s),Pt=(e,s,r)=>{const i=X(p(e,r));return P(i,"root",s[r]),P(e,r,i),e};function _t(e,s,r="validate"){if(te(e)||Array.isArray(e)&&e.every(te)||ae(e)&&!e)return{type:r,message:te(e)?e:"",ref:s}}var be=e=>z(e)&&!We(e)?e:{value:e,message:""},Je=async(e,s,r,i,o,n)=>{const{ref:f,refs:x,required:A,maxLength:M,minLength:V,min:S,max:I,pattern:w,validate:$,name:H,valueAsNumber:G,mount:O}=e._f,F=p(r,H);if(!O||s.has(H))return{};const R=x?x[0]:f,y=k=>{o&&R.reportValidity&&(R.setCustomValidity(ae(k)?"":k||""),R.reportValidity())},g={},_=st(f),L=Me(f),Z=_||L,ne=(G||rt(f))&&B(f.value)&&B(F)||ke(f)&&f.value===""||F===""||Array.isArray(F)&&!F.length,re=or.bind(null,H,i,g),Ve=(k,C,q,Q=ue.maxLength,ie=ue.minLength)=>{const ee=k?C:q;g[H]={type:k?Q:ie,message:ee,ref:f,...re(k?Q:ie,ee)}};if(n?!Array.isArray(F)||!F.length:A&&(!Z&&(ne||J(F))||ae(F)&&!F||L&&!Tt(x).isValid||_&&!Bt(x).isValid)){const{value:k,message:C}=te(A)?{value:!!A,message:A}:be(A);if(k&&(g[H]={type:ue.required,message:C,ref:R,...re(ue.required,C)},!i))return y(C),g}if(!ne&&(!J(S)||!J(I))){let k,C;const q=be(I),Q=be(S);if(!J(F)&&!isNaN(F)){const ie=f.valueAsNumber||F&&+F;J(q.value)||(k=ie>q.value),J(Q.value)||(C=ie<Q.value)}else{const ie=f.valueAsDate||new Date(F),ee=Fe=>new Date(new Date().toDateString()+" "+Fe),ve=f.type=="time",Se=f.type=="week";te(q.value)&&F&&(k=ve?ee(F)>ee(q.value):Se?F>q.value:ie>new Date(q.value)),te(Q.value)&&F&&(C=ve?ee(F)<ee(Q.value):Se?F<Q.value:ie<new Date(Q.value))}if((k||C)&&(Ve(!!k,q.message,Q.message,ue.max,ue.min),!i))return y(g[H].message),g}if((M||V)&&!ne&&(te(F)||n&&Array.isArray(F))){const k=be(M),C=be(V),q=!J(k.value)&&F.length>+k.value,Q=!J(C.value)&&F.length<+C.value;if((q||Q)&&(Ve(q,k.message,C.message),!i))return y(g[H].message),g}if(w&&!ne&&te(F)){const{value:k,message:C}=be(w);if(We(k)&&!F.match(k)&&(g[H]={type:ue.pattern,message:C,ref:f,...re(ue.pattern,C)},!i))return y(C),g}if($){if(le($)){const k=await $(F,r),C=_t(k,R);if(C&&(g[H]={...C,...re(ue.validate,C.message)},!i))return y(C.message),g}else if(z($)){let k={};for(const C in $){if(!K(k)&&!i)break;const q=_t(await $[C](F,r),R,C);q&&(k={...q,...re(C,q.message)},y(q.message),i&&(g[H]=k))}if(!K(k)&&(g[H]={ref:R,...k},!i))return g}}return y(!0),g};const Sr={mode:se.onSubmit,reValidateMode:se.onChange,shouldFocusError:!0};function Fr(e={}){let s={...Sr,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:le(s.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:s.errors||{},disabled:s.disabled||!1},i={},o=z(s.defaultValues)||z(s.values)?N(s.defaultValues||s.values)||{}:{},n=s.shouldUnregister?{}:N(o),f={action:!1,mount:!1,watch:!1,keepIsValid:!1},x={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},A,M=0;const V={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},S={...V};let I={...S};const w={array:gt(),state:gt()},$=s.criteriaMode===se.all,H=l=>a=>{clearTimeout(M),M=setTimeout(l,a)},G=async l=>{if(!f.keepIsValid&&!s.disabled&&(S.isValid||I.isValid||l)){let a;s.resolver?(a=K((await Z()).errors),O()):a=await re(i,!0),a!==r.isValid&&w.state.next({isValid:a})}},O=(l,a)=>{!s.disabled&&(S.isValidating||S.validatingFields||I.isValidating||I.validatingFields)&&((l||Array.from(x.mount)).forEach(u=>{u&&(a?P(r.validatingFields,u,a):U(r.validatingFields,u))}),w.state.next({validatingFields:r.validatingFields,isValidating:!K(r.validatingFields)}))},F=(l,a=[],u,h,b=!0,m=!0)=>{if(h&&u&&!s.disabled){if(f.action=!0,m&&Array.isArray(p(i,l))){const j=u(p(i,l),h.argA,h.argB);b&&P(i,l,j)}if(m&&Array.isArray(p(r.errors,l))){const j=u(p(r.errors,l),h.argA,h.argB);b&&P(r.errors,l,j),vr(r.errors,l)}if((S.touchedFields||I.touchedFields)&&m&&Array.isArray(p(r.touchedFields,l))){const j=u(p(r.touchedFields,l),h.argA,h.argB);b&&P(r.touchedFields,l,j)}(S.dirtyFields||I.dirtyFields)&&(r.dirtyFields=pe(o,n)),w.state.next({name:l,isDirty:k(l,a),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else P(n,l,a)},R=(l,a)=>{P(r.errors,l,a),w.state.next({errors:r.errors})},y=l=>{r.errors=l,w.state.next({errors:r.errors,isValid:!1})},g=(l,a,u,h)=>{const b=p(i,l);if(b){const m=p(n,l,B(u)?p(o,l):u);B(m)||h&&h.defaultChecked||a?P(n,l,a?m:St(b._f)):Q(l,m),f.mount&&!f.action&&G()}},_=(l,a,u,h,b)=>{let m=!1,j=!1;const D={name:l};if(!s.disabled){if(!u||h){(S.isDirty||I.isDirty)&&(j=r.isDirty,r.isDirty=D.isDirty=k(),m=j!==D.isDirty);const T=fe(p(o,l),a);j=!!p(r.dirtyFields,l),T?U(r.dirtyFields,l):P(r.dirtyFields,l,!0),D.dirtyFields=r.dirtyFields,m=m||(S.dirtyFields||I.dirtyFields)&&j!==!T}if(u){const T=p(r.touchedFields,l);T||(P(r.touchedFields,l,u),D.touchedFields=r.touchedFields,m=m||(S.touchedFields||I.touchedFields)&&T!==u)}m&&b&&w.state.next(D)}return m?D:{}},L=(l,a,u,h)=>{const b=p(r.errors,l),m=(S.isValid||I.isValid)&&ae(a)&&r.isValid!==a;if(s.delayError&&u?(A=H(()=>R(l,u)),A(s.delayError)):(clearTimeout(M),A=null,u?P(r.errors,l,u):U(r.errors,l)),(u?!fe(b,u):b)||!K(h)||m){const j={...h,...m&&ae(a)?{isValid:a}:{},errors:r.errors,name:l};r={...r,...j},w.state.next(j)}},Z=async l=>(O(l,!0),await s.resolver(n,s.context,br(l||x.mount,i,s.criteriaMode,s.shouldUseNativeValidation))),ne=async l=>{const{errors:a}=await Z(l);if(O(l),l)for(const u of l){const h=p(a,u);h?P(r.errors,u,h):U(r.errors,u)}else r.errors=a;return a},re=async(l,a,u={valid:!0})=>{for(const h in l){const b=l[h];if(b){const{_f:m,...j}=b;if(m){const D=x.array.has(m.name),T=b._f&&hr(b._f);T&&S.validatingFields&&O([m.name],!0);const Y=await Je(b,x.disabled,n,$,s.shouldUseNativeValidation&&!a,D);if(T&&S.validatingFields&&O([m.name]),Y[m.name]&&(u.valid=!1,a||e.shouldUseNativeValidation))break;!a&&(p(Y,m.name)?D?Pt(r.errors,Y,m.name):P(r.errors,m.name,Y[m.name]):U(r.errors,m.name))}!K(j)&&await re(j,a,u)}}return u.valid},Ve=()=>{for(const l of x.unMount){const a=p(i,l);a&&(a._f.refs?a._f.refs.every(u=>!Ne(u)):!Ne(a._f.ref))&&De(l)}x.unMount=new Set},k=(l,a)=>!s.disabled&&(l&&a&&P(n,l,a),!fe(it(),o)),C=(l,a,u)=>ur(l,x,{...f.mount?n:B(a)?o:te(l)?{[l]:a}:a},u,a),q=l=>Ce(p(f.mount?n:o,l,s.shouldUnregister?p(o,l,[]):[])),Q=(l,a,u={})=>{const h=p(i,l);let b=a;if(h){const m=h._f;m&&(!m.disabled&&P(n,l,Et(a,m)),b=ke(m.ref)&&J(a)?"":a,Ct(m.ref)?[...m.ref.options].forEach(j=>j.selected=b.includes(j.value)):m.refs?Me(m.ref)?m.refs.forEach(j=>{(!j.defaultChecked||!j.disabled)&&(Array.isArray(b)?j.checked=!!b.find(D=>D===j.value):j.checked=b===j.value||!!b)}):m.refs.forEach(j=>j.checked=j.value===b):rt(m.ref)?m.ref.value="":(m.ref.value=b,m.ref.type||w.state.next({name:l,values:N(n)})))}(u.shouldDirty||u.shouldTouch)&&_(l,b,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&Fe(l)},ie=(l,a,u)=>{for(const h in a){if(!a.hasOwnProperty(h))return;const b=a[h],m=l+"."+h,j=p(i,m);(x.array.has(l)||z(b)||j&&!j._f)&&!me(b)?ie(m,b,u):Q(m,b,u)}},ee=(l,a,u={})=>{const h=p(i,l),b=x.array.has(l),m=N(a);P(n,l,m),b?(w.array.next({name:l,values:N(n)}),(S.isDirty||S.dirtyFields||I.isDirty||I.dirtyFields)&&u.shouldDirty&&w.state.next({name:l,dirtyFields:pe(o,n),isDirty:k(l,m)})):h&&!h._f&&!J(m)?ie(l,m,u):Q(l,m,u),Ye(l,x)?w.state.next({...r,name:l,values:N(n)}):w.state.next({name:f.mount?l:void 0,values:N(n)})},ve=async l=>{f.mount=!0;const a=l.target;let u=a.name,h=!0;const b=p(i,u),m=T=>{h=Number.isNaN(T)||me(T)&&isNaN(T.getTime())||fe(T,p(n,u,T))},j=ge(s.mode),D=ge(s.reValidateMode);if(b){let T,Y;const xe=a.type?St(b._f):rr(l),de=l.type===pt.BLUR||l.type===pt.FOCUS_OUT,qt=!pr(b._f)&&!s.resolver&&!p(r.errors,u)&&!b._f.deps||jr(de,p(r.touchedFields,u),r.isSubmitted,D,j),Be=Ye(u,x,de);P(n,u,xe),de?(!a||!a.readOnly)&&(b._f.onBlur&&b._f.onBlur(l),A&&A(0)):b._f.onChange&&b._f.onChange(l);const Pe=_(u,xe,de),$t=!K(Pe)||Be;if(!de&&w.state.next({name:u,type:l.type,values:N(n)}),qt)return(S.isValid||I.isValid)&&(s.mode==="onBlur"?de&&G():de||G()),$t&&w.state.next({name:u,...Be?{}:Pe});if(!de&&Be&&w.state.next({...r}),s.resolver){const{errors:xt}=await Z([u]);if(O([u]),m(xe),h){const Gt=wt(r.errors,i,u),mt=wt(xt,i,Gt.name||u);T=mt.error,u=mt.name,Y=K(xt)}}else O([u],!0),T=(await Je(b,x.disabled,n,$,s.shouldUseNativeValidation))[u],O([u]),m(xe),h&&(T?Y=!1:(S.isValid||I.isValid)&&(Y=await re(i,!0)));h&&(b._f.deps&&(!Array.isArray(b._f.deps)||b._f.deps.length>0)&&Fe(b._f.deps),L(u,Y,T,Pe))}},Se=(l,a)=>{if(p(r.errors,a)&&l.focus)return l.focus(),1},Fe=async(l,a={})=>{let u,h;const b=X(l);if(s.resolver){const m=await ne(B(l)?l:b);u=K(m),h=l?!b.some(j=>p(m,j)):u}else l?(h=(await Promise.all(b.map(async m=>{const j=p(i,m);return await re(j&&j._f?{[m]:j}:j)}))).every(Boolean),!(!h&&!r.isValid)&&G()):h=u=await re(i);return w.state.next({...!te(l)||(S.isValid||I.isValid)&&u!==r.isValid?{}:{name:l},...s.resolver||!l?{isValid:u}:{},errors:r.errors}),a.shouldFocus&&!h&&ye(i,Se,l?b:x.mount),h},it=(l,a)=>{let u={...f.mount?n:o};return a&&(u=It(a.dirtyFields?r.dirtyFields:r.touchedFields,u)),B(l)?u:te(l)?p(u,l):l.map(h=>p(u,h))},lt=(l,a)=>({invalid:!!p((a||r).errors,l),isDirty:!!p((a||r).dirtyFields,l),error:p((a||r).errors,l),isValidating:!!p(r.validatingFields,l),isTouched:!!p((a||r).touchedFields,l)}),Lt=l=>{l&&X(l).forEach(a=>U(r.errors,a)),w.state.next({errors:l?r.errors:{}})},at=(l,a,u)=>{const h=(p(i,l,{_f:{}})._f||{}).ref,b=p(r.errors,l)||{},{ref:m,message:j,type:D,...T}=b;P(r.errors,l,{...T,...a,ref:h}),w.state.next({name:l,errors:r.errors,isValid:!1}),u&&u.shouldFocus&&h&&h.focus&&h.focus()},Nt=(l,a)=>le(l)?w.state.subscribe({next:u=>"values"in u&&l(C(void 0,a),u)}):C(l,a,!0),nt=l=>w.state.subscribe({next:a=>{yr(l.name,a.name,l.exact)&&gr(a,l.formState||S,zt,l.reRenderRoot)&&l.callback({values:{...n},...r,...a,defaultValues:o})}}).unsubscribe,Rt=l=>(f.mount=!0,I={...I,...l.formState},nt({...l,formState:{...V,...l.formState}})),De=(l,a={})=>{for(const u of l?X(l):x.mount)x.mount.delete(u),x.array.delete(u),a.keepValue||(U(i,u),U(n,u)),!a.keepError&&U(r.errors,u),!a.keepDirty&&U(r.dirtyFields,u),!a.keepTouched&&U(r.touchedFields,u),!a.keepIsValidating&&U(r.validatingFields,u),!s.shouldUnregister&&!a.keepDefaultValue&&U(o,u);w.state.next({values:N(n)}),w.state.next({...r,...a.keepDirty?{isDirty:k()}:{}}),!a.keepIsValid&&G()},ut=({disabled:l,name:a})=>{if(ae(l)&&f.mount||l||x.disabled.has(a)){const b=x.disabled.has(a)!==!!l;l?x.disabled.add(a):x.disabled.delete(a),b&&f.mount&&!f.action&&G()}},Te=(l,a={})=>{let u=p(i,l);const h=ae(a.disabled)||ae(s.disabled);return P(i,l,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:l}},name:l,mount:!0,...a}}),x.mount.add(l),u?ut({disabled:ae(a.disabled)?a.disabled:s.disabled,name:l}):g(l,!0,a.value),{...h?{disabled:a.disabled||s.disabled}:{},...s.progressive?{required:!!a.required,min:we(a.min),max:we(a.max),minLength:we(a.minLength),maxLength:we(a.maxLength),pattern:we(a.pattern)}:{},name:l,onChange:ve,onBlur:ve,ref:b=>{if(b){Te(l,a),u=p(i,l);const m=B(b.value)&&b.querySelectorAll&&b.querySelectorAll("input,select,textarea")[0]||b,j=cr(m),D=u._f.refs||[];if(j?D.find(T=>T===m):m===u._f.ref)return;P(i,l,{_f:{...u._f,...j?{refs:[...D.filter(Ne),m,...Array.isArray(p(o,l))?[{}]:[]],ref:{type:m.type,name:l}}:{ref:m}}}),g(l,!1,void 0,m)}else u=p(i,l,{}),u._f&&(u._f.mount=!1),(s.shouldUnregister||a.shouldUnregister)&&!(ir(x.array,l)&&f.action)&&x.unMount.add(l)}}},Ee=()=>s.shouldFocusError&&ye(i,Se,x.mount),Ut=l=>{ae(l)&&(w.state.next({disabled:l}),ye(i,(a,u)=>{const h=p(i,u);h&&(a.disabled=h._f.disabled||l,Array.isArray(h._f.refs)&&h._f.refs.forEach(b=>{b.disabled=h._f.disabled||l}))},0,!1))},dt=(l,a)=>async u=>{let h;u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let b=N(n);if(w.state.next({isSubmitting:!0}),s.resolver){const{errors:m,values:j}=await Z();O(),r.errors=m,b=N(j)}else await re(i);if(x.disabled.size)for(const m of x.disabled)U(b,m);if(U(r.errors,"root"),K(r.errors)){w.state.next({errors:{}});try{await l(b,u)}catch(m){h=m}}else a&&await a({...r.errors},u),Ee(),setTimeout(Ee);if(w.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:K(r.errors)&&!h,submitCount:r.submitCount+1,errors:r.errors}),h)throw h},Ht=(l,a={})=>{p(i,l)&&(B(a.defaultValue)?ee(l,N(p(o,l))):(ee(l,a.defaultValue),P(o,l,N(a.defaultValue))),a.keepTouched||U(r.touchedFields,l),a.keepDirty||(U(r.dirtyFields,l),r.isDirty=a.defaultValue?k(l,N(p(o,l))):k()),a.keepError||(U(r.errors,l),S.isValid&&G()),w.state.next({...r}))},ot=(l,a={})=>{const u=l?N(l):o,h=N(u),b=K(l),m=b?o:h;if(a.keepDefaultValues||(o=u),!a.keepValues){if(a.keepDirtyValues){const j=new Set([...x.mount,...Object.keys(pe(o,n))]);for(const D of Array.from(j)){const T=p(r.dirtyFields,D),Y=p(n,D),xe=p(m,D);T&&!B(Y)?P(m,D,Y):!T&&!B(xe)&&ee(D,xe)}}else{if(Xe&&B(l))for(const j of x.mount){const D=p(i,j);if(D&&D._f){const T=Array.isArray(D._f.refs)?D._f.refs[0]:D._f.ref;if(ke(T)){const Y=T.closest("form");if(Y){Y.reset();break}}}}if(a.keepFieldsRef)for(const j of x.mount)ee(j,p(m,j));else i={}}n=s.shouldUnregister?a.keepDefaultValues?N(o):{}:N(m),w.array.next({values:{...m}}),w.state.next({values:{...m}})}x={mount:a.keepDirtyValues?x.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},f.mount=!S.isValid||!!a.keepIsValid||!!a.keepDirtyValues||!s.shouldUnregister&&!K(m),f.watch=!!s.shouldUnregister,f.keepIsValid=!!a.keepIsValid,f.action=!1,a.keepErrors||(r.errors={}),w.state.next({submitCount:a.keepSubmitCount?r.submitCount:0,isDirty:b?!1:a.keepDirty?r.isDirty:!!(a.keepDefaultValues&&!fe(l,o)),isSubmitted:a.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:b?{}:a.keepDirtyValues?a.keepDefaultValues&&n?pe(o,n):r.dirtyFields:a.keepDefaultValues&&l?pe(o,l):a.keepDirty?r.dirtyFields:{},touchedFields:a.keepTouched?r.touchedFields:{},errors:a.keepErrors?r.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:o})},ct=(l,a)=>ot(le(l)?l(n):l,{...s.resetOptions,...a}),Ot=(l,a={})=>{const u=p(i,l),h=u&&u._f;if(h){const b=h.refs?h.refs[0]:h.ref;b.focus&&setTimeout(()=>{b.focus(),a.shouldSelect&&le(b.select)&&b.select()})}},zt=l=>{r={...r,...l}},ft={control:{register:Te,unregister:De,getFieldState:lt,handleSubmit:dt,setError:at,_subscribe:nt,_runSchema:Z,_updateIsValidating:O,_focusError:Ee,_getWatch:C,_getDirty:k,_setValid:G,_setFieldArray:F,_setDisabledField:ut,_setErrors:y,_getFieldArray:q,_reset:ot,_resetDefaultValues:()=>le(s.defaultValues)&&s.defaultValues().then(l=>{ct(l,s.resetOptions),w.state.next({isLoading:!1})}),_removeUnmounted:Ve,_disableForm:Ut,_subjects:w,_proxyFormState:S,get _fields(){return i},get _formValues(){return n},get _state(){return f},set _state(l){f=l},get _defaultValues(){return o},get _names(){return x},set _names(l){x=l},get _formState(){return r},get _options(){return s},set _options(l){s={...s,...l}}},subscribe:Rt,trigger:Fe,register:Te,handleSubmit:dt,watch:Nt,setValue:ee,getValues:it,reset:ct,resetField:Ht,clearErrors:Lt,unregister:De,setError:at,setFocus:Ot,getFieldState:lt};return{...ft,formControl:ft}}var ce=()=>{if(typeof crypto<"u"&&crypto.randomUUID)return crypto.randomUUID();const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,s=>{const r=(Math.random()*16+e)%16|0;return(s=="x"?r:r&3|8).toString(16)})},Re=(e,s,r={})=>r.shouldFocus||B(r.shouldFocus)?r.focusName||`${e}.${B(r.focusIndex)?s:r.focusIndex}.`:"",Ue=(e,s)=>[...e,...X(s)],He=e=>Array.isArray(e)?e.map(()=>{}):void 0;function Oe(e,s,r){return[...e.slice(0,s),...X(r),...e.slice(s)]}var ze=(e,s,r)=>Array.isArray(e)?(B(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(s,1)[0]),e):[],qe=(e,s)=>[...X(s),...X(e)];function wr(e,s){let r=0;const i=[...e];for(const o of s)i.splice(o-r,1),r++;return Ce(i).length?i:[]}var $e=(e,s)=>B(s)?[]:wr(e,X(s).sort((r,i)=>r-i)),Ge=(e,s,r)=>{[e[s],e[r]]=[e[r],e[s]]},At=(e,s,r)=>(e[s]=r,e);function _r(e){const s=ar(),{control:r=s,name:i,keyName:o="id",shouldUnregister:n,rules:f}=e,[x,A]=W.useState(r._getFieldArray(i)),M=W.useRef(r._getFieldArray(i).map(ce)),V=W.useRef(!1);r._names.array.add(i),W.useMemo(()=>f&&x.length>=0&&r.register(i,f),[r,i,x.length,f]),Wt(()=>r._subjects.array.subscribe({next:({values:y,name:g})=>{if(g===i||!g){const _=p(y,i);Array.isArray(_)&&(A(_),M.current=_.map(ce))}}}).unsubscribe,[r,i]);const S=W.useCallback(y=>{V.current=!0,r._setFieldArray(i,y)},[r,i]),I=(y,g)=>{const _=X(N(y)),L=Ue(r._getFieldArray(i),_);r._names.focus=Re(i,L.length-1,g),M.current=Ue(M.current,_.map(ce)),S(L),A(L),r._setFieldArray(i,L,Ue,{argA:He(y)})},w=(y,g)=>{const _=X(N(y)),L=qe(r._getFieldArray(i),_);r._names.focus=Re(i,0,g),M.current=qe(M.current,_.map(ce)),S(L),A(L),r._setFieldArray(i,L,qe,{argA:He(y)})},$=y=>{const g=$e(r._getFieldArray(i),y);M.current=$e(M.current,y),S(g),A(g),!Array.isArray(p(r._fields,i))&&P(r._fields,i,void 0),r._setFieldArray(i,g,$e,{argA:y})},H=(y,g,_)=>{const L=X(N(g)),Z=Oe(r._getFieldArray(i),y,L);r._names.focus=Re(i,y,_),M.current=Oe(M.current,y,L.map(ce)),S(Z),A(Z),r._setFieldArray(i,Z,Oe,{argA:y,argB:He(g)})},G=(y,g)=>{const _=r._getFieldArray(i);Ge(_,y,g),Ge(M.current,y,g),S(_),A(_),r._setFieldArray(i,_,Ge,{argA:y,argB:g},!1)},O=(y,g)=>{const _=r._getFieldArray(i);ze(_,y,g),ze(M.current,y,g),S(_),A(_),r._setFieldArray(i,_,ze,{argA:y,argB:g},!1)},F=(y,g)=>{const _=N(g),L=At(r._getFieldArray(i),y,_);M.current=[...L].map((Z,ne)=>!Z||ne===y?ce():M.current[ne]),S(L),A([...L]),r._setFieldArray(i,L,At,{argA:y,argB:_},!0,!1)},R=y=>{const g=X(N(y));M.current=g.map(ce),S([...g]),A([...g]),r._setFieldArray(i,[...g],_=>_,{},!0,!1)};return W.useEffect(()=>{if(r._state.action=!1,Ye(i,r._names)&&r._subjects.state.next({...r._formState}),V.current&&(!ge(r._options.mode).isOnSubmit||r._formState.isSubmitted)&&!ge(r._options.reValidateMode).isOnSubmit)if(r._options.resolver)r._runSchema([i]).then(y=>{r._updateIsValidating([i]);const g=p(y.errors,i),_=p(r._formState.errors,i);(_?!g&&_.type||g&&(_.type!==g.type||_.message!==g.message):g&&g.type)&&(g?P(r._formState.errors,i,g):U(r._formState.errors,i),r._subjects.state.next({errors:r._formState.errors}))});else{const y=p(r._fields,i);y&&y._f&&!(ge(r._options.reValidateMode).isOnSubmit&&ge(r._options.mode).isOnSubmit)&&Je(y,r._names.disabled,r._formValues,r._options.criteriaMode===se.all,r._options.shouldUseNativeValidation,!0).then(g=>!K(g)&&r._subjects.state.next({errors:Pt(r._formState.errors,g,i)}))}r._subjects.state.next({name:i,values:N(r._formValues)}),r._names.focus&&ye(r._fields,(y,g)=>{if(r._names.focus&&g.startsWith(r._names.focus)&&y.focus)return y.focus(),1}),r._names.focus="",r._setValid(),V.current=!1},[x,i,r]),W.useEffect(()=>(!p(r._formValues,i)&&r._setFieldArray(i),()=>{const y=(g,_)=>{const L=p(r._fields,g);L&&L._f&&(L._f.mount=_)};r._options.shouldUnregister||n?r.unregister(i):y(i,!1)}),[i,r,o,n]),{swap:W.useCallback(G,[S,i,r]),move:W.useCallback(O,[S,i,r]),prepend:W.useCallback(w,[S,i,r]),append:W.useCallback(I,[S,i,r]),remove:W.useCallback($,[S,i,r]),insert:W.useCallback(H,[S,i,r]),update:W.useCallback(F,[S,i,r]),replace:W.useCallback(R,[S,i,r]),fields:W.useMemo(()=>x.map((y,g)=>({...y,[o]:M.current[g]||ce()})),[x,o])}}function Ar(e={}){const s=W.useRef(void 0),r=W.useRef(void 0),[i,o]=W.useState({isDirty:!1,isValidating:!1,isLoading:le(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:le(e.defaultValues)?void 0:e.defaultValues});if(!s.current)if(e.formControl)s.current={...e.formControl,formState:i},e.defaultValues&&!le(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:f,...x}=Fr(e);s.current={...x,formState:i}}const n=s.current.control;return n._options=e,Wt(()=>{const f=n._subscribe({formState:n._proxyFormState,callback:()=>o({...n._formState}),reRenderRoot:!0});return o(x=>({...x,isReady:!0})),n._formState.isReady=!0,f},[n]),W.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),W.useEffect(()=>{e.mode&&(n._options.mode=e.mode),e.reValidateMode&&(n._options.reValidateMode=e.reValidateMode)},[n,e.mode,e.reValidateMode]),W.useEffect(()=>{e.errors&&(n._setErrors(e.errors),n._focusError())},[n,e.errors]),W.useEffect(()=>{e.shouldUnregister&&n._subjects.state.next({values:n._getWatch()})},[n,e.shouldUnregister]),W.useEffect(()=>{if(n._proxyFormState.isDirty){const f=n._getDirty();f!==i.isDirty&&n._subjects.state.next({isDirty:f})}},[n,i.isDirty]),W.useEffect(()=>{var f;e.values&&!fe(e.values,r.current)?(n._reset(e.values,{keepFieldsRef:!0,...n._options.resetOptions}),!((f=n._options.resetOptions)===null||f===void 0)&&f.keepIsValid||n._setValid(),r.current=e.values,o(x=>({...x}))):n._resetDefaultValues()},[n,e.values]),W.useEffect(()=>{n._state.mount||(n._setValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),s.current.formState=W.useMemo(()=>nr(i,n),[n,i]),s.current}function Mr({isReadOnly:e}){const{register:s}=je(),r={mb:2,borderRadius:"12px !important",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.08)",border:"1px solid #e0e0e0",backgroundColor:"#fff"},i={backgroundColor:"#f5f5f5",borderBottom:"1px solid #e0e0e0",minHeight:"56px",display:"flex",alignItems:"center",px:2};return t.jsxs(v,{sx:r,children:[t.jsx(v,{sx:i,children:t.jsx(E,{sx:{fontWeight:600,color:"#333"},children:"Summary of Raw Materials"})}),t.jsx(v,{sx:{p:3},children:t.jsxs(d,{container:!0,spacing:2.5,children:[t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Cow Dung Purchased",type:"number",...s("rawMaterials.cowDungPurchased"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Cow Dung in Stock",type:"number",...s("rawMaterials.cowDungStock"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Old Press Mud Opening Balance",type:"number",...s("rawMaterials.oldPressMudOpeningBalance"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Old Press Mud Purchased",type:"number",...s("rawMaterials.oldPressMudPurchased"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Old Press Mud Degradation Loss",type:"number",...s("rawMaterials.oldPressMudDegradationLoss"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Old Press Mud Closing Stock",type:"number",...s("rawMaterials.oldPressMudClosingStock"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"New Press Mud Purchased",type:"number",...s("rawMaterials.newPressMudPurchased"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Press Mud Used",type:"number",...s("rawMaterials.pressMudUsed"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Total Press Mud Stock",type:"number",...s("rawMaterials.totalPressMudStock"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,children:t.jsx(c,{fullWidth:!0,label:"Audit Note",multiline:!0,rows:3,...s("rawMaterials.auditNote"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})]})})]})}function Vr({isReadOnly:e}){const{register:s}=je(),r={mb:2,borderRadius:"12px !important",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.08)",border:"1px solid #e0e0e0",backgroundColor:"#fff"},i={backgroundColor:"#f5f5f5",borderBottom:"1px solid #e0e0e0",minHeight:"56px",display:"flex",alignItems:"center",px:2};return t.jsxs(v,{sx:r,children:[t.jsx(v,{sx:i,children:t.jsx(E,{sx:{fontWeight:600,color:"#333"},children:"Feed Mixing Tank"})}),t.jsxs(v,{sx:{p:3},children:[t.jsx(E,{variant:"subtitle2",sx:{fontWeight:600,mb:2,color:"#555"},children:"Cow Dung Feed"}),t.jsxs(d,{container:!0,spacing:2,sx:{mb:3},children:[t.jsx(d,{item:!0,xs:12,sm:4,children:t.jsx(c,{fullWidth:!0,label:"Qty",type:"number",...s("feedMixingTank.cowDungFeed.qty"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:4,children:t.jsx(c,{fullWidth:!0,label:"TS %",type:"number",...s("feedMixingTank.cowDungFeed.ts"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:4,children:t.jsx(c,{fullWidth:!0,label:"VS %",type:"number",...s("feedMixingTank.cowDungFeed.vs"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})]}),t.jsx(E,{variant:"subtitle2",sx:{fontWeight:600,mb:2,color:"#555"},children:"Pressmud Feed"}),t.jsxs(d,{container:!0,spacing:2,sx:{mb:3},children:[t.jsx(d,{item:!0,xs:12,sm:4,children:t.jsx(c,{fullWidth:!0,label:"Qty",type:"number",...s("feedMixingTank.pressmudFeed.qty"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:4,children:t.jsx(c,{fullWidth:!0,label:"TS %",type:"number",...s("feedMixingTank.pressmudFeed.ts"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:4,children:t.jsx(c,{fullWidth:!0,label:"VS %",type:"number",...s("feedMixingTank.pressmudFeed.vs"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})]}),t.jsx(E,{variant:"subtitle2",sx:{fontWeight:600,mb:2,color:"#555"},children:"Permeate Feed"}),t.jsxs(d,{container:!0,spacing:2,sx:{mb:3},children:[t.jsx(d,{item:!0,xs:12,sm:4,children:t.jsx(c,{fullWidth:!0,label:"Qty",type:"number",...s("feedMixingTank.permeateFeed.qty"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:4,children:t.jsx(c,{fullWidth:!0,label:"TS %",type:"number",...s("feedMixingTank.permeateFeed.ts"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:4,children:t.jsx(c,{fullWidth:!0,label:"VS %",type:"number",...s("feedMixingTank.permeateFeed.vs"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})]}),t.jsx(E,{variant:"subtitle2",sx:{fontWeight:600,mb:2,color:"#555"},children:"Water Feed"}),t.jsx(d,{container:!0,spacing:2,sx:{mb:3},children:t.jsx(d,{item:!0,xs:12,sm:4,children:t.jsx(c,{fullWidth:!0,label:"Water Qty",type:"number",...s("feedMixingTank.waterQty"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})}),t.jsx(E,{variant:"subtitle2",sx:{fontWeight:600,mb:2,color:"#555"},children:"Feed Mixing Tank Slurry"}),t.jsxs(d,{container:!0,spacing:2,children:[t.jsx(d,{item:!0,xs:12,sm:6,md:3,children:t.jsx(c,{fullWidth:!0,label:"Total Slurry",type:"number",...s("feedMixingTank.slurry.total"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:3,children:t.jsx(c,{fullWidth:!0,label:"Slurry TS %",type:"number",...s("feedMixingTank.slurry.ts"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:3,children:t.jsx(c,{fullWidth:!0,label:"Slurry VS %",type:"number",...s("feedMixingTank.slurry.vs"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:3,children:t.jsx(c,{fullWidth:!0,label:"pH",type:"number",...s("feedMixingTank.slurry.ph"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})]})]})]})}function kr({isReadOnly:e}){const{control:s,register:r}=je(),{fields:i,append:o,remove:n}=_r({control:s,name:"digesters"}),f=()=>{const M=i.length>0?Math.max(...i.map(V=>V.id||0))+1:1;o({id:M,name:`Digester ${String(M).padStart(2,"0")}`,feeding:{},discharge:{},characteristics:{},health:{}})},x={mb:2,borderRadius:"12px !important",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.08)",border:"1px solid #e0e0e0",backgroundColor:"#fff"},A={backgroundColor:"#f5f5f5",borderBottom:"1px solid #e0e0e0",minHeight:"56px",display:"flex",alignItems:"center",px:2};return t.jsxs(v,{sx:x,children:[t.jsx(v,{sx:A,children:t.jsx(E,{sx:{fontWeight:600,color:"#333"},children:"Digesters"})}),t.jsxs(v,{sx:{p:3},children:[!e&&t.jsx(v,{sx:{mb:2},children:t.jsx(he,{variant:"outlined",startIcon:t.jsx(Yt,{}),onClick:f,sx:{textTransform:"none",borderRadius:"8px"},children:"Add Digester"})}),i.length>0?i.map((M,V)=>t.jsx(Qt,{sx:{mb:2,borderRadius:"12px",border:"1px solid #e0e0e0",boxShadow:"0 1px 3px rgba(0,0,0,0.08)"},children:t.jsxs(Kt,{sx:{p:3},children:[t.jsxs(v,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[t.jsx(E,{variant:"h6",sx:{fontWeight:600,color:"#333"},children:t.jsx(c,{variant:"standard",...r(`digesters.${V}.name`),InputProps:{disableUnderline:e,style:{fontSize:"1.25rem",fontWeight:600}},disabled:e})}),!e&&i.length>1&&t.jsx(Vt,{onClick:()=>n(V),size:"small",sx:{color:"#d32f2f",backgroundColor:"rgba(211, 47, 47, 0.08)"},children:t.jsx(Jt,{})})]}),t.jsx(E,{variant:"subtitle2",sx:{fontWeight:600,mb:2,color:"#555"},children:"Feeding Data"}),t.jsxs(d,{container:!0,spacing:2,sx:{mb:3},children:[t.jsx(d,{item:!0,xs:12,sm:4,children:t.jsx(c,{fullWidth:!0,label:"Total Slurry Feed",type:"number",size:"small",...r(`digesters.${V}.feeding.totalSlurryFeed`),disabled:e})}),t.jsx(d,{item:!0,xs:12,sm:4,children:t.jsx(c,{fullWidth:!0,label:"Avg TS %",type:"number",size:"small",...r(`digesters.${V}.feeding.avgTs`),disabled:e})}),t.jsx(d,{item:!0,xs:12,sm:4,children:t.jsx(c,{fullWidth:!0,label:"Avg VS %",type:"number",size:"small",...r(`digesters.${V}.feeding.avgVs`),disabled:e})})]}),t.jsx(E,{variant:"subtitle2",sx:{fontWeight:600,mb:2,color:"#555"},children:"Discharge Data"}),t.jsxs(d,{container:!0,spacing:2,sx:{mb:3},children:[t.jsx(d,{item:!0,xs:12,sm:4,children:t.jsx(c,{fullWidth:!0,label:"Total Slurry Out",type:"number",size:"small",...r(`digesters.${V}.discharge.totalSlurryOut`),disabled:e})}),t.jsx(d,{item:!0,xs:12,sm:4,children:t.jsx(c,{fullWidth:!0,label:"Avg TS %",type:"number",size:"small",...r(`digesters.${V}.discharge.avgTs`),disabled:e})}),t.jsx(d,{item:!0,xs:12,sm:4,children:t.jsx(c,{fullWidth:!0,label:"Avg VS %",type:"number",size:"small",...r(`digesters.${V}.discharge.avgVs`),disabled:e})})]}),t.jsx(E,{variant:"subtitle2",sx:{fontWeight:600,mb:2,color:"#555"},children:"Slurry Characteristics"}),t.jsx(d,{container:!0,spacing:2,sx:{mb:3},children:[{label:"Lignin",key:"lignin"},{label:"VFA",key:"vfa"},{label:"Alkalinity",key:"alkalinity"},{label:"VFA:ALK Ratio",key:"vfaAlkRatio"},{label:"Ash",key:"ash"},{label:"Density",key:"density"},{label:"pH",key:"ph"},{label:"Temperature",key:"temperature"},{label:"Pressure",key:"pressure"},{label:"Slurry Level",key:"slurryLevel"}].map(({label:S,key:I})=>t.jsx(d,{item:!0,xs:6,sm:4,md:3,children:t.jsx(c,{fullWidth:!0,label:S,type:"number",size:"small",...r(`digesters.${V}.characteristics.${I}`),disabled:e})},I))}),t.jsx(E,{variant:"subtitle2",sx:{fontWeight:600,mb:2,color:"#555"},children:"Health Monitoring"}),t.jsxs(d,{container:!0,spacing:2,children:[t.jsx(d,{item:!0,xs:6,sm:4,md:3,children:t.jsx(c,{fullWidth:!0,label:"HRT",type:"number",size:"small",...r(`digesters.${V}.health.hrt`),disabled:e})}),t.jsx(d,{item:!0,xs:6,sm:4,md:3,children:t.jsx(c,{fullWidth:!0,label:"VS Destruction",type:"number",size:"small",...r(`digesters.${V}.health.vsDestruction`),disabled:e})}),t.jsx(d,{item:!0,xs:6,sm:4,md:3,children:t.jsx(c,{fullWidth:!0,label:"OLR",type:"number",size:"small",...r(`digesters.${V}.health.olr`),disabled:e})}),t.jsx(d,{item:!0,xs:6,sm:4,md:3,children:t.jsx(c,{fullWidth:!0,label:"Balloon Level",type:"number",size:"small",...r(`digesters.${V}.health.balloonLevel`),disabled:e})}),t.jsx(d,{item:!0,xs:6,sm:4,md:3,children:t.jsxs(c,{fullWidth:!0,select:!0,label:"Agitator Condition",defaultValue:"OK",size:"small",...r(`digesters.${V}.health.agitatorCondition`),disabled:e,children:[t.jsx(bt,{value:"OK",children:"OK"}),t.jsx(bt,{value:"Not OK",children:"Not OK"})]})}),t.jsx(d,{item:!0,xs:6,sm:4,md:3,children:t.jsx(c,{fullWidth:!0,label:"Foaming Level",type:"number",size:"small",...r(`digesters.${V}.health.foamingLevel`),disabled:e})})]})]})},M.id)):t.jsx(E,{variant:"body2",color:"text.secondary",children:"No digesters available."})]})]})}function Wr({isReadOnly:e}){const{register:s}=je(),r={mb:2,borderRadius:"12px !important",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.08)",border:"1px solid #e0e0e0",backgroundColor:"#fff"},i={backgroundColor:"#f5f5f5",borderBottom:"1px solid #e0e0e0",minHeight:"56px",display:"flex",alignItems:"center",px:2};return t.jsxs(v,{sx:r,children:[t.jsx(v,{sx:i,children:t.jsx(E,{sx:{fontWeight:600,color:"#333"},children:"SLS Machine"})}),t.jsx(v,{sx:{p:3},children:t.jsxs(d,{container:!0,spacing:2,children:[t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Water Consumption",type:"number",...s("slsMachine.waterConsumption"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Poly Electrolyte",type:"number",...s("slsMachine.polyElectrolyte"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Solution",type:"number",...s("slsMachine.solution"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Slurry Feed",type:"number",...s("slsMachine.slurryFeed"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Wet Cake Production",type:"number",...s("slsMachine.wetCakeProduction"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Wet Cake TS %",type:"number",...s("slsMachine.wetCakeTs"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Wet Cake VS %",type:"number",...s("slsMachine.wetCakeVs"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Liquid Produced",type:"number",...s("slsMachine.liquidProduced"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Liquid TS %",type:"number",...s("slsMachine.liquidTs"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Liquid VS %",type:"number",...s("slsMachine.liquidVs"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Liquid Sent to Lagoon",type:"number",...s("slsMachine.liquidSentToLagoon"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})]})})]})}function Ir({isReadOnly:e}){const{register:s}=je(),r={mb:2,borderRadius:"12px !important",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.08)",border:"1px solid #e0e0e0",backgroundColor:"#fff"},i={backgroundColor:"#f5f5f5",borderBottom:"1px solid #e0e0e0",minHeight:"56px",display:"flex",alignItems:"center",px:2};return t.jsxs(t.Fragment,{children:[t.jsxs(v,{sx:r,children:[t.jsx(v,{sx:i,children:t.jsx(E,{sx:{fontWeight:600,color:"#333"},children:"Raw Biogas"})}),t.jsx(v,{sx:{p:3},children:t.jsxs(d,{container:!0,spacing:2,children:[t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Digester 01 Gas",type:"number",...s("rawBiogas.digester01Gas"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Digester 02 Gas",type:"number",...s("rawBiogas.digester02Gas"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Digester 03 Gas",type:"number",...s("rawBiogas.digester03Gas"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Total Raw Biogas",type:"number",...s("rawBiogas.totalRawBiogas"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"RBG Flared",type:"number",...s("rawBiogas.rbgFlared"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Gas Yield",type:"number",...s("rawBiogas.gasYield"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})]})})]}),t.jsxs(v,{sx:r,children:[t.jsx(v,{sx:i,children:t.jsx(E,{sx:{fontWeight:600,color:"#333"},children:"Raw Biogas Quality"})}),t.jsx(v,{sx:{p:3},children:t.jsxs(d,{container:!0,spacing:2,children:[t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"CH4 %",type:"number",...s("rawBiogasQuality.ch4"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"CO2 %",type:"number",...s("rawBiogasQuality.co2"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"H2S ppm",type:"number",...s("rawBiogasQuality.h2s"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"O2 %",type:"number",...s("rawBiogasQuality.o2"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"N2 %",type:"number",...s("rawBiogasQuality.n2"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})]})})]}),t.jsxs(v,{sx:r,children:[t.jsx(v,{sx:i,children:t.jsx(E,{sx:{fontWeight:600,color:"#333"},children:"Compressed Biogas"})}),t.jsx(v,{sx:{p:3},children:t.jsxs(d,{container:!0,spacing:2,children:[t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Produced (kg)",type:"number",...s("compressedBiogas.produced"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"CH4 %",type:"number",...s("compressedBiogas.ch4"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"CO2 %",type:"number",...s("compressedBiogas.co2"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"H2S ppm",type:"number",...s("compressedBiogas.h2s"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"O2 %",type:"number",...s("compressedBiogas.o2"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"N2 %",type:"number",...s("compressedBiogas.n2"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"Conversion Ratio",type:"number",...s("compressedBiogas.conversionRatio"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"CH4 Slippage",type:"number",...s("compressedBiogas.ch4Slippage"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"CBG Stock",type:"number",...s("compressedBiogas.cbgStock"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:6,md:4,children:t.jsx(c,{fullWidth:!0,label:"CBG Sold",type:"number",...s("compressedBiogas.cbgSold"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})]})})]}),t.jsxs(v,{sx:r,children:[t.jsx(v,{sx:i,children:t.jsx(E,{sx:{fontWeight:600,color:"#333"},children:"Compressors"})}),t.jsx(v,{sx:{p:3},children:t.jsxs(d,{container:!0,spacing:2,children:[t.jsx(d,{item:!0,xs:12,sm:4,children:t.jsx(c,{fullWidth:!0,label:"Compressor 1 Hours",type:"number",...s("compressors.compressor1Hours"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:4,children:t.jsx(c,{fullWidth:!0,label:"Compressor 2 Hours",type:"number",...s("compressors.compressor2Hours"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})}),t.jsx(d,{item:!0,xs:12,sm:4,children:t.jsx(c,{fullWidth:!0,label:"Total Hours",type:"number",...s("compressors.totalHours"),disabled:e,sx:{"& .MuiOutlinedInput-root":{borderRadius:"8px"}}})})]})})]})]})}function Cr({isReadOnly:e}){const{register:s}=je(),r={mb:2,borderRadius:"12px !important",overflow:"hidden",boxShadow:"0 1px 3px rgba(0,0,0,0.08)",border:"1px solid #e0e0e0",backgroundColor:"#fff"},i={backgroundColor:"#f5f5f5",borderBottom:"1px solid #e0e0e0",minHeight:"56px",display:"flex",alignItems:"center",px:2};return t.jsxs(t.Fragment,{children:[t.jsxs(v,{sx:r,children:[t.jsx(v,{sx:i,children:t.jsx(E,{sx:{fontWeight:600,color:"#333"},children:"Fertilizer"})}),t.jsx(v,{sx:{p:3},children:t.jsxs(d,{container:!0,spacing:2,children:[t.jsx(d,{item:!0,xs:12,sm:6,md:3,children:t.jsx(c,{fullWidth:!0,label:"FOM Produced",type:"number",...s("fertilizer.fomProduced"),disabled:e})}),t.jsx(d,{item:!0,xs:12,sm:6,md:3,children:t.jsx(c,{fullWidth:!0,label:"Inventory",type:"number",...s("fertilizer.inventory"),disabled:e})}),t.jsx(d,{item:!0,xs:12,sm:6,md:3,children:t.jsx(c,{fullWidth:!0,label:"Sold",type:"number",...s("fertilizer.sold"),disabled:e})}),t.jsx(d,{item:!0,xs:12,sm:6,md:3,children:t.jsx(c,{fullWidth:!0,label:"Weighted Average",type:"number",...s("fertilizer.weightedAverage"),disabled:e})}),t.jsx(d,{item:!0,xs:12,sm:6,md:3,children:t.jsx(c,{fullWidth:!0,label:"Revenue",type:"number",...s("fertilizer.revenue1"),disabled:e})}),t.jsx(d,{item:!0,xs:12,sm:6,md:3,children:t.jsx(c,{fullWidth:!0,label:"Lagoon Liquid Sold",type:"number",...s("fertilizer.lagoonLiquidSold"),disabled:e})}),t.jsx(d,{item:!0,xs:12,sm:6,md:3,children:t.jsx(c,{fullWidth:!0,label:"Revenue (Liquid)",type:"number",...s("fertilizer.revenue2"),disabled:e})}),t.jsx(d,{item:!0,xs:12,sm:6,md:3,children:t.jsx(c,{fullWidth:!0,label:"Loose FOM Sold",type:"number",...s("fertilizer.looseFomSold"),disabled:e})}),t.jsx(d,{item:!0,xs:12,sm:6,md:3,children:t.jsx(c,{fullWidth:!0,label:"Revenue (Loose)",type:"number",...s("fertilizer.revenue3"),disabled:e})})]})})]}),t.jsxs(v,{sx:r,children:[t.jsx(v,{sx:i,children:t.jsx(E,{sx:{fontWeight:600,color:"#333"},children:"Utilities and Power"})}),t.jsx(v,{sx:{p:3},children:t.jsxs(d,{container:!0,spacing:2,children:[t.jsx(d,{item:!0,xs:12,sm:6,children:t.jsx(c,{fullWidth:!0,label:"Electricity Consumption (KWH)",type:"number",...s("utilities.electricityConsumption"),disabled:e})}),t.jsx(d,{item:!0,xs:12,sm:6,children:t.jsx(c,{fullWidth:!0,label:"Specific Power Consumption",type:"number",...s("utilities.specificPowerConsumption"),disabled:e})})]})})]}),t.jsxs(v,{sx:r,children:[t.jsx(v,{sx:i,children:t.jsx(E,{sx:{fontWeight:600,color:"#333"},children:"Manpower"})}),t.jsx(v,{sx:{p:3},children:t.jsxs(d,{container:!0,spacing:2,children:[t.jsx(d,{item:!0,xs:12,sm:6,children:t.jsx(c,{fullWidth:!0,label:"Refex SREL",type:"number",...s("manpower.refexSrelStaff"),disabled:e})}),t.jsx(d,{item:!0,xs:12,sm:6,children:t.jsx(c,{fullWidth:!0,label:"Third Party",type:"number",...s("manpower.thirdPartyStaff"),disabled:e})})]})})]}),t.jsxs(v,{sx:r,children:[t.jsx(v,{sx:i,children:t.jsx(E,{sx:{fontWeight:600,color:"#333"},children:"Plant Availability"})}),t.jsx(v,{sx:{p:3},children:t.jsxs(d,{container:!0,spacing:2,children:[t.jsx(d,{item:!0,xs:12,sm:6,md:3,children:t.jsx(c,{fullWidth:!0,label:"Working Hours",type:"number",...s("plantAvailability.workingHours"),disabled:e})}),t.jsx(d,{item:!0,xs:12,sm:6,md:3,children:t.jsx(c,{fullWidth:!0,label:"Scheduled Downtime",type:"number",...s("plantAvailability.scheduledDowntime"),disabled:e})}),t.jsx(d,{item:!0,xs:12,sm:6,md:3,children:t.jsx(c,{fullWidth:!0,label:"Unscheduled Downtime",type:"number",...s("plantAvailability.unscheduledDowntime"),disabled:e})}),t.jsx(d,{item:!0,xs:12,sm:6,md:3,children:t.jsx(c,{fullWidth:!0,label:"Total Availability",type:"number",...s("plantAvailability.totalAvailability"),disabled:e})})]})})]}),t.jsxs(v,{sx:r,children:[t.jsx(v,{sx:i,children:t.jsx(E,{sx:{fontWeight:600,color:"#333"},children:"Health, Safety & Environment (HSE)"})}),t.jsx(v,{sx:{p:3},children:t.jsxs(d,{container:!0,spacing:2,children:[t.jsx(d,{item:!0,xs:6,sm:4,md:3,children:t.jsx(c,{fullWidth:!0,label:"Safety LTI",type:"number",...s("hse.safetyLti"),disabled:e})}),t.jsx(d,{item:!0,xs:6,sm:4,md:3,children:t.jsx(c,{fullWidth:!0,label:"Near Misses",type:"number",...s("hse.nearMisses"),disabled:e})}),t.jsx(d,{item:!0,xs:6,sm:4,md:3,children:t.jsx(c,{fullWidth:!0,label:"First Aid",type:"number",...s("hse.firstAid"),disabled:e})}),t.jsx(d,{item:!0,xs:6,sm:4,md:3,children:t.jsx(c,{fullWidth:!0,label:"Reportable Incidents",type:"number",...s("hse.reportableIncidents"),disabled:e})}),t.jsx(d,{item:!0,xs:6,sm:4,md:3,children:t.jsx(c,{fullWidth:!0,label:"MTI",type:"number",...s("hse.mti"),disabled:e})}),t.jsx(d,{item:!0,xs:6,sm:4,md:3,children:t.jsx(c,{fullWidth:!0,label:"Other Incidents",type:"number",...s("hse.otherIncidents"),disabled:e})}),t.jsx(d,{item:!0,xs:6,sm:4,md:3,children:t.jsx(c,{fullWidth:!0,label:"Fatalities",type:"number",...s("hse.fatalities"),disabled:e})})]})})]}),t.jsxs(v,{sx:r,children:[t.jsx(v,{sx:i,children:t.jsx(E,{sx:{fontWeight:600,color:"#333"},children:"Remarks"})}),t.jsx(v,{sx:{p:3},children:t.jsx(c,{fullWidth:!0,label:"Breakdown Reason / Other Remarks",multiline:!0,rows:4,...s("remarks"),disabled:e})})]})]})}const _e=({children:e,delay:s})=>{const[r,i]=Ae.useState(!1);return Ae.useEffect(()=>{const o=setTimeout(()=>i(!0),s);return()=>clearTimeout(o)},[s]),r?t.jsx(t.Fragment,{children:e}):null};function qr({viewMode:e,selectedEntry:s,digesters:r,onBackToList:i,onAddDigester:o,onRemoveDigester:n}){const f=e==="view",[x,A]=Ae.useState(!1),[M,V]=Ae.useState(null),S={date:new Date().toISOString().split("T")[0],shift:"General",digesters:[{id:1,name:"Digester 01",feeding:{},discharge:{},characteristics:{},health:{}},{id:2,name:"Digester 02",feeding:{},discharge:{},characteristics:{},health:{}},{id:3,name:"Digester 03",feeding:{},discharge:{},characteristics:{},health:{}}],rawMaterials:{},feedMixingTank:{},slsMachine:{},rawBiogas:{},rawBiogasQuality:{},compressedBiogas:{},compressors:{},fertilizer:{},utilities:{},manpower:{},plantAvailability:{},hse:{},remarks:""},I=Ar({defaultValues:S,shouldUnregister:!1});Ae.useEffect(()=>{e==="create"&&!s?I.reset(S):s&&I.reset(s)},[e,s]);const w=async F=>{A(!0),V(null);try{const R={...F,status:"submitted"};if(e==="edit"&&s)await oe.updateEntry(Number(s.id),R),await oe.submitEntry(Number(s.id)),alert("Entry updated and submitted successfully!");else{const y=await oe.createEntry(R);await oe.submitEntry(Number(y.id)),alert("Entry created and submitted successfully!")}i()}catch(R){V(R.response?.data?.message||R.message||"Failed to submit entry")}finally{A(!1)}},$=async()=>{const F=I.getValues();A(!0),V(null);try{const R={...F,status:"draft"};e==="edit"&&s?(await oe.updateEntry(Number(s.id),R),alert("Draft updated successfully!")):(await oe.createEntry(R),alert("Draft saved successfully!")),i()}catch(R){V(R.response?.data?.message||"Failed to save draft")}finally{A(!1)}},H=async()=>{if(s){A(!0);try{await oe.approveEntry(Number(s.id)),alert("Entry approved!"),i()}catch{V("Failed to approve entry")}finally{A(!1)}}},G=async()=>{if(!s)return;const F=prompt("Please enter rejection reason:");if(F!==null){A(!0);try{await oe.rejectEntry(Number(s.id),F),alert("Entry rejected!"),i()}catch{V("Failed to reject entry")}finally{A(!1)}}},O=F=>{switch(F){case"Submitted":return{bg:"rgba(40, 121, 182, 0.1)",color:"#2879b6"};case"Approved":return{bg:"rgba(125, 194, 68, 0.1)",color:"#7dc244"};case"Draft":return{bg:"rgba(245, 158, 33, 0.1)",color:"#F59E21"};default:return{bg:"rgba(88, 89, 91, 0.1)",color:"#58595B"}}};return t.jsx(dr,{...I,children:t.jsxs(v,{className:"aos-fade-up",component:"form",onSubmit:I.handleSubmit(w),sx:{position:"relative"},children:[x&&t.jsx(v,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:1300,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",bgcolor:"rgba(0,0,0,0.4)",backdropFilter:"blur(2px)"},children:t.jsxs(v,{sx:{bgcolor:"background.paper",borderRadius:2,p:3,boxShadow:4,display:"flex",flexDirection:"column",alignItems:"center",gap:2},children:[t.jsx(Le,{size:44,sx:{color:"#2879b6"}}),t.jsx(E,{variant:"body1",fontWeight:600,color:"text.primary",children:"Saving"}),t.jsx(E,{variant:"caption",color:"text.secondary",children:"Please wait, do not close the page."})]})}),t.jsxs(v,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2},children:[t.jsxs(v,{sx:{display:"flex",alignItems:"center",gap:2},children:[t.jsx(Vt,{onClick:i,sx:{backgroundColor:"rgba(40, 121, 182, 0.1)",borderRadius:"12px","&:hover":{backgroundColor:"rgba(40, 121, 182, 0.2)"}},children:t.jsx(tr,{sx:{color:"#2879b6"}})}),t.jsx(E,{variant:"h4",sx:{fontWeight:700,color:"#2879b6"},children:e==="create"?"Create New MIS Entry":e==="edit"?`Edit: ${s?.id}`:`View: ${s?.id}`}),s&&t.jsx(Xt,{label:s.status,size:"small",sx:{fontWeight:600,backgroundColor:O(s.status).bg,color:O(s.status).color,borderRadius:"8px"}})]}),f?s&&s.status==="Submitted"&&t.jsxs(v,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[t.jsx(he,{variant:"contained",color:"success",onClick:H,disabled:x,sx:{borderRadius:"12px",px:3},children:"Approve"}),t.jsx(he,{variant:"contained",color:"error",onClick:G,disabled:x,sx:{borderRadius:"12px",px:3},children:"Reject"})]}):t.jsxs(v,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[t.jsx(he,{variant:"outlined",startIcon:t.jsx(Zt,{}),className:"btn-gradient-warning",onClick:$,disabled:x,sx:{textTransform:"none",borderRadius:"12px",border:"none",color:"#fff",px:3,whiteSpace:"nowrap"},children:"Save Draft"}),t.jsx(he,{variant:"contained",startIcon:x?t.jsx(Le,{size:20}):t.jsx(ht,{}),type:"submit",disabled:x,className:"btn-gradient-success",sx:{textTransform:"none",borderRadius:"12px",color:"#fff",px:3,whiteSpace:"nowrap"},children:"Submit"})]})]}),M&&t.jsx(er,{severity:"error",sx:{mb:2},children:M}),e==="create"&&t.jsxs(v,{sx:{mb:2,p:2,bgcolor:"#fff",borderRadius:2},children:[t.jsx(E,{variant:"subtitle2",children:"Date"}),t.jsx("input",{type:"date",...I.register("date",{required:!0}),style:{padding:8,borderRadius:4,border:"1px solid #ccc"}})]}),t.jsx(Mr,{isReadOnly:f}),t.jsx(_e,{delay:100,children:t.jsx(Vr,{isReadOnly:f})}),t.jsx(_e,{delay:200,children:t.jsx(kr,{isReadOnly:f})}),t.jsx(_e,{delay:300,children:t.jsx(Wr,{isReadOnly:f})}),t.jsx(_e,{delay:400,children:t.jsx(Ir,{isReadOnly:f})}),t.jsx(_e,{delay:500,children:t.jsx(Cr,{isReadOnly:f})}),!f&&t.jsx(v,{sx:{display:"flex",gap:2,justifyContent:"flex-end",flexWrap:"wrap",mt:3},children:t.jsx(he,{variant:"contained",startIcon:x?t.jsx(Le,{size:20}):t.jsx(ht,{}),type:"submit",disabled:x,className:"btn-gradient-success",size:"large",sx:{textTransform:"none",borderRadius:"12px",px:4,color:"#fff",whiteSpace:"nowrap"},children:"Submit"})})]})})}export{qr as default};
//# sourceMappingURL=MISFormView-vWBXHFn_.js.map
